/*! For license information please see application.js.LICENSE.txt */
(()=>{var e={532:(e,t,n)=>{"use strict";var i=n(310),r=n(529),s="value",o="\n  ",a={};function l(e){var t=Array.isArray(e);return function(n){var i=c(a.plainArray,n);if(i)return i;if(t&&n.length!==e.length)return"an array with "+e.length+" items";for(var r=0;r<n.length;r++)if(i=c(t?e[r]:e,n[r]))return[r].concat(i)}}function c(e,t){if(null!=t||e.hasOwnProperty("__required")){var n=e(t);return n?Array.isArray(n)?n:[n]:void 0}}function h(e,t){var n=e.length,i=e[n-1],o=e.slice(0,n-1);return 0===o.length&&(o=[s]),t=r(t,{path:o}),"function"==typeof i?i(t):u(t,function(e){return"must be "+((/^an? /.test(t=e)?t:/^[aeiou]/i.test(t)?"an "+t:/^[a-z]/i.test(t)?"a "+t:t)+".");var t}(i))}function u(e,t){return(d(e.path)?"Item at position ":"")+e.path.join(".")+" "+t}function d(e){return"number"==typeof e[e.length-1]||"number"==typeof e[0]}a.assert=function(e,t){return t=t||{},function(n){var i=c(e,n);if(i){var r=h(i,t);throw t.apiName&&(r=t.apiName+": "+r),new Error(r)}}},a.shape=function(e){var t,n=(t=e,Object.keys(t||{}).map((function(e){return{key:e,value:t[e]}})));return function(e){var t,i=c(a.plainObject,e);if(i)return i;for(var r=[],l=0;l<n.length;l++)t=n[l].key,(i=c(n[l].value,e[t]))&&r.push([t].concat(i));return r.length<2?r[0]:function(e){r=r.map((function(t){return"- "+t[0]+": "+h(t,e).split("\n").join(o)}));var t=e.path.join(".");return"The following properties"+(t===s?"":" of "+t)+" have invalid values:"+o+r.join(o)}}},a.strictShape=function(e){var t=a.shape(e);return function(n){var i=t(n);if(i)return i;var r=Object.keys(n).reduce((function(t,n){return void 0===e[n]&&t.push(n),t}),[]);return 0!==r.length?function(){return"The following keys are invalid: "+r.join(", ")}:void 0}},a.arrayOf=function(e){return l(e)},a.tuple=function(){return l(Array.isArray(arguments[0])?arguments[0]:Array.prototype.slice.call(arguments))},a.required=function(e){function t(t){return null==t?function(e){return u(e,d(e.path)?"cannot be undefined/null.":"is required.")}:e.apply(this,arguments)}return t.__required=!0,t},a.oneOfType=function(){var e=Array.isArray(arguments[0])?arguments[0]:Array.prototype.slice.call(arguments);return function(t){var n,i=e.map((function(e){return c(e,t)})).filter(Boolean);if(i.length===e.length)return i.every((function(e){return 1===e.length&&"string"==typeof e[0]}))?(n=i.map((function(e){return e[0]}))).length<2?n[0]:2===n.length?n.join(" or "):n.slice(0,-1).join(", ")+", or "+n.slice(-1):i.reduce((function(e,t){return t.length>e.length?t:e}))}},a.equal=function(e){return function(t){if(t!==e)return JSON.stringify(e)}},a.oneOf=function(){var e=(Array.isArray(arguments[0])?arguments[0]:Array.prototype.slice.call(arguments)).map((function(e){return a.equal(e)}));return a.oneOfType.apply(this,e)},a.range=function(e){var t=e[0],n=e[1];return function(e){if(c(a.number,e)||e<t||e>n)return"number between "+t+" & "+n+" (inclusive)"}},a.any=function(){},a.boolean=function(e){if("boolean"!=typeof e)return"boolean"},a.number=function(e){if("number"!=typeof e)return"number"},a.plainArray=function(e){if(!Array.isArray(e))return"array"},a.plainObject=function(e){if(!i(e))return"object"},a.string=function(e){if("string"!=typeof e)return"string"},a.func=function(e){if("function"!=typeof e)return"function"},a.validate=c,a.processMessage=h,e.exports=a},236:(e,t,n)=>{"use strict";var i=n(416).x0;function r(e){this.origin=e.origin||"https://api.mapbox.com",this.endpoint="events/v2",this.access_token=e.accessToken,this.version="0.2.0",this.sessionID=this.generateSessionID(),this.userAgent=this.getUserAgent(),this.options=e,this.send=this.send.bind(this),this.countries=e.countries?e.countries.split(","):null,this.types=e.types?e.types.split(","):null,this.bbox=e.bbox?e.bbox:null,this.language=e.language?e.language.split(","):null,this.limit=e.limit?+e.limit:null,this.locale=navigator.language||null,this.enableEventLogging=this.shouldEnableLogging(e),this.eventQueue=new Array,this.flushInterval=e.flushInterval||1e3,this.maxQueueSize=e.maxQueueSize||100,this.timer=this.flushInterval?setTimeout(this.flush.bind(this),this.flushInterval):null,this.lastSentInput="",this.lastSentIndex=0}r.prototype={select:function(e,t){var n=this.getSelectedIndex(e,t),i=this.getEventPayload("search.select",t);if(i.resultIndex=n,i.resultPlaceName=e.place_name,i.resultId=e.id,(n!==this.lastSentIndex||i.queryString!==this.lastSentInput)&&-1!=n&&(this.lastSentIndex=n,this.lastSentInput=i.queryString,i.queryString))return this.push(i)},start:function(e){var t=this.getEventPayload("search.start",e);if(t.queryString)return this.push(t)},keyevent:function(e,t){if(e.key&&!e.metaKey&&-1===[9,27,37,39,13,38,40].indexOf(e.keyCode)){var n=this.getEventPayload("search.keystroke",t);if(n.lastAction=e.key,n.queryString)return this.push(n)}},send:function(e,t){if(!this.enableEventLogging)return t?t():void 0;var n=this.getRequestOptions(e);this.request(n,function(e){return e?this.handleError(e,t):t?t():void 0}.bind(this))},getRequestOptions:function(e){return Array.isArray(e)||(e=[e]),{method:"POST",host:this.origin,path:this.endpoint+"?access_token="+this.access_token,headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}},getEventPayload:function(e,t){var n;n=t.options.proximity?"object"==typeof t.options.proximity?[t.options.proximity.longitude,t.options.proximity.latitude]:"ip"===t.options.proximity?[999,999]:t.options.proximity:null;var i=t._map?t._map.getZoom():void 0,r={event:e,created:+new Date,sessionIdentifier:this.sessionID,country:this.countries,userAgent:this.userAgent,language:this.language,bbox:this.bbox,types:this.types,endpoint:"mapbox.places",autocomplete:t.options.autocomplete,fuzzyMatch:t.options.fuzzyMatch,proximity:n,limit:t.options.limit,routing:t.options.routing,worldview:t.options.worldview,mapZoom:i,keyboardLocale:this.locale};return"search.select"===e?r.queryString=t.inputString:"search.select"!=e&&t._inputEl?r.queryString=t._inputEl.value:r.queryString=t.inputString,r},request:function(e,t){var n=new XMLHttpRequest;for(var i in n.onreadystatechange=function(){if(4==this.readyState)return 204==this.status?t(null):t(this.statusText)},n.open(e.method,e.host+"/"+e.path,!0),e.headers){var r=e.headers[i];n.setRequestHeader(i,r)}n.send(e.body)},handleError:function(e,t){if(t)return t(e)},generateSessionID:function(){return i()},getUserAgent:function(){return"mapbox-gl-geocoder."+this.version+"."+navigator.userAgent},getSelectedIndex:function(e,t){if(t._typeahead){var n=t._typeahead.data,i=e.id;return n.map((function(e){return e.id})).indexOf(i)}},shouldEnableLogging:function(e){return!(!1===e.enableEventLogging||e.origin&&"https://api.mapbox.com"!==e.origin||e.localGeocoder||e.filter)},flush:function(){this.eventQueue.length>0&&(this.send(this.eventQueue),this.eventQueue=new Array),this.timer&&clearTimeout(this.timer),this.flushInterval&&(this.timer=setTimeout(this.flush.bind(this),this.flushInterval))},push:function(e,t){this.eventQueue.push(e),(this.eventQueue.length>=this.maxQueueSize||t)&&this.flush()},remove:function(){this.flush()}},e.exports=r},630:e=>{e.exports={fr:{name:"France",bbox:[[-4.59235,41.380007],[9.560016,51.148506]]},us:{name:"United States",bbox:[[-171.791111,18.91619],[-66.96466,71.357764]]},ru:{name:"Russia",bbox:[[19.66064,41.151416],[190.10042,81.2504]]},ca:{name:"Canada",bbox:[[-140.99778,41.675105],[-52.648099,83.23324]]}}},645:e=>{function t(){}t.prototype={isSupport:function(){return Boolean(window.navigator.geolocation)},getCurrentPosition:function(){const e={enableHighAccuracy:!0};return new Promise((function(t,n){window.navigator.geolocation.getCurrentPosition(t,n,e)}))}},e.exports=t},651:(e,t,n)=>{"use strict";var i=n(504),r=n(296),s=n(529),o=n(187).EventEmitter,a=n(630),l=n(10),c=n(81),h=n(236),u=n(227),d=n(395),p=n(645),m=n(537);function f(e){this._eventEmitter=new o,this.options=s({},this.options,e),this.inputString="",this.fresh=!0,this.lastSelected=null,this.geolocation=new p}f.prototype={options:{zoom:16,flyTo:!0,trackProximity:!0,minLength:2,reverseGeocode:!1,flipCoordinates:!1,limit:5,origin:"https://api.mapbox.com",enableEventLogging:!0,marker:!0,mapboxgl:null,collapsed:!1,clearAndBlurOnEsc:!1,clearOnBlur:!1,enableGeolocation:!1,addressAccuracy:"street",getItemValue:function(e){return e.place_name},render:function(e){var t=e.place_name.split(",");return'<div class="mapboxgl-ctrl-geocoder--suggestion"><div class="mapboxgl-ctrl-geocoder--suggestion-title">'+t[0]+'</div><div class="mapboxgl-ctrl-geocoder--suggestion-address">'+t.splice(1,t.length).join(",")+"</div></div>"}},addTo:function(e){function t(e,t){if(!document.body.contains(t))throw new Error("Element provided to #addTo() exists, but is not in the DOM");const n=e.onAdd();t.appendChild(n)}if(e._controlContainer)e.addControl(this);else if(e instanceof HTMLElement)t(this,e);else{if("string"!=typeof e)throw new Error("Error: addTo must be a mapbox-gl-js map, an html element, or a CSS selector query for a single html element");{const n=document.querySelectorAll(e);if(0===n.length)throw new Error("Element ",e,"not found.");if(n.length>1)throw new Error("Geocoder can only be added to a single html element");t(this,n[0])}}},onAdd:function(e){if(e&&"string"!=typeof e&&(this._map=e),this.setLanguage(),this.options.localGeocoderOnly||(this.geocoderService=c(l({accessToken:this.options.accessToken,origin:this.options.origin}))),this.options.localGeocoderOnly&&!this.options.localGeocoder)throw new Error("A localGeocoder function must be specified to use localGeocoderOnly mode");this.eventManager=new h(this.options),this._onChange=this._onChange.bind(this),this._onKeyDown=this._onKeyDown.bind(this),this._onPaste=this._onPaste.bind(this),this._onBlur=this._onBlur.bind(this),this._showButton=this._showButton.bind(this),this._hideButton=this._hideButton.bind(this),this._onQueryResult=this._onQueryResult.bind(this),this.clear=this.clear.bind(this),this._updateProximity=this._updateProximity.bind(this),this._collapse=this._collapse.bind(this),this._unCollapse=this._unCollapse.bind(this),this._clear=this._clear.bind(this),this._clearOnBlur=this._clearOnBlur.bind(this),this._geolocateUser=this._geolocateUser.bind(this);var t=this.container=document.createElement("div");t.className="mapboxgl-ctrl-geocoder mapboxgl-ctrl";var n=this.createIcon("search",'<path d="M7.4 2.5c-2.7 0-4.9 2.2-4.9 4.9s2.2 4.9 4.9 4.9c1 0 1.8-.2 2.5-.8l3.7 3.7c.2.2.4.3.8.3.7 0 1.1-.4 1.1-1.1 0-.3-.1-.5-.3-.8L11.4 10c.4-.8.8-1.6.8-2.5.1-2.8-2.1-5-4.8-5zm0 1.6c1.8 0 3.2 1.4 3.2 3.2s-1.4 3.2-3.2 3.2-3.3-1.3-3.3-3.1 1.4-3.3 3.3-3.3z"/>');this._inputEl=document.createElement("input"),this._inputEl.type="text",this._inputEl.className="mapboxgl-ctrl-geocoder--input",this.setPlaceholder(),this.options.collapsed&&(this._collapse(),this.container.addEventListener("mouseenter",this._unCollapse),this.container.addEventListener("mouseleave",this._collapse),this._inputEl.addEventListener("focus",this._unCollapse)),(this.options.collapsed||this.options.clearOnBlur)&&this._inputEl.addEventListener("blur",this._onBlur),this._inputEl.addEventListener("keydown",r(this._onKeyDown,200)),this._inputEl.addEventListener("paste",this._onPaste),this._inputEl.addEventListener("change",this._onChange),this.container.addEventListener("mouseenter",this._showButton),this.container.addEventListener("mouseleave",this._hideButton),this._inputEl.addEventListener("keyup",function(e){this.eventManager.keyevent(e,this)}.bind(this));var s=document.createElement("div");s.classList.add("mapboxgl-ctrl-geocoder--pin-right"),this._clearEl=document.createElement("button"),this._clearEl.setAttribute("aria-label","Clear"),this._clearEl.addEventListener("click",this.clear),this._clearEl.className="mapboxgl-ctrl-geocoder--button";var o=this.createIcon("close",'<path d="M3.8 2.5c-.6 0-1.3.7-1.3 1.3 0 .3.2.7.5.8L7.2 9 3 13.2c-.3.3-.5.7-.5 1 0 .6.7 1.3 1.3 1.3.3 0 .7-.2 1-.5L9 10.8l4.2 4.2c.2.3.7.3 1 .3.6 0 1.3-.7 1.3-1.3 0-.3-.2-.7-.3-1l-4.4-4L15 4.6c.3-.2.5-.5.5-.8 0-.7-.7-1.3-1.3-1.3-.3 0-.7.2-1 .3L9 7.1 4.8 2.8c-.3-.1-.7-.3-1-.3z"/>');if(this._clearEl.appendChild(o),this._loadingEl=this.createIcon("loading",'<path fill="#333" d="M4.4 4.4l.8.8c2.1-2.1 5.5-2.1 7.6 0l.8-.8c-2.5-2.5-6.7-2.5-9.2 0z"/><path opacity=".1" d="M12.8 12.9c-2.1 2.1-5.5 2.1-7.6 0-2.1-2.1-2.1-5.5 0-7.7l-.8-.8c-2.5 2.5-2.5 6.7 0 9.2s6.6 2.5 9.2 0 2.5-6.6 0-9.2l-.8.8c2.2 2.1 2.2 5.6 0 7.7z"/>'),s.appendChild(this._clearEl),s.appendChild(this._loadingEl),t.appendChild(n),t.appendChild(this._inputEl),t.appendChild(s),this.options.enableGeolocation&&this.geolocation.isSupport()){this._geolocateEl=document.createElement("button"),this._geolocateEl.setAttribute("aria-label","Geolocate"),this._geolocateEl.addEventListener("click",this._geolocateUser),this._geolocateEl.className="mapboxgl-ctrl-geocoder--button";var a=this.createIcon("geolocate",'<path d="M12.999 3.677L2.042 8.269c-.962.403-.747 1.823.29 1.912l5.032.431.431 5.033c.089 1.037 1.509 1.252 1.912.29l4.592-10.957c.345-.822-.477-1.644-1.299-1.299z" fill="#4264fb"/>');this._geolocateEl.appendChild(a),s.appendChild(this._geolocateEl),this._showGeolocateButton()}var u=this._typeahead=new i(this._inputEl,[],{filter:!1,minLength:this.options.minLength,limit:this.options.limit});this.setRenderFunction(this.options.render),u.getItemValue=this.options.getItemValue;var d,p=u.list.draw,m=this._footerNode=((d=document.createElement("div")).className="mapboxgl-ctrl-geocoder--powered-by",d.innerHTML='<a href="https://www.mapbox.com/search-service" target="_blank">Powered by Mapbox</a>',d);return u.list.draw=function(){p.call(this),m.addEventListener("mousedown",function(){this.selectingListItem=!0}.bind(this)),m.addEventListener("mouseup",function(){this.selectingListItem=!1}.bind(this)),this.element.appendChild(m)},this.mapMarker=null,this._handleMarker=this._handleMarker.bind(this),this._map&&(this.options.trackProximity&&(this._updateProximity(),this._map.on("moveend",this._updateProximity)),this._mapboxgl=this.options.mapboxgl,!this._mapboxgl&&this.options.marker&&(console.error("No mapboxgl detected in options. Map markers are disabled. Please set options.mapboxgl."),this.options.marker=!1)),t},_geolocateUser:function(){this._hideGeolocateButton(),this._showLoadingIcon(),this.geolocation.getCurrentPosition().then(function(e){this._hideLoadingIcon();const t={geometry:{type:"Point",coordinates:[e.coords.longitude,e.coords.latitude]}};this._handleMarker(t),this._fly(t),this._typeahead.clear(),this._typeahead.selected=!0,this.lastSelected=JSON.stringify(t),this._showClearButton(),this.fresh=!1;const n={limit:1,language:[this.options.language],query:t.geometry.coordinates,types:["address"]};if(this.options.localGeocoderOnly){const e=t.geometry.coordinates[0]+","+t.geometry.coordinates[1];this._setInputValue(e),this._eventEmitter.emit("result",{result:t})}else this.geocoderService.reverseGeocode(n).send().then(function(e){const n=e.body.features[0];if(n){const e=m.transformFeatureToGeolocationText(n,this.options.addressAccuracy);this._setInputValue(e),n.user_coordinates=t.geometry.coordinates,this._eventEmitter.emit("result",{result:n})}else this._eventEmitter.emit("result",{result:{user_coordinates:t.geometry.coordinates}})}.bind(this))}.bind(this)).catch(function(e){1===e.code?this._renderUserDeniedGeolocationError():this._renderLocationError(),this._hideLoadingIcon(),this._showGeolocateButton(),this._hideAttribution()}.bind(this))},createIcon:function(e,t){var n=document.createElementNS("http://www.w3.org/2000/svg","svg");return n.setAttribute("class","mapboxgl-ctrl-geocoder--icon mapboxgl-ctrl-geocoder--icon-"+e),n.setAttribute("viewBox","0 0 18 18"),n.setAttribute("xml:space","preserve"),n.setAttribute("width",18),n.setAttribute("height",18),n.innerHTML=t,n},onRemove:function(){return this.container.parentNode.removeChild(this.container),this.options.trackProximity&&this._map&&this._map.off("moveend",this._updateProximity),this._removeMarker(),this._map=null,this},_setInputValue:function(e){this._inputEl.value=e,setTimeout(function(){this._inputEl.focus(),this._inputEl.scrollLeft=0,this._inputEl.setSelectionRange(0,0)}.bind(this),1)},_onPaste:function(e){var t=(e.clipboardData||window.clipboardData).getData("text");t.length>=this.options.minLength&&this._geocode(t)},_onKeyDown:function(e){var t=27,n=9;if(e.keyCode===t&&this.options.clearAndBlurOnEsc)return this._clear(e),this._inputEl.blur();var i=e.target&&e.target.shadowRoot?e.target.shadowRoot.activeElement:e.target;if(!i||!i.value)return this.fresh=!0,e.keyCode!==n&&this.clear(e),this._showGeolocateButton(),this._hideClearButton();this._hideGeolocateButton(),e.metaKey||-1!==[n,t,37,39,13,38,40].indexOf(e.keyCode)||i.value.length>=this.options.minLength&&this._geocode(i.value)},_showButton:function(){this._typeahead.selected&&this._showClearButton()},_hideButton:function(){this._typeahead.selected&&this._hideClearButton()},_showClearButton:function(){this._clearEl.style.display="block"},_hideClearButton:function(){this._clearEl.style.display="none"},_showGeolocateButton:function(){this._geolocateEl&&this.geolocation.isSupport()&&(this._geolocateEl.style.display="block")},_hideGeolocateButton:function(){this._geolocateEl&&(this._geolocateEl.style.display="none")},_showLoadingIcon:function(){this._loadingEl.style.display="block"},_hideLoadingIcon:function(){this._loadingEl.style.display="none"},_showAttribution:function(){this._footerNode.style.display="block"},_hideAttribution:function(){this._footerNode.style.display="none"},_onBlur:function(e){this.options.clearOnBlur&&this._clearOnBlur(e),this.options.collapsed&&this._collapse()},_onChange:function(){var e=this._typeahead.selected;e&&JSON.stringify(e)!==this.lastSelected&&(this._hideClearButton(),this.options.flyTo&&this._fly(e),this.options.marker&&this._mapboxgl&&this._handleMarker(e),this._inputEl.focus(),this._inputEl.scrollLeft=0,this._inputEl.setSelectionRange(0,0),this.lastSelected=JSON.stringify(e),this._eventEmitter.emit("result",{result:e}),this.eventManager.select(e,this))},_fly:function(e){var t;if(e.properties&&a[e.properties.short_code])t=s({},this.options.flyTo),this._map&&this._map.fitBounds(a[e.properties.short_code].bbox,t);else if(e.bbox){var n=e.bbox;t=s({},this.options.flyTo),this._map&&this._map.fitBounds([[n[0],n[1]],[n[2],n[3]]],t)}else{var i={zoom:this.options.zoom};t=s({},i,this.options.flyTo),e.center?t.center=e.center:e.geometry&&e.geometry.type&&"Point"===e.geometry.type&&e.geometry.coordinates&&(t.center=e.geometry.coordinates),this._map&&this._map.flyTo(t)}},_requestType:function(e,t){return e.localGeocoderOnly?1:e.reverseGeocode&&m.REVERSE_GEOCODE_COORD_RGX.test(t)?2:0},_setupConfig:function(e,t){const n=/[\s,]+/;var i=this,r=["bbox","limit","proximity","countries","types","language","reverseMode","mode","autocomplete","fuzzyMatch","routing","worldview"].reduce((function(e,t){if(void 0===i.options[t]||null===i.options[t])return e;["countries","types","language"].indexOf(t)>-1?e[t]=i.options[t].split(n):e[t]=i.options[t];const r="number"==typeof i.options[t].longitude&&"number"==typeof i.options[t].latitude;if("proximity"===t&&r){const n=i.options[t].longitude,r=i.options[t].latitude;e[t]=[n,r]}return e}),{});switch(e){case 2:var o=t.split(n).map((function(e){return parseFloat(e,10)}));i.options.flipCoordinates||o.reverse(),!r.types||r.types[0],r=s(r,{query:o,limit:1}),["proximity","autocomplete","fuzzyMatch","bbox"].forEach((function(e){e in r&&delete r[e]}));break;case 0:{const e=t.trim();/^(-?\d{1,3}(\.\d{0,256})?)[, ]+(-?\d{1,3}(\.\d{0,256})?)?$/.test(e)&&(t=t.replace(/,/g," ")),r=s(r,{query:t})}}return r},_geocode:function(e){this.inputString=e,this._showLoadingIcon(),this._eventEmitter.emit("loading",{query:e});const t=this._requestType(this.options,e),n=this._setupConfig(t,e);var i;switch(t){case 1:i=Promise.resolve();break;case 0:i=this.geocoderService.forwardGeocode(n).send();break;case 2:i=this.geocoderService.reverseGeocode(n).send()}var r=this.options.localGeocoder&&this.options.localGeocoder(e)||[],s=[],o=null;return i.catch(function(e){o=e}.bind(this)).then(function(t){this._hideLoadingIcon();var i={};return t?"200"==t.statusCode&&((i=t.body).request=t.request,i.headers=t.headers):i={type:"FeatureCollection",features:[]},i.config=n,this.fresh&&(this.eventManager.start(this),this.fresh=!1),i.features=i.features?r.concat(i.features):r,this.options.externalGeocoder?(s=this.options.externalGeocoder(e,i.features)||Promise.resolve([])).then((function(e){return i.features=i.features?e.concat(i.features):e,i}),(function(){return i})):i}.bind(this)).then(function(e){if(o)throw o;this.options.filter&&e.features.length&&(e.features=e.features.filter(this.options.filter)),e.features.length?(this._showClearButton(),this._hideGeolocateButton(),this._showAttribution(),this._eventEmitter.emit("results",e),this._typeahead.update(e.features)):(this._hideClearButton(),this._hideAttribution(),this._typeahead.selected=null,this._renderNoResults(),this._eventEmitter.emit("results",e))}.bind(this)).catch(function(e){this._hideLoadingIcon(),this._hideAttribution(),r.length&&this.options.localGeocoder||s.length&&this.options.externalGeocoder?(this._showClearButton(),this._hideGeolocateButton(),this._typeahead.update(r)):(this._hideClearButton(),this._typeahead.selected=null,this._renderError()),this._eventEmitter.emit("results",{features:r}),this._eventEmitter.emit("error",{error:e})}.bind(this)),i},_clear:function(e){e&&e.preventDefault(),this._inputEl.value="",this._typeahead.selected=null,this._typeahead.clear(),this._onChange(),this._hideClearButton(),this._showGeolocateButton(),this._removeMarker(),this.lastSelected=null,this._eventEmitter.emit("clear"),this.fresh=!0},clear:function(e){this._clear(e),this._inputEl.focus()},_clearOnBlur:function(e){e.relatedTarget&&this._clear(e)},_onQueryResult:function(e){var t=e.body;if(t.features.length){var n=t.features[0];this._typeahead.selected=n,this._inputEl.value=n.place_name,this._onChange()}},_updateProximity:function(){if(this._map&&this.options.trackProximity)if(this._map.getZoom()>9){var e=this._map.getCenter().wrap();this.setProximity({longitude:e.lng,latitude:e.lat},!1)}else this.setProximity(null,!1)},_collapse:function(){this._inputEl.value||this._inputEl===document.activeElement||this.container.classList.add("mapboxgl-ctrl-geocoder--collapsed")},_unCollapse:function(){this.container.classList.remove("mapboxgl-ctrl-geocoder--collapsed")},query:function(e){return this._geocode(e).then(this._onQueryResult),this},_renderError:function(){this._renderMessage("<div class='mapbox-gl-geocoder--error'>There was an error reaching the server</div>")},_renderLocationError:function(){this._renderMessage("<div class='mapbox-gl-geocoder--error'>A location error has occurred</div>")},_renderNoResults:function(){this._renderMessage("<div class='mapbox-gl-geocoder--error mapbox-gl-geocoder--no-results'>No results found</div>")},_renderUserDeniedGeolocationError:function(){this._renderMessage("<div class='mapbox-gl-geocoder--error'>Geolocation permission denied</div>")},_renderMessage:function(e){this._typeahead.update([]),this._typeahead.selected=null,this._typeahead.clear(),this._typeahead.renderError(e)},_getPlaceholderText:function(){if(this.options.placeholder)return this.options.placeholder;if(this.options.language){var e=this.options.language.split(",")[0],t=d.language(e),n=u.placeholder[t];if(n)return n}return"Search"},setInput:function(e){return this._inputEl.value=e,this._typeahead.selected=null,this._typeahead.clear(),e.length>=this.options.minLength&&this._geocode(e),this},setProximity:function(e,t=!0){return this.options.proximity=e,t&&(this.options.trackProximity=!1),this},getProximity:function(){return this.options.proximity},setRenderFunction:function(e){return e&&"function"==typeof e&&(this._typeahead.render=e),this},getRenderFunction:function(){return this._typeahead.render},setLanguage:function(e){var t=navigator.language||navigator.userLanguage||navigator.browserLanguage;return this.options.language=e||this.options.language||t,this},getLanguage:function(){return this.options.language},getZoom:function(){return this.options.zoom},setZoom:function(e){return this.options.zoom=e,this},getFlyTo:function(){return this.options.flyTo},setFlyTo:function(e){return this.options.flyTo=e,this},getPlaceholder:function(){return this.options.placeholder},setPlaceholder:function(e){return this.placeholder=e||this._getPlaceholderText(),this._inputEl.placeholder=this.placeholder,this._inputEl.setAttribute("aria-label",this.placeholder),this},getBbox:function(){return this.options.bbox},setBbox:function(e){return this.options.bbox=e,this},getCountries:function(){return this.options.countries},setCountries:function(e){return this.options.countries=e,this},getTypes:function(){return this.options.types},setTypes:function(e){return this.options.types=e,this},getMinLength:function(){return this.options.minLength},setMinLength:function(e){return this.options.minLength=e,this._typeahead&&(this._typeahead.options.minLength=e),this},getLimit:function(){return this.options.limit},setLimit:function(e){return this.options.limit=e,this._typeahead&&(this._typeahead.options.limit=e),this},getFilter:function(){return this.options.filter},setFilter:function(e){return this.options.filter=e,this},setOrigin:function(e){return this.options.origin=e,this.geocoderService=c(l({accessToken:this.options.accessToken,origin:this.options.origin})),this},getOrigin:function(){return this.options.origin},setAccessToken:function(e){return this.options.accessToken=e,this.geocoderService=c(l({accessToken:this.options.accessToken,origin:this.options.origin})),this},setAutocomplete:function(e){return this.options.autocomplete=e,this},getAutocomplete:function(){return this.options.autocomplete},setFuzzyMatch:function(e){return this.options.fuzzyMatch=e,this},getFuzzyMatch:function(){return this.options.fuzzyMatch},setRouting:function(e){return this.options.routing=e,this},getRouting:function(){return this.options.routing},setWorldview:function(e){return this.options.worldview=e,this},getWorldview:function(){return this.options.worldview},_handleMarker:function(e){if(this._map){this._removeMarker();var t=s({},{color:"#4668F2"},this.options.marker);return this.mapMarker=new this._mapboxgl.Marker(t),e.center?this.mapMarker.setLngLat(e.center).addTo(this._map):e.geometry&&e.geometry.type&&"Point"===e.geometry.type&&e.geometry.coordinates&&this.mapMarker.setLngLat(e.geometry.coordinates).addTo(this._map),this}},_removeMarker:function(){this.mapMarker&&(this.mapMarker.remove(),this.mapMarker=null)},on:function(e,t){return this._eventEmitter.on(e,t),this},off:function(e,t){return this._eventEmitter.removeListener(e,t),this.eventManager.remove(),this}},e.exports=f},227:e=>{"use strict";e.exports={placeholder:{de:"Suche",it:"Ricerca",en:"Search",nl:"Zoeken",fr:"Chercher",ca:"Cerca",he:"לחפש",ja:"サーチ",lv:"Meklēt",pt:"Procurar",sr:"Претрага",zh:"搜索",cs:"Vyhledávání",hu:"Keresés",ka:"ძიება",nb:"Søke",sk:"Vyhľadávanie",th:"ค้นหา",fi:"Hae",is:"Leita",ko:"수색",pl:"Szukaj",sl:"Iskanje",fa:"جستجو",ru:"Поиск"}}},537:e=>{function t(e){const t=e.address||"",n=e.text||"",i=e.place_name||"",r={address:i.split(",")[0],houseNumber:t,street:n,placeName:i};return e.context.forEach((function(e){const t=e.id.split(".")[0];r[t]=e.text})),r}e.exports={transformFeatureToGeolocationText:function(e,n){const i=t(e),r=["address","street","place","country"];if("function"==typeof n)return n(i);const s=r.indexOf(n);return(-1===s?r:r.slice(s)).reduce((function(e,t){return i[t]?(""!==e&&(e+=", "),e+i[t]):e}),"")},getAddressInfo:t,REVERSE_GEOCODE_COORD_RGX:/^[ ]*(-?\d{1,3}(\.\d{0,256})?)[, ]+(-?\d{1,3}(\.\d{0,256})?)[ ]*$/}},10:(e,t,n)=>{"use strict";var i=n(543);e.exports=i},543:(e,t,n)=>{"use strict";var i=n(16),r=n(503);function s(e){r.call(this,e)}s.prototype=Object.create(r.prototype),s.prototype.constructor=s,s.prototype.sendRequest=i.browserSend,s.prototype.abortRequest=i.browserAbort,e.exports=function(e){return new s(e)}},16:(e,t,n)=>{"use strict";var i=n(293),r=n(404),s=n(835),o=n(614),a={};function l(e){var t=e.total,n=e.loaded;return{total:t,transferred:n,percent:100*n/t}}function c(e,t){return new Promise((function(n,i){t.onprogress=function(t){e.emitter.emit(s.EVENT_PROGRESS_DOWNLOAD,l(t))};var o=e.file;o&&(t.upload.onprogress=function(t){e.emitter.emit(s.EVENT_PROGRESS_UPLOAD,l(t))}),t.onerror=function(e){i(e)},t.onabort=function(){var t=new r({request:e,type:s.ERROR_REQUEST_ABORTED});i(t)},t.onload=function(){if(delete a[e.id],t.status<200||t.status>=400){var s=new r({request:e,body:t.response,statusCode:t.status});i(s)}else n(t)};var c=e.body;"string"==typeof c?t.send(c):c?t.send(JSON.stringify(c)):o?t.send(o):t.send(),a[e.id]=t})).then((function(t){return function(e,t){return new i(e,{body:t.response,headers:o(t.getAllResponseHeaders()),statusCode:t.status})}(e,t)}))}function h(e,t){var n=e.url(t),i=new window.XMLHttpRequest;return i.open(e.method,n),Object.keys(e.headers).forEach((function(t){i.setRequestHeader(t,e.headers[t])})),i}e.exports={browserAbort:function(e){var t=a[e.id];t&&(t.abort(),delete a[e.id])},sendRequestXhr:c,browserSend:function(e){return Promise.resolve().then((function(){var t=h(e,e.client.accessToken);return c(e,t)}))},createRequestXhr:h}},503:(e,t,n)=>{"use strict";var i=n(713),r=n(225),s=n(835);function o(e){if(!e||!e.accessToken)throw new Error("Cannot create a client without an access token");i(e.accessToken),this.accessToken=e.accessToken,this.origin=e.origin||s.API_ORIGIN}o.prototype.createRequest=function(e){return new r(this,e)},e.exports=o},404:(e,t,n)=>{"use strict";var i=n(835);e.exports=function(e){var t,n=e.type||i.ERROR_HTTP;if(e.body)try{t=JSON.parse(e.body)}catch(n){t=e.body}else t=null;var r=e.message||null;r||("string"==typeof t?r=t:t&&"string"==typeof t.message?r=t.message:n===i.ERROR_REQUEST_ABORTED&&(r="Request aborted")),this.message=r,this.type=n,this.statusCode=e.statusCode||null,this.request=e.request,this.body=t}},225:(e,t,n)=>{"use strict";var i=n(713),r=n(529),s=n(729),o=n(959),a=n(835),l=1;function c(e,t){if(!e)throw new Error("MapiRequest requires a client");if(!t||!t.path||!t.method)throw new Error("MapiRequest requires an options object with path and method properties");var n={};t.body&&(n["content-type"]="application/json");var i=r(n,t.headers),o=Object.keys(i).reduce((function(e,t){return e[t.toLowerCase()]=i[t],e}),{});this.id=l++,this._options=t,this.emitter=new s,this.client=e,this.response=null,this.error=null,this.sent=!1,this.aborted=!1,this.path=t.path,this.method=t.method,this.origin=t.origin||e.origin,this.query=t.query||{},this.params=t.params||{},this.body=t.body||null,this.file=t.file||null,this.encoding=t.encoding||"utf8",this.sendFileAs=t.sendFileAs||null,this.headers=o}c.prototype.url=function(e){var t=o.prependOrigin(this.path,this.origin);t=o.appendQueryObject(t,this.query);var n=this.params,s=null==e?this.client.accessToken:e;if(s){t=o.appendQueryParam(t,"access_token",s);var a=i(s).user;n=r({ownerId:a},n)}return t=o.interpolateRouteParams(t,n)},c.prototype.send=function(){var e=this;if(e.sent)throw new Error("This request has already been sent. Check the response and error properties. Create a new request with clone().");return e.sent=!0,e.client.sendRequest(e).then((function(t){return e.response=t,e.emitter.emit(a.EVENT_RESPONSE,t),t}),(function(t){throw e.error=t,e.emitter.emit(a.EVENT_ERROR,t),t}))},c.prototype.abort=function(){this._nextPageRequest&&(this._nextPageRequest.abort(),delete this._nextPageRequest),this.response||this.error||this.aborted||(this.aborted=!0,this.client.abortRequest(this))},c.prototype.eachPage=function(e){var t=this;function n(n){e(null,n,(function(){delete t._nextPageRequest;var e=n.nextPage();e&&(t._nextPageRequest=e,r(e))}))}function i(t){e(t,null,(function(){}))}function r(e){e.send().then(n,i)}r(this)},c.prototype.clone=function(){return this._extend()},c.prototype._extend=function(e){var t=r(this._options,e);return new c(this.client,t)},e.exports=c},293:(e,t,n)=>{"use strict";var i=n(626);function r(e,t){this.request=e,this.headers=t.headers,this.rawBody=t.body,this.statusCode=t.statusCode;try{this.body=JSON.parse(t.body||"{}")}catch(e){this.body=t.body}this.links=i(this.headers.link)}r.prototype.hasNextPage=function(){return!!this.links.next},r.prototype.nextPage=function(){return this.hasNextPage()?this.request._extend({path:this.links.next.url}):null},e.exports=r},835:e=>{"use strict";e.exports={API_ORIGIN:"https://api.mapbox.com",EVENT_PROGRESS_DOWNLOAD:"downloadProgress",EVENT_PROGRESS_UPLOAD:"uploadProgress",EVENT_ERROR:"error",EVENT_RESPONSE:"response",ERROR_HTTP:"HttpError",ERROR_REQUEST_ABORTED:"RequestAbortedError"}},614:e=>{"use strict";e.exports=function(e){var t={};return e?(e.trim().split(/[\r|\n]+/).forEach((function(e){var n=function(e){var t=e.indexOf(":");return{name:e.substring(0,t).trim().toLowerCase(),value:e.substring(t+1).trim()}}(e);t[n.name]=n.value})),t):t}},626:e=>{"use strict";e.exports=function(e){return e?e.split(/,\s*</).reduce((function(e,t){var n=function(e){var t=e.match(/<?([^>]*)>(.*)/);if(!t)return null;var n=t[1],i=t[2].split(";"),r=null,s=i.reduce((function(e,t){var n=function(e){var t=e.match(/\s*(.+)\s*=\s*"?([^"]+)"?/);return t?{key:t[1],value:t[2]}:null}(t);return n?"rel"===n.key?(r||(r=n.value),e):(e[n.key]=n.value,e):e}),{});return r?{url:n,rel:r,params:s}:null}(t);return n?(n.rel.split(/\s+/).forEach((function(t){e[t]||(e[t]={url:n.url,params:n.params})})),e):e}),{}):{}}},959:e=>{"use strict";function t(e){return Array.isArray(e)?e.map(encodeURIComponent).join(","):encodeURIComponent(String(e))}function n(e,n,i){if(!1===i||null===i)return e;var r=/\?/.test(e)?"&":"?",s=encodeURIComponent(n);return void 0!==i&&""!==i&&!0!==i&&(s+="="+t(i)),""+e+r+s}e.exports={appendQueryObject:function(e,t){if(!t)return e;var i=e;return Object.keys(t).forEach((function(e){var r=t[e];void 0!==r&&(Array.isArray(r)&&(r=r.filter((function(e){return null!=e})).join(",")),i=n(i,e,r))})),i},appendQueryParam:n,prependOrigin:function(e,t){if(!t)return e;if("http"===e.slice(0,4))return e;var n="/"===e[0]?"":"/";return""+t.replace(/\/$/,"")+n+e},interpolateRouteParams:function(e,n){return n?e.replace(/\/:([a-zA-Z0-9]+)/g,(function(e,i){var r=n[i];if(void 0===r)throw new Error("Unspecified route parameter "+i);return"/"+t(r)})):e}}},81:(e,t,n)=>{"use strict";var i=n(529),r=n(222),s=n(497),o=n(886),a=n(583),l={},c=["country","region","postcode","district","place","locality","neighborhood","address","poi","poi.landmark"];l.forwardGeocode=function(e){r.assertShape({query:r.required(r.string),mode:r.oneOf("mapbox.places","mapbox.places-permanent"),countries:r.arrayOf(r.string),proximity:r.oneOf(r.coordinates,"ip"),types:r.arrayOf(r.oneOf(c)),autocomplete:r.boolean,bbox:r.arrayOf(r.number),limit:r.number,language:r.arrayOf(r.string),routing:r.boolean,fuzzyMatch:r.boolean,worldview:r.string})(e),e.mode=e.mode||"mapbox.places";var t=o(i({country:e.countries},s(e,["proximity","types","autocomplete","bbox","limit","language","routing","fuzzyMatch","worldview"])));return this.client.createRequest({method:"GET",path:"/geocoding/v5/:mode/:query.json",params:s(e,["mode","query"]),query:t})},l.reverseGeocode=function(e){r.assertShape({query:r.required(r.coordinates),mode:r.oneOf("mapbox.places","mapbox.places-permanent"),countries:r.arrayOf(r.string),types:r.arrayOf(r.oneOf(c)),bbox:r.arrayOf(r.number),limit:r.number,language:r.arrayOf(r.string),reverseMode:r.oneOf("distance","score"),routing:r.boolean,worldview:r.string})(e),e.mode=e.mode||"mapbox.places";var t=o(i({country:e.countries},s(e,["country","types","bbox","limit","language","reverseMode","routing","worldview"])));return this.client.createRequest({method:"GET",path:"/geocoding/v5/:mode/:query.json",params:s(e,["mode","query"]),query:t})},e.exports=a(l)},583:(e,t,n)=>{"use strict";var i=n(503),r=n(543);e.exports=function(e){return function(t){var n;n=i.prototype.isPrototypeOf(t)?t:r(t);var s=Object.create(e);return s.client=n,s}}},436:e=>{"use strict";e.exports=function(e,t){return Object.keys(e).reduce((function(n,i){return n[i]=t(i,e[i]),n}),{})}},497:e=>{"use strict";e.exports=function(e,t){var n=function(e,n){return-1!==t.indexOf(e)&&void 0!==n};return"function"==typeof t&&(n=t),Object.keys(e).filter((function(t){return n(t,e[t])})).reduce((function(t,n){return t[n]=e[n],t}),{})}},886:(e,t,n)=>{"use strict";var i=n(436);e.exports=function(e){return i(e,(function(e,t){return"boolean"==typeof t?JSON.stringify(t):t}))}},222:(e,t,n)=>{"use strict";var i=n(529),r=n(532);e.exports=i(r,{file:function(e){if("undefined"!=typeof window){if(e instanceof n.g.Blob||e instanceof n.g.ArrayBuffer)return;return"Blob or ArrayBuffer"}if("string"!=typeof e&&void 0===e.pipe)return"Filename or Readable stream"},date:function(e){var t="date";if("boolean"==typeof e)return t;try{var n=new Date(e);if(n.getTime&&isNaN(n.getTime()))return t}catch(e){return t}},coordinates:function(e){return r.tuple(r.number,r.number)(e)},assertShape:function(e,t){return r.assert(r.strictShape(e),t)}})},713:(e,t,n)=>{"use strict";var i=n(501),r={};function s(e,t){return Object.prototype.hasOwnProperty.call(e,t)}e.exports=function(e){if(r[e])return r[e];var t=e.split("."),n=t[0],o=t[1];if(!o)throw new Error("Invalid token");var a=function(e){try{return JSON.parse(i.decode(e))}catch(e){throw new Error("Invalid token")}}(o),l={usage:n,user:a.u};return s(a,"a")&&(l.authorization=a.a),s(a,"exp")&&(l.expires=1e3*a.exp),s(a,"iat")&&(l.created=1e3*a.iat),s(a,"scopes")&&(l.scopes=a.scopes),s(a,"client")&&(l.client=a.client),s(a,"ll")&&(l.lastLogin=a.ll),s(a,"iu")&&(l.impersonator=a.iu),r[e]=l,l}},245:(e,t,n)=>{"use strict";n.r(t),n.d(t,{Connection:()=>f,ConnectionMonitor:()=>l,Consumer:()=>y,INTERNAL:()=>c,Subscription:()=>g,SubscriptionGuarantor:()=>v,Subscriptions:()=>b,adapters:()=>i,createConsumer:()=>_,createWebSocketURL:()=>w,getConfig:()=>E,logger:()=>r});const i={logger:self.console,WebSocket:self.WebSocket},r={log(...e){this.enabled&&(e.push(Date.now()),i.logger.log("[ActionCable]",...e))}},s=()=>(new Date).getTime(),o=e=>(s()-e)/1e3;class a{constructor(e){this.visibilityDidChange=this.visibilityDidChange.bind(this),this.connection=e,this.reconnectAttempts=0}start(){this.isRunning()||(this.startedAt=s(),delete this.stoppedAt,this.startPolling(),addEventListener("visibilitychange",this.visibilityDidChange),r.log(`ConnectionMonitor started. stale threshold = ${this.constructor.staleThreshold} s`))}stop(){this.isRunning()&&(this.stoppedAt=s(),this.stopPolling(),removeEventListener("visibilitychange",this.visibilityDidChange),r.log("ConnectionMonitor stopped"))}isRunning(){return this.startedAt&&!this.stoppedAt}recordPing(){this.pingedAt=s()}recordConnect(){this.reconnectAttempts=0,this.recordPing(),delete this.disconnectedAt,r.log("ConnectionMonitor recorded connect")}recordDisconnect(){this.disconnectedAt=s(),r.log("ConnectionMonitor recorded disconnect")}startPolling(){this.stopPolling(),this.poll()}stopPolling(){clearTimeout(this.pollTimeout)}poll(){this.pollTimeout=setTimeout((()=>{this.reconnectIfStale(),this.poll()}),this.getPollInterval())}getPollInterval(){const{staleThreshold:e,reconnectionBackoffRate:t}=this.constructor;return 1e3*e*Math.pow(1+t,Math.min(this.reconnectAttempts,10))*(1+(0===this.reconnectAttempts?1:t)*Math.random())}reconnectIfStale(){this.connectionIsStale()&&(r.log(`ConnectionMonitor detected stale connection. reconnectAttempts = ${this.reconnectAttempts}, time stale = ${o(this.refreshedAt)} s, stale threshold = ${this.constructor.staleThreshold} s`),this.reconnectAttempts++,this.disconnectedRecently()?r.log(`ConnectionMonitor skipping reopening recent disconnect. time disconnected = ${o(this.disconnectedAt)} s`):(r.log("ConnectionMonitor reopening"),this.connection.reopen()))}get refreshedAt(){return this.pingedAt?this.pingedAt:this.startedAt}connectionIsStale(){return o(this.refreshedAt)>this.constructor.staleThreshold}disconnectedRecently(){return this.disconnectedAt&&o(this.disconnectedAt)<this.constructor.staleThreshold}visibilityDidChange(){"visible"===document.visibilityState&&setTimeout((()=>{!this.connectionIsStale()&&this.connection.isOpen()||(r.log(`ConnectionMonitor reopening stale connection on visibilitychange. visibilityState = ${document.visibilityState}`),this.connection.reopen())}),200)}}a.staleThreshold=6,a.reconnectionBackoffRate=.15;const l=a,c={message_types:{welcome:"welcome",disconnect:"disconnect",ping:"ping",confirmation:"confirm_subscription",rejection:"reject_subscription"},disconnect_reasons:{unauthorized:"unauthorized",invalid_request:"invalid_request",server_restart:"server_restart"},default_mount_path:"/cable",protocols:["actioncable-v1-json","actioncable-unsupported"]},{message_types:h,protocols:u}=c,d=u.slice(0,u.length-1),p=[].indexOf;class m{constructor(e){this.open=this.open.bind(this),this.consumer=e,this.subscriptions=this.consumer.subscriptions,this.monitor=new l(this),this.disconnected=!0}send(e){return!!this.isOpen()&&(this.webSocket.send(JSON.stringify(e)),!0)}open(){return this.isActive()?(r.log(`Attempted to open WebSocket, but existing socket is ${this.getState()}`),!1):(r.log(`Opening WebSocket, current state is ${this.getState()}, subprotocols: ${u}`),this.webSocket&&this.uninstallEventHandlers(),this.webSocket=new i.WebSocket(this.consumer.url,u),this.installEventHandlers(),this.monitor.start(),!0)}close({allowReconnect:e}={allowReconnect:!0}){if(e||this.monitor.stop(),this.isOpen())return this.webSocket.close()}reopen(){if(r.log(`Reopening WebSocket, current state is ${this.getState()}`),!this.isActive())return this.open();try{return this.close()}catch(e){r.log("Failed to reopen WebSocket",e)}finally{r.log(`Reopening WebSocket in ${this.constructor.reopenDelay}ms`),setTimeout(this.open,this.constructor.reopenDelay)}}getProtocol(){if(this.webSocket)return this.webSocket.protocol}isOpen(){return this.isState("open")}isActive(){return this.isState("open","connecting")}isProtocolSupported(){return p.call(d,this.getProtocol())>=0}isState(...e){return p.call(e,this.getState())>=0}getState(){if(this.webSocket)for(let e in i.WebSocket)if(i.WebSocket[e]===this.webSocket.readyState)return e.toLowerCase();return null}installEventHandlers(){for(let e in this.events){const t=this.events[e].bind(this);this.webSocket[`on${e}`]=t}}uninstallEventHandlers(){for(let e in this.events)this.webSocket[`on${e}`]=function(){}}}m.reopenDelay=500,m.prototype.events={message(e){if(!this.isProtocolSupported())return;const{identifier:t,message:n,reason:i,reconnect:s,type:o}=JSON.parse(e.data);switch(o){case h.welcome:return this.monitor.recordConnect(),this.subscriptions.reload();case h.disconnect:return r.log(`Disconnecting. Reason: ${i}`),this.close({allowReconnect:s});case h.ping:return this.monitor.recordPing();case h.confirmation:return this.subscriptions.confirmSubscription(t),this.subscriptions.notify(t,"connected");case h.rejection:return this.subscriptions.reject(t);default:return this.subscriptions.notify(t,"received",n)}},open(){if(r.log(`WebSocket onopen event, using '${this.getProtocol()}' subprotocol`),this.disconnected=!1,!this.isProtocolSupported())return r.log("Protocol is unsupported. Stopping monitor and disconnecting."),this.close({allowReconnect:!1})},close(e){if(r.log("WebSocket onclose event"),!this.disconnected)return this.disconnected=!0,this.monitor.recordDisconnect(),this.subscriptions.notifyAll("disconnected",{willAttemptReconnect:this.monitor.isRunning()})},error(){r.log("WebSocket onerror event")}};const f=m;class g{constructor(e,t={},n){this.consumer=e,this.identifier=JSON.stringify(t),function(e,t){if(null!=t)for(let n in t){const i=t[n];e[n]=i}}(this,n)}perform(e,t={}){return t.action=e,this.send(t)}send(e){return this.consumer.send({command:"message",identifier:this.identifier,data:JSON.stringify(e)})}unsubscribe(){return this.consumer.subscriptions.remove(this)}}const v=class{constructor(e){this.subscriptions=e,this.pendingSubscriptions=[]}guarantee(e){-1==this.pendingSubscriptions.indexOf(e)?(r.log(`SubscriptionGuarantor guaranteeing ${e.identifier}`),this.pendingSubscriptions.push(e)):r.log(`SubscriptionGuarantor already guaranteeing ${e.identifier}`),this.startGuaranteeing()}forget(e){r.log(`SubscriptionGuarantor forgetting ${e.identifier}`),this.pendingSubscriptions=this.pendingSubscriptions.filter((t=>t!==e))}startGuaranteeing(){this.stopGuaranteeing(),this.retrySubscribing()}stopGuaranteeing(){clearTimeout(this.retryTimeout)}retrySubscribing(){this.retryTimeout=setTimeout((()=>{this.subscriptions&&"function"==typeof this.subscriptions.subscribe&&this.pendingSubscriptions.map((e=>{r.log(`SubscriptionGuarantor resubscribing ${e.identifier}`),this.subscriptions.subscribe(e)}))}),500)}};class b{constructor(e){this.consumer=e,this.guarantor=new v(this),this.subscriptions=[]}create(e,t){const n="object"==typeof e?e:{channel:e},i=new g(this.consumer,n,t);return this.add(i)}add(e){return this.subscriptions.push(e),this.consumer.ensureActiveConnection(),this.notify(e,"initialized"),this.subscribe(e),e}remove(e){return this.forget(e),this.findAll(e.identifier).length||this.sendCommand(e,"unsubscribe"),e}reject(e){return this.findAll(e).map((e=>(this.forget(e),this.notify(e,"rejected"),e)))}forget(e){return this.guarantor.forget(e),this.subscriptions=this.subscriptions.filter((t=>t!==e)),e}findAll(e){return this.subscriptions.filter((t=>t.identifier===e))}reload(){return this.subscriptions.map((e=>this.subscribe(e)))}notifyAll(e,...t){return this.subscriptions.map((n=>this.notify(n,e,...t)))}notify(e,t,...n){let i;return i="string"==typeof e?this.findAll(e):[e],i.map((e=>"function"==typeof e[t]?e[t](...n):void 0))}subscribe(e){this.sendCommand(e,"subscribe")&&this.guarantor.guarantee(e)}confirmSubscription(e){r.log(`Subscription confirmed ${e}`),this.findAll(e).map((e=>this.guarantor.forget(e)))}sendCommand(e,t){const{identifier:n}=e;return this.consumer.send({command:t,identifier:n})}}class y{constructor(e){this._url=e,this.subscriptions=new b(this),this.connection=new f(this)}get url(){return w(this._url)}send(e){return this.connection.send(e)}connect(){return this.connection.open()}disconnect(){return this.connection.close({allowReconnect:!1})}ensureActiveConnection(){if(!this.connection.isActive())return this.connection.open()}}function w(e){if("function"==typeof e&&(e=e()),e&&!/^wss?:/i.test(e)){const t=document.createElement("a");return t.href=e,t.href=t.href,t.protocol=t.protocol.replace("http","ws"),t.href}return e}function _(e=E("url")||c.default_mount_path){return new y(e)}function E(e){const t=document.head.querySelector(`meta[name='action-cable-${e}']`);if(t)return t.getAttribute("content")}},501:function(e,t,n){var i;e=n.nmd(e),function(r){var s=(e&&e.exports,"object"==typeof n.g&&n.g);s.global!==s&&s.window;var o=function(e){this.message=e};(o.prototype=new Error).name="InvalidCharacterError";var a=function(e){throw new o(e)},l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",c=/[\t\n\f\r ]/g,h={encode:function(e){e=String(e),/[^\0-\xFF]/.test(e)&&a("The string to be encoded contains characters outside of the Latin1 range.");for(var t,n,i,r,s=e.length%3,o="",c=-1,h=e.length-s;++c<h;)t=e.charCodeAt(c)<<16,n=e.charCodeAt(++c)<<8,i=e.charCodeAt(++c),o+=l.charAt((r=t+n+i)>>18&63)+l.charAt(r>>12&63)+l.charAt(r>>6&63)+l.charAt(63&r);return 2==s?(t=e.charCodeAt(c)<<8,n=e.charCodeAt(++c),o+=l.charAt((r=t+n)>>10)+l.charAt(r>>4&63)+l.charAt(r<<2&63)+"="):1==s&&(r=e.charCodeAt(c),o+=l.charAt(r>>2)+l.charAt(r<<4&63)+"=="),o},decode:function(e){var t=(e=String(e).replace(c,"")).length;t%4==0&&(t=(e=e.replace(/==?$/,"")).length),(t%4==1||/[^+a-zA-Z0-9/]/.test(e))&&a("Invalid character: the string to be decoded is not correctly encoded.");for(var n,i,r=0,s="",o=-1;++o<t;)i=l.indexOf(e.charAt(o)),n=r%4?64*n+i:i,r++%4&&(s+=String.fromCharCode(255&n>>(-2*r&6)));return s},version:"0.1.0"};void 0===(i=function(){return h}.call(t,n,t,e))||(e.exports=i)}()},729:e=>{"use strict";var t=Object.prototype.hasOwnProperty,n="~";function i(){}function r(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function s(e,t,i,s,o){if("function"!=typeof i)throw new TypeError("The listener must be a function");var a=new r(i,s||e,o),l=n?n+t:t;return e._events[l]?e._events[l].fn?e._events[l]=[e._events[l],a]:e._events[l].push(a):(e._events[l]=a,e._eventsCount++),e}function o(e,t){0==--e._eventsCount?e._events=new i:delete e._events[t]}function a(){this._events=new i,this._eventsCount=0}Object.create&&(i.prototype=Object.create(null),(new i).__proto__||(n=!1)),a.prototype.eventNames=function(){var e,i,r=[];if(0===this._eventsCount)return r;for(i in e=this._events)t.call(e,i)&&r.push(n?i.slice(1):i);return Object.getOwnPropertySymbols?r.concat(Object.getOwnPropertySymbols(e)):r},a.prototype.listeners=function(e){var t=n?n+e:e,i=this._events[t];if(!i)return[];if(i.fn)return[i.fn];for(var r=0,s=i.length,o=new Array(s);r<s;r++)o[r]=i[r].fn;return o},a.prototype.listenerCount=function(e){var t=n?n+e:e,i=this._events[t];return i?i.fn?1:i.length:0},a.prototype.emit=function(e,t,i,r,s,o){var a=n?n+e:e;if(!this._events[a])return!1;var l,c,h=this._events[a],u=arguments.length;if(h.fn){switch(h.once&&this.removeListener(e,h.fn,void 0,!0),u){case 1:return h.fn.call(h.context),!0;case 2:return h.fn.call(h.context,t),!0;case 3:return h.fn.call(h.context,t,i),!0;case 4:return h.fn.call(h.context,t,i,r),!0;case 5:return h.fn.call(h.context,t,i,r,s),!0;case 6:return h.fn.call(h.context,t,i,r,s,o),!0}for(c=1,l=new Array(u-1);c<u;c++)l[c-1]=arguments[c];h.fn.apply(h.context,l)}else{var d,p=h.length;for(c=0;c<p;c++)switch(h[c].once&&this.removeListener(e,h[c].fn,void 0,!0),u){case 1:h[c].fn.call(h[c].context);break;case 2:h[c].fn.call(h[c].context,t);break;case 3:h[c].fn.call(h[c].context,t,i);break;case 4:h[c].fn.call(h[c].context,t,i,r);break;default:if(!l)for(d=1,l=new Array(u-1);d<u;d++)l[d-1]=arguments[d];h[c].fn.apply(h[c].context,l)}}return!0},a.prototype.on=function(e,t,n){return s(this,e,t,n,!1)},a.prototype.once=function(e,t,n){return s(this,e,t,n,!0)},a.prototype.removeListener=function(e,t,i,r){var s=n?n+e:e;if(!this._events[s])return this;if(!t)return o(this,s),this;var a=this._events[s];if(a.fn)a.fn!==t||r&&!a.once||i&&a.context!==i||o(this,s);else{for(var l=0,c=[],h=a.length;l<h;l++)(a[l].fn!==t||r&&!a[l].once||i&&a[l].context!==i)&&c.push(a[l]);c.length?this._events[s]=1===c.length?c[0]:c:o(this,s)}return this},a.prototype.removeAllListeners=function(e){var t;return e?(t=n?n+e:e,this._events[t]&&o(this,t)):(this._events=new i,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=n,a.EventEmitter=a,e.exports=a},187:e=>{"use strict";var t,n="object"==typeof Reflect?Reflect:null,i=n&&"function"==typeof n.apply?n.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)};t=n&&"function"==typeof n.ownKeys?n.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var r=Number.isNaN||function(e){return e!=e};function s(){s.init.call(this)}e.exports=s,e.exports.once=function(e,t){return new Promise((function(n,i){function r(n){e.removeListener(t,s),i(n)}function s(){"function"==typeof e.removeListener&&e.removeListener("error",r),n([].slice.call(arguments))}f(e,t,s,{once:!0}),"error"!==t&&function(e,t,n){"function"==typeof e.on&&f(e,"error",t,{once:!0})}(e,r)}))},s.EventEmitter=s,s.prototype._events=void 0,s.prototype._eventsCount=0,s.prototype._maxListeners=void 0;var o=10;function a(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function l(e){return void 0===e._maxListeners?s.defaultMaxListeners:e._maxListeners}function c(e,t,n,i){var r,s,o,c;if(a(n),void 0===(s=e._events)?(s=e._events=Object.create(null),e._eventsCount=0):(void 0!==s.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),s=e._events),o=s[t]),void 0===o)o=s[t]=n,++e._eventsCount;else if("function"==typeof o?o=s[t]=i?[n,o]:[o,n]:i?o.unshift(n):o.push(n),(r=l(e))>0&&o.length>r&&!o.warned){o.warned=!0;var h=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");h.name="MaxListenersExceededWarning",h.emitter=e,h.type=t,h.count=o.length,c=h,console&&console.warn&&console.warn(c)}return e}function h(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function u(e,t,n){var i={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},r=h.bind(i);return r.listener=n,i.wrapFn=r,r}function d(e,t,n){var i=e._events;if(void 0===i)return[];var r=i[t];return void 0===r?[]:"function"==typeof r?n?[r.listener||r]:[r]:n?function(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}(r):m(r,r.length)}function p(e){var t=this._events;if(void 0!==t){var n=t[e];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function m(e,t){for(var n=new Array(t),i=0;i<t;++i)n[i]=e[i];return n}function f(e,t,n,i){if("function"==typeof e.on)i.once?e.once(t,n):e.on(t,n);else{if("function"!=typeof e.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e);e.addEventListener(t,(function r(s){i.once&&e.removeEventListener(t,r),n(s)}))}}Object.defineProperty(s,"defaultMaxListeners",{enumerable:!0,get:function(){return o},set:function(e){if("number"!=typeof e||e<0||r(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");o=e}}),s.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},s.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||r(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},s.prototype.getMaxListeners=function(){return l(this)},s.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);var r="error"===e,s=this._events;if(void 0!==s)r=r&&void 0===s.error;else if(!r)return!1;if(r){var o;if(t.length>0&&(o=t[0]),o instanceof Error)throw o;var a=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw a.context=o,a}var l=s[e];if(void 0===l)return!1;if("function"==typeof l)i(l,this,t);else{var c=l.length,h=m(l,c);for(n=0;n<c;++n)i(h[n],this,t)}return!0},s.prototype.addListener=function(e,t){return c(this,e,t,!1)},s.prototype.on=s.prototype.addListener,s.prototype.prependListener=function(e,t){return c(this,e,t,!0)},s.prototype.once=function(e,t){return a(t),this.on(e,u(this,e,t)),this},s.prototype.prependOnceListener=function(e,t){return a(t),this.prependListener(e,u(this,e,t)),this},s.prototype.removeListener=function(e,t){var n,i,r,s,o;if(a(t),void 0===(i=this._events))return this;if(void 0===(n=i[e]))return this;if(n===t||n.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete i[e],i.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!=typeof n){for(r=-1,s=n.length-1;s>=0;s--)if(n[s]===t||n[s].listener===t){o=n[s].listener,r=s;break}if(r<0)return this;0===r?n.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(n,r),1===n.length&&(i[e]=n[0]),void 0!==i.removeListener&&this.emit("removeListener",e,o||t)}return this},s.prototype.off=s.prototype.removeListener,s.prototype.removeAllListeners=function(e){var t,n,i;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[e]),this;if(0===arguments.length){var r,s=Object.keys(n);for(i=0;i<s.length;++i)"removeListener"!==(r=s[i])&&this.removeAllListeners(r);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=n[e]))this.removeListener(e,t);else if(void 0!==t)for(i=t.length-1;i>=0;i--)this.removeListener(e,t[i]);return this},s.prototype.listeners=function(e){return d(this,e,!0)},s.prototype.rawListeners=function(e){return d(this,e,!1)},s.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):p.call(e,t)},s.prototype.listenerCount=p,s.prototype.eventNames=function(){return this._eventsCount>0?t(this._events):[]}},261:e=>{var t;t={},e.exports=t,t.simpleFilter=function(e,n){return n.filter((function(n){return t.test(e,n)}))},t.test=function(e,n){return null!==t.match(e,n)},t.match=function(e,t,n){n=n||{};var i,r=0,s=[],o=t.length,a=0,l=0,c=n.pre||"",h=n.post||"",u=n.caseSensitive&&t||t.toLowerCase();e=n.caseSensitive&&e||e.toLowerCase();for(var d=0;d<o;d++)i=t[d],u[d]===e[r]?(i=c+i+h,r+=1,l+=1+l):l=0,a+=l,s[s.length]=i;return r===e.length?(a=u===e?1/0:a,{rendered:s.join(""),score:a}):null},t.filter=function(e,n,i){return n&&0!==n.length?"string"!=typeof e?n:(i=i||{},n.reduce((function(n,r,s,o){var a=r;i.extract&&(a=i.extract(r));var l=t.match(e,a,i);return null!=l&&(n[n.length]={string:l.rendered,score:l.score,index:s,original:r}),n}),[]).sort((function(e,t){return t.score-e.score||e.index-t.index}))):[]}},310:e=>{"use strict";var t=Object.prototype.toString;e.exports=function(e){var n;return"[object Object]"===t.call(e)&&(null===(n=Object.getPrototypeOf(e))||n===Object.getPrototypeOf({}))}},296:(e,t,n)=>{var i=NaN,r="[object Symbol]",s=/^\s+|\s+$/g,o=/^[-+]0x[0-9a-f]+$/i,a=/^0b[01]+$/i,l=/^0o[0-7]+$/i,c=parseInt,h="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g,u="object"==typeof self&&self&&self.Object===Object&&self,d=h||u||Function("return this")(),p=Object.prototype.toString,m=Math.max,f=Math.min,g=function(){return d.Date.now()};function v(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function b(e){if("number"==typeof e)return e;if(function(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&p.call(e)==r}(e))return i;if(v(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=v(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(s,"");var n=a.test(e);return n||l.test(e)?c(e.slice(2),n?2:8):o.test(e)?i:+e}e.exports=function(e,t,n){var i,r,s,o,a,l,c=0,h=!1,u=!1,d=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function p(t){var n=i,s=r;return i=r=void 0,c=t,o=e.apply(s,n)}function y(e){var n=e-l;return void 0===l||n>=t||n<0||u&&e-c>=s}function w(){var e=g();if(y(e))return _(e);a=setTimeout(w,function(e){var n=t-(e-l);return u?f(n,s-(e-c)):n}(e))}function _(e){return a=void 0,d&&i?p(e):(i=r=void 0,o)}function E(){var e=g(),n=y(e);if(i=arguments,r=this,l=e,n){if(void 0===a)return function(e){return c=e,a=setTimeout(w,t),h?p(e):o}(l);if(u)return a=setTimeout(w,t),p(l)}return void 0===a&&(a=setTimeout(w,t)),o}return t=b(t)||0,v(n)&&(h=!!n.leading,s=(u="maxWait"in n)?m(b(n.maxWait)||0,t):s,d="trailing"in n?!!n.trailing:d),E.cancel=function(){void 0!==a&&clearTimeout(a),c=0,i=l=r=a=void 0},E.flush=function(){return void 0===a?o:_(g())},E}},363:function(e,t,n){var i,r;(function(){(function(){(function(){this.Rails={linkClickSelector:"a[data-confirm], a[data-method], a[data-remote]:not([disabled]), a[data-disable-with], a[data-disable]",buttonClickSelector:{selector:"button[data-remote]:not([form]), button[data-confirm]:not([form])",exclude:"form button"},inputChangeSelector:"select[data-remote], input[data-remote], textarea[data-remote]",formSubmitSelector:"form",formInputClickSelector:"form input[type=submit], form input[type=image], form button[type=submit], form button:not([type]), input[type=submit][form], input[type=image][form], button[type=submit][form], button[form]:not([type])",formDisableSelector:"input[data-disable-with]:enabled, button[data-disable-with]:enabled, textarea[data-disable-with]:enabled, input[data-disable]:enabled, button[data-disable]:enabled, textarea[data-disable]:enabled",formEnableSelector:"input[data-disable-with]:disabled, button[data-disable-with]:disabled, textarea[data-disable-with]:disabled, input[data-disable]:disabled, button[data-disable]:disabled, textarea[data-disable]:disabled",fileInputSelector:"input[name][type=file]:not([disabled])",linkDisableSelector:"a[data-disable-with], a[data-disable]",buttonDisableSelector:"button[data-remote][data-disable-with], button[data-remote][data-disable]"}}).call(this)}).call(this);var s=this.Rails;(function(){(function(){var e;e=null,s.loadCSPNonce=function(){var t;return e=null!=(t=document.querySelector("meta[name=csp-nonce]"))?t.content:void 0},s.cspNonce=function(){return null!=e?e:s.loadCSPNonce()}}).call(this),function(){var e,t;t=Element.prototype.matches||Element.prototype.matchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.msMatchesSelector||Element.prototype.oMatchesSelector||Element.prototype.webkitMatchesSelector,s.matches=function(e,n){return null!=n.exclude?t.call(e,n.selector)&&!t.call(e,n.exclude):t.call(e,n)},e="_ujsData",s.getData=function(t,n){var i;return null!=(i=t[e])?i[n]:void 0},s.setData=function(t,n,i){return null==t[e]&&(t[e]={}),t[e][n]=i},s.$=function(e){return Array.prototype.slice.call(document.querySelectorAll(e))}}.call(this),function(){var e,t,n;e=s.$,n=s.csrfToken=function(){var e;return(e=document.querySelector("meta[name=csrf-token]"))&&e.content},t=s.csrfParam=function(){var e;return(e=document.querySelector("meta[name=csrf-param]"))&&e.content},s.CSRFProtection=function(e){var t;if(null!=(t=n()))return e.setRequestHeader("X-CSRF-Token",t)},s.refreshCSRFTokens=function(){var i,r;if(r=n(),i=t(),null!=r&&null!=i)return e('form input[name="'+i+'"]').forEach((function(e){return e.value=r}))}}.call(this),function(){var e,t,n,i;n=s.matches,"function"!=typeof(e=window.CustomEvent)&&((e=function(e,t){var n;return(n=document.createEvent("CustomEvent")).initCustomEvent(e,t.bubbles,t.cancelable,t.detail),n}).prototype=window.Event.prototype,i=e.prototype.preventDefault,e.prototype.preventDefault=function(){var e;return e=i.call(this),this.cancelable&&!this.defaultPrevented&&Object.defineProperty(this,"defaultPrevented",{get:function(){return!0}}),e}),t=s.fire=function(t,n,i){var r;return r=new e(n,{bubbles:!0,cancelable:!0,detail:i}),t.dispatchEvent(r),!r.defaultPrevented},s.stopEverything=function(e){return t(e.target,"ujs:everythingStopped"),e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation()},s.delegate=function(e,t,i,r){return e.addEventListener(i,(function(e){var i;for(i=e.target;i instanceof Element&&!n(i,t);)i=i.parentNode;if(i instanceof Element&&!1===r.call(i,e))return e.preventDefault(),e.stopPropagation()}))}}.call(this),function(){var e,t,n,i,r,o;i=s.cspNonce,t=s.CSRFProtection,s.fire,e={"*":"*/*",text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript",script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},s.ajax=function(e){var t;return e=r(e),t=n(e,(function(){var n,i;return i=o(null!=(n=t.response)?n:t.responseText,t.getResponseHeader("Content-Type")),2===Math.floor(t.status/100)?"function"==typeof e.success&&e.success(i,t.statusText,t):"function"==typeof e.error&&e.error(i,t.statusText,t),"function"==typeof e.complete?e.complete(t,t.statusText):void 0})),!(null!=e.beforeSend&&!e.beforeSend(t,e))&&(t.readyState===XMLHttpRequest.OPENED?t.send(e.data):void 0)},r=function(t){return t.url=t.url||location.href,t.type=t.type.toUpperCase(),"GET"===t.type&&t.data&&(t.url.indexOf("?")<0?t.url+="?"+t.data:t.url+="&"+t.data),null==e[t.dataType]&&(t.dataType="*"),t.accept=e[t.dataType],"*"!==t.dataType&&(t.accept+=", */*; q=0.01"),t},n=function(e,n){var i;return(i=new XMLHttpRequest).open(e.type,e.url,!0),i.setRequestHeader("Accept",e.accept),"string"==typeof e.data&&i.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8"),e.crossDomain||(i.setRequestHeader("X-Requested-With","XMLHttpRequest"),t(i)),i.withCredentials=!!e.withCredentials,i.onreadystatechange=function(){if(i.readyState===XMLHttpRequest.DONE)return n(i)},i},o=function(e,t){var n,r;if("string"==typeof e&&"string"==typeof t)if(t.match(/\bjson\b/))try{e=JSON.parse(e)}catch(e){}else if(t.match(/\b(?:java|ecma)script\b/))(r=document.createElement("script")).setAttribute("nonce",i()),r.text=e,document.head.appendChild(r).parentNode.removeChild(r);else if(t.match(/\b(xml|html|svg)\b/)){n=new DOMParser,t=t.replace(/;.+/,"");try{e=n.parseFromString(e,t)}catch(e){}}return e},s.href=function(e){return e.href},s.isCrossDomain=function(e){var t,n;(t=document.createElement("a")).href=location.href,n=document.createElement("a");try{return n.href=e,!((!n.protocol||":"===n.protocol)&&!n.host||t.protocol+"//"+t.host==n.protocol+"//"+n.host)}catch(e){return!0}}}.call(this),function(){var e,t;e=s.matches,t=function(e){return Array.prototype.slice.call(e)},s.serializeElement=function(n,i){var r,s;return r=[n],e(n,"form")&&(r=t(n.elements)),s=[],r.forEach((function(n){if(n.name&&!n.disabled)return e(n,"select")?t(n.options).forEach((function(e){if(e.selected)return s.push({name:n.name,value:e.value})})):n.checked||-1===["radio","checkbox","submit"].indexOf(n.type)?s.push({name:n.name,value:n.value}):void 0})),i&&s.push(i),s.map((function(e){return null!=e.name?encodeURIComponent(e.name)+"="+encodeURIComponent(e.value):e})).join("&")},s.formElements=function(n,i){return e(n,"form")?t(n.elements).filter((function(t){return e(t,i)})):t(n.querySelectorAll(i))}}.call(this),function(){var e,t,n;t=s.fire,n=s.stopEverything,s.handleConfirm=function(t){if(!e(this))return n(t)},e=function(e){var n,i,r;if(!(r=e.getAttribute("data-confirm")))return!0;if(n=!1,t(e,"confirm")){try{n=confirm(r)}catch(e){}i=t(e,"confirm:complete",[n])}return n&&i}}.call(this),function(){var e,t,n,i,r,o,a,l,c,h,u;c=s.matches,l=s.getData,h=s.setData,u=s.stopEverything,a=s.formElements,s.handleDisabledElement=function(e){if(this.disabled)return u(e)},s.enableElement=function(e){var t;return t=e instanceof Event?e.target:e,c(t,s.linkDisableSelector)?o(t):c(t,s.buttonDisableSelector)||c(t,s.formEnableSelector)?i(t):c(t,s.formSubmitSelector)?r(t):void 0},s.disableElement=function(i){var r;return r=i instanceof Event?i.target:i,c(r,s.linkDisableSelector)?n(r):c(r,s.buttonDisableSelector)||c(r,s.formDisableSelector)?e(r):c(r,s.formSubmitSelector)?t(r):void 0},n=function(e){var t;return null!=(t=e.getAttribute("data-disable-with"))&&(h(e,"ujs:enable-with",e.innerHTML),e.innerHTML=t),e.addEventListener("click",u),h(e,"ujs:disabled",!0)},o=function(e){var t;return null!=(t=l(e,"ujs:enable-with"))&&(e.innerHTML=t,h(e,"ujs:enable-with",null)),e.removeEventListener("click",u),h(e,"ujs:disabled",null)},t=function(t){return a(t,s.formDisableSelector).forEach(e)},e=function(e){var t;return null!=(t=e.getAttribute("data-disable-with"))&&(c(e,"button")?(h(e,"ujs:enable-with",e.innerHTML),e.innerHTML=t):(h(e,"ujs:enable-with",e.value),e.value=t)),e.disabled=!0,h(e,"ujs:disabled",!0)},r=function(e){return a(e,s.formEnableSelector).forEach(i)},i=function(e){var t;return null!=(t=l(e,"ujs:enable-with"))&&(c(e,"button")?e.innerHTML=t:e.value=t,h(e,"ujs:enable-with",null)),e.disabled=!1,h(e,"ujs:disabled",null)}}.call(this),function(){var e;e=s.stopEverything,s.handleMethod=function(t){var n,i,r,o,a,l,c;if(c=(l=this).getAttribute("data-method"))return a=s.href(l),i=s.csrfToken(),n=s.csrfParam(),r=document.createElement("form"),o="<input name='_method' value='"+c+"' type='hidden' />",null==n||null==i||s.isCrossDomain(a)||(o+="<input name='"+n+"' value='"+i+"' type='hidden' />"),o+='<input type="submit" />',r.method="post",r.action=a,r.target=l.target,r.innerHTML=o,r.style.display="none",document.body.appendChild(r),r.querySelector('[type="submit"]').click(),e(t)}}.call(this),function(){var e,t,n,i,r,o,a,l,c,h=[].slice;o=s.matches,n=s.getData,l=s.setData,t=s.fire,c=s.stopEverything,e=s.ajax,i=s.isCrossDomain,a=s.serializeElement,r=function(e){var t;return null!=(t=e.getAttribute("data-remote"))&&"false"!==t},s.handleRemote=function(u){var d,p,m,f,g,v,b;return!r(f=this)||(t(f,"ajax:before")?(b=f.getAttribute("data-with-credentials"),m=f.getAttribute("data-type")||"script",o(f,s.formSubmitSelector)?(d=n(f,"ujs:submit-button"),g=n(f,"ujs:submit-button-formmethod")||f.method,v=n(f,"ujs:submit-button-formaction")||f.getAttribute("action")||location.href,"GET"===g.toUpperCase()&&(v=v.replace(/\?.*$/,"")),"multipart/form-data"===f.enctype?(p=new FormData(f),null!=d&&p.append(d.name,d.value)):p=a(f,d),l(f,"ujs:submit-button",null),l(f,"ujs:submit-button-formmethod",null),l(f,"ujs:submit-button-formaction",null)):o(f,s.buttonClickSelector)||o(f,s.inputChangeSelector)?(g=f.getAttribute("data-method"),v=f.getAttribute("data-url"),p=a(f,f.getAttribute("data-params"))):(g=f.getAttribute("data-method"),v=s.href(f),p=f.getAttribute("data-params")),e({type:g||"GET",url:v,data:p,dataType:m,beforeSend:function(e,n){return t(f,"ajax:beforeSend",[e,n])?t(f,"ajax:send",[e]):(t(f,"ajax:stopped"),!1)},success:function(){var e;return e=1<=arguments.length?h.call(arguments,0):[],t(f,"ajax:success",e)},error:function(){var e;return e=1<=arguments.length?h.call(arguments,0):[],t(f,"ajax:error",e)},complete:function(){var e;return e=1<=arguments.length?h.call(arguments,0):[],t(f,"ajax:complete",e)},crossDomain:i(v),withCredentials:null!=b&&"false"!==b}),c(u)):(t(f,"ajax:stopped"),!1))},s.formSubmitButtonClick=function(e){var t,n;if(n=(t=this).form)return t.name&&l(n,"ujs:submit-button",{name:t.name,value:t.value}),l(n,"ujs:formnovalidate-button",t.formNoValidate),l(n,"ujs:submit-button-formaction",t.getAttribute("formaction")),l(n,"ujs:submit-button-formmethod",t.getAttribute("formmethod"))},s.preventInsignificantClick=function(e){var t,n,i;if(i=(this.getAttribute("data-method")||"GET").toUpperCase(),t=this.getAttribute("data-params"),n=(e.metaKey||e.ctrlKey)&&"GET"===i&&!t,null!=e.button&&0!==e.button||n)return e.stopImmediatePropagation()}}.call(this),function(){var e,t,n,i,r,o,a,l,c,h,u,d,p,m,f;if(o=s.fire,n=s.delegate,l=s.getData,e=s.$,f=s.refreshCSRFTokens,t=s.CSRFProtection,p=s.loadCSPNonce,r=s.enableElement,i=s.disableElement,h=s.handleDisabledElement,c=s.handleConfirm,m=s.preventInsignificantClick,d=s.handleRemote,a=s.formSubmitButtonClick,u=s.handleMethod,"undefined"!=typeof jQuery&&null!==jQuery&&null!=jQuery.ajax){if(jQuery.rails)throw new Error("If you load both jquery_ujs and rails-ujs, use rails-ujs only.");jQuery.rails=s,jQuery.ajaxPrefilter((function(e,n,i){if(!e.crossDomain)return t(i)}))}s.start=function(){if(window._rails_loaded)throw new Error("rails-ujs has already been loaded!");return window.addEventListener("pageshow",(function(){return e(s.formEnableSelector).forEach((function(e){if(l(e,"ujs:disabled"))return r(e)})),e(s.linkDisableSelector).forEach((function(e){if(l(e,"ujs:disabled"))return r(e)}))})),n(document,s.linkDisableSelector,"ajax:complete",r),n(document,s.linkDisableSelector,"ajax:stopped",r),n(document,s.buttonDisableSelector,"ajax:complete",r),n(document,s.buttonDisableSelector,"ajax:stopped",r),n(document,s.linkClickSelector,"click",m),n(document,s.linkClickSelector,"click",h),n(document,s.linkClickSelector,"click",c),n(document,s.linkClickSelector,"click",i),n(document,s.linkClickSelector,"click",d),n(document,s.linkClickSelector,"click",u),n(document,s.buttonClickSelector,"click",m),n(document,s.buttonClickSelector,"click",h),n(document,s.buttonClickSelector,"click",c),n(document,s.buttonClickSelector,"click",i),n(document,s.buttonClickSelector,"click",d),n(document,s.inputChangeSelector,"change",h),n(document,s.inputChangeSelector,"change",c),n(document,s.inputChangeSelector,"change",d),n(document,s.formSubmitSelector,"submit",h),n(document,s.formSubmitSelector,"submit",c),n(document,s.formSubmitSelector,"submit",d),n(document,s.formSubmitSelector,"submit",(function(e){return setTimeout((function(){return i(e)}),13)})),n(document,s.formSubmitSelector,"ajax:send",i),n(document,s.formSubmitSelector,"ajax:complete",r),n(document,s.formInputClickSelector,"click",m),n(document,s.formInputClickSelector,"click",h),n(document,s.formInputClickSelector,"click",c),n(document,s.formInputClickSelector,"click",a),document.addEventListener("DOMContentLoaded",f),document.addEventListener("DOMContentLoaded",p),window._rails_loaded=!0},window.Rails===s&&o(document,"rails:attachBindings")&&s.start()}.call(this)}).call(this),e.exports?e.exports=s:void 0===(r="function"==typeof(i=s)?i.call(t,n,t,e):i)||(e.exports=r)}).call(this)},395:function(e){var t;t=function(){var e="",t=/^([a-zA-Z]{2,3})(?:[_-]+([a-zA-Z]{3})(?=$|[_-]+))?(?:[_-]+([a-zA-Z]{4})(?=$|[_-]+))?(?:[_-]+([a-zA-Z]{2}|[0-9]{3})(?=$|[_-]+))?/;function n(e){return e.match(t)||[]}function i(t){return{language:(t=n(t))[1]||e,extlang:t[2]||e,script:t[3]||e,region:t[4]||e}}function r(e,t,n){Object.defineProperty(e,t,{value:n,enumerable:!0})}function s(t,s,o){function a(i){return n(i)[t]||e}r(a,"pattern",s),r(i,o,a)}return s(1,/^[a-zA-Z]{2,3}$/,"language"),s(2,/^[a-zA-Z]{3}$/,"extlang"),s(3,/^[a-zA-Z]{4}$/,"script"),s(4,/^[a-zA-Z]{2}$|^[0-9]{3}$/,"region"),r(i,"split",(function(e){return n(e).filter((function(e,t){return e&&t}))})),i},e.exports?e.exports=t():this.subtag=t()},504:(e,t,n)=>{"use strict";var i=n(247);e.exports=i,"undefined"!=typeof window&&(window.Suggestions=i)},945:e=>{"use strict";var t=function(e){return this.component=e,this.items=[],this.active=0,this.wrapper=document.createElement("div"),this.wrapper.className="suggestions-wrapper",this.element=document.createElement("ul"),this.element.className="suggestions",this.wrapper.appendChild(this.element),this.selectingListItem=!1,e.el.parentNode.insertBefore(this.wrapper,e.el.nextSibling),this};t.prototype.show=function(){this.element.style.display="block"},t.prototype.hide=function(){this.element.style.display="none"},t.prototype.add=function(e){this.items.push(e)},t.prototype.clear=function(){this.items=[],this.active=0},t.prototype.isEmpty=function(){return!this.items.length},t.prototype.isVisible=function(){return"block"===this.element.style.display},t.prototype.draw=function(){if(this.element.innerHTML="",0!==this.items.length){for(var e=0;e<this.items.length;e++)this.drawItem(this.items[e],this.active===e);this.show()}else this.hide()},t.prototype.drawItem=function(e,t){var n=document.createElement("li"),i=document.createElement("a");t&&(n.className+=" active"),i.innerHTML=e.string,n.appendChild(i),this.element.appendChild(n),n.addEventListener("mousedown",function(){this.selectingListItem=!0}.bind(this)),n.addEventListener("mouseup",function(){this.handleMouseUp.call(this,e)}.bind(this))},t.prototype.handleMouseUp=function(e){this.selectingListItem=!1,this.component.value(e.original),this.clear(),this.draw()},t.prototype.move=function(e){this.active=e,this.draw()},t.prototype.previous=function(){this.move(0===this.active?this.items.length-1:this.active-1)},t.prototype.next=function(){this.move(this.active===this.items.length-1?0:this.active+1)},t.prototype.drawError=function(e){var t=document.createElement("li");t.innerHTML=e,this.element.appendChild(t),this.show()},e.exports=t},247:(e,t,n)=>{"use strict";var i=n(529),r=n(261),s=n(945),o=function(e,t,n){return n=n||{},this.options=i({minLength:2,limit:5,filter:!0,hideOnBlur:!0},n),this.el=e,this.data=t||[],this.list=new s(this),this.query="",this.selected=null,this.list.draw(),this.el.addEventListener("keyup",function(e){this.handleKeyUp(e.keyCode)}.bind(this),!1),this.el.addEventListener("keydown",function(e){this.handleKeyDown(e)}.bind(this)),this.el.addEventListener("focus",function(){this.handleFocus()}.bind(this)),this.el.addEventListener("blur",function(){this.handleBlur()}.bind(this)),this.el.addEventListener("paste",function(e){this.handlePaste(e)}.bind(this)),this.render=this.options.render?this.options.render.bind(this):this.render.bind(this),this.getItemValue=this.options.getItemValue?this.options.getItemValue.bind(this):this.getItemValue.bind(this),this};o.prototype.handleKeyUp=function(e){40!==e&&38!==e&&27!==e&&13!==e&&9!==e&&this.handleInputChange(this.el.value)},o.prototype.handleKeyDown=function(e){switch(e.keyCode){case 13:case 9:this.list.isEmpty()||(this.list.isVisible()&&e.preventDefault(),this.value(this.list.items[this.list.active].original),this.list.hide());break;case 27:this.list.isEmpty()||this.list.hide();break;case 38:this.list.previous();break;case 40:this.list.next()}},o.prototype.handleBlur=function(){!this.list.selectingListItem&&this.options.hideOnBlur&&this.list.hide()},o.prototype.handlePaste=function(e){if(e.clipboardData)this.handleInputChange(e.clipboardData.getData("Text"));else{var t=this;setTimeout((function(){t.handleInputChange(e.target.value)}),100)}},o.prototype.handleInputChange=function(e){this.query=this.normalize(e),this.list.clear(),this.query.length<this.options.minLength?this.list.draw():this.getCandidates(function(e){for(var t=0;t<e.length&&(this.list.add(e[t]),t!==this.options.limit-1);t++);this.list.draw()}.bind(this))},o.prototype.handleFocus=function(){this.list.isEmpty()||this.list.show(),this.list.selectingListItem=!1},o.prototype.update=function(e){this.data=e,this.handleKeyUp()},o.prototype.clear=function(){this.data=[],this.list.clear()},o.prototype.normalize=function(e){return e.toLowerCase()},o.prototype.match=function(e,t){return e.indexOf(t)>-1},o.prototype.value=function(e){if(this.selected=e,this.el.value=this.getItemValue(e),document.createEvent){var t=document.createEvent("HTMLEvents");t.initEvent("change",!0,!1),this.el.dispatchEvent(t)}else this.el.fireEvent("onchange")},o.prototype.getCandidates=function(e){var t={pre:"<strong>",post:"</strong>",extract:function(e){return this.getItemValue(e)}.bind(this)};e(this.options.filter?r.filter(this.query,this.data,t).map(function(e){return{original:e.original,string:this.render(e.original,e.string)}}.bind(this)):this.data.map(function(e){return{original:e,string:this.render(e)}}.bind(this)))},o.prototype.getItemValue=function(e){return e},o.prototype.render=function(e,t){if(t)return t;for(var n=e.original?this.getItemValue(e.original):this.getItemValue(e),i=this.normalize(n),r=i.lastIndexOf(this.query);r>-1;){var s=r+this.query.length;n=n.slice(0,r)+"<strong>"+n.slice(r,s)+"</strong>"+n.slice(s),r=i.slice(0,r).lastIndexOf(this.query)}return n},o.prototype.renderError=function(e){this.list.drawError(e)},e.exports=o},529:e=>{e.exports=function(){for(var e={},n=0;n<arguments.length;n++){var i=arguments[n];for(var r in i)t.call(i,r)&&(e[r]=i[r])}return e};var t=Object.prototype.hasOwnProperty},416:(e,t,n)=>{"use strict";n.d(t,{x0:()=>i});let i=(e=21)=>crypto.getRandomValues(new Uint8Array(e)).reduce(((e,t)=>e+((t&=63)<36?t.toString(36):t<62?(t-26).toString(36).toUpperCase():t>62?"-":"_")),"")}},t={};function n(i){var r=t[i];if(void 0!==r)return r.exports;var s=t[i]={id:i,loaded:!1,exports:{}};return e[i].call(s.exports,s,s.exports,n),s.loaded=!0,s.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var i in t)n.o(t,i)&&!n.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),(()=>{"use strict";var e={};n.r(e),n.d(e,{afterMain:()=>or,afterRead:()=>ir,afterWrite:()=>cr,applyStyles:()=>gr,arrow:()=>Nr,auto:()=>zi,basePlacements:()=>Ui,beforeMain:()=>rr,beforeRead:()=>tr,beforeWrite:()=>ar,bottom:()=>Hi,clippingParents:()=>Xi,computeStyles:()=>$r,createPopper:()=>fs,createPopperBase:()=>ms,createPopperLite:()=>gs,detectOverflow:()=>ts,end:()=>Gi,eventListeners:()=>Hr,flip:()=>ns,hide:()=>ss,left:()=>Wi,main:()=>sr,modifierPhases:()=>hr,offset:()=>os,placements:()=>er,popper:()=>Qi,popperGenerator:()=>ps,popperOffsets:()=>as,preventOverflow:()=>ls,read:()=>nr,reference:()=>Ji,right:()=>Vi,start:()=>Ki,top:()=>qi,variationPlacements:()=>Zi,viewport:()=>Yi,write:()=>lr}),function(){if(void 0===window.Reflect||void 0===window.customElements||window.customElements.polyfillWrapFlushCallback)return;const e=HTMLElement;window.HTMLElement=function(){return Reflect.construct(e,[],this.constructor)},HTMLElement.prototype=e.prototype,HTMLElement.prototype.constructor=HTMLElement,Object.setPrototypeOf(HTMLElement,e)}(),function(e){function t(e,t,n){throw new e("Failed to execute 'requestSubmit' on 'HTMLFormElement': "+t+".",n)}"function"!=typeof e.requestSubmit&&(e.requestSubmit=function(e){e?(function(e,n){e instanceof HTMLElement||t(TypeError,"parameter 1 is not of type 'HTMLElement'"),"submit"==e.type||t(TypeError,"The specified element is not a submit button"),e.form==n||t(DOMException,"The specified element is not owned by this form element","NotFoundError")}(e,this),e.click()):((e=document.createElement("input")).type="submit",e.hidden=!0,this.appendChild(e),e.click(),this.removeChild(e))})}(HTMLFormElement.prototype);const t=new WeakMap;function i(e){const n=function(e){const t=e instanceof Element?e:e instanceof Node?e.parentElement:null,n=t?t.closest("input, button"):null;return"submit"==(null==n?void 0:n.type)?n:null}(e.target);n&&n.form&&t.set(n.form,n)}var r,s,o,a,l,c;!function(){if("submitter"in Event.prototype)return;let e=window.Event.prototype;if("SubmitEvent"in window&&/Apple Computer/.test(navigator.vendor))e=window.SubmitEvent.prototype;else if("SubmitEvent"in window)return;addEventListener("click",i,!0),Object.defineProperty(e,"submitter",{get(){if("submit"==this.type&&this.target instanceof HTMLFormElement)return t.get(this.target)}})}(),function(e){e.eager="eager",e.lazy="lazy"}(r||(r={}));class h extends HTMLElement{static get observedAttributes(){return["disabled","complete","loading","src"]}constructor(){super(),this.loaded=Promise.resolve(),this.delegate=new h.delegateConstructor(this)}connectedCallback(){this.delegate.connect()}disconnectedCallback(){this.delegate.disconnect()}reload(){return this.delegate.sourceURLReloaded()}attributeChangedCallback(e){"loading"==e?this.delegate.loadingStyleChanged():"complete"==e?this.delegate.completeChanged():"src"==e?this.delegate.sourceURLChanged():this.delegate.disabledChanged()}get src(){return this.getAttribute("src")}set src(e){e?this.setAttribute("src",e):this.removeAttribute("src")}get loading(){return"lazy"===(this.getAttribute("loading")||"").toLowerCase()?r.lazy:r.eager}set loading(e){e?this.setAttribute("loading",e):this.removeAttribute("loading")}get disabled(){return this.hasAttribute("disabled")}set disabled(e){e?this.setAttribute("disabled",""):this.removeAttribute("disabled")}get autoscroll(){return this.hasAttribute("autoscroll")}set autoscroll(e){e?this.setAttribute("autoscroll",""):this.removeAttribute("autoscroll")}get complete(){return!this.delegate.isLoading}get isActive(){return this.ownerDocument===document&&!this.isPreview}get isPreview(){var e,t;return null===(t=null===(e=this.ownerDocument)||void 0===e?void 0:e.documentElement)||void 0===t?void 0:t.hasAttribute("data-turbo-preview")}}function u(e){return new URL(e.toString(),document.baseURI)}function d(e){let t;return e.hash?e.hash.slice(1):(t=e.href.match(/#(.*)$/))?t[1]:void 0}function p(e,t){return u((null==t?void 0:t.getAttribute("formaction"))||e.getAttribute("action")||e.action)}function m(e,t){return function(e,t){const n=function(e){return(t=e.origin+e.pathname).endsWith("/")?t:t+"/";var t}(t);return e.href===u(n).href||e.href.startsWith(n)}(e,t)&&!!(n=e,(function(e){return function(e){return e.pathname.split("/").slice(1)}(e).slice(-1)[0]}(n).match(/\.[^.]*$/)||[])[0]||"").match(/^(?:|\.(?:htm|html|xhtml|php))$/);var n}function f(e){const t=d(e);return null!=t?e.href.slice(0,-(t.length+1)):e.href}function g(e){return f(e)}class v{constructor(e){this.response=e}get succeeded(){return this.response.ok}get failed(){return!this.succeeded}get clientError(){return this.statusCode>=400&&this.statusCode<=499}get serverError(){return this.statusCode>=500&&this.statusCode<=599}get redirected(){return this.response.redirected}get location(){return u(this.response.url)}get isHTML(){return this.contentType&&this.contentType.match(/^(?:text\/([^\s;,]+\b)?html|application\/xhtml\+xml)\b/)}get statusCode(){return this.response.status}get contentType(){return this.header("Content-Type")}get responseText(){return this.response.clone().text()}get responseHTML(){return this.isHTML?this.response.clone().text():Promise.resolve(void 0)}header(e){return this.response.headers.get(e)}}function b(e){if("false"==e.getAttribute("data-turbo-eval"))return e;{const t=document.createElement("script"),n=M("csp-nonce");return n&&(t.nonce=n),t.textContent=e.textContent,t.async=!1,function(e,t){for(const{name:n,value:i}of t.attributes)e.setAttribute(n,i)}(t,e),t}}function y(e,{target:t,cancelable:n,detail:i}={}){const r=new CustomEvent(e,{cancelable:n,bubbles:!0,composed:!0,detail:i});return t&&t.isConnected?t.dispatchEvent(r):document.documentElement.dispatchEvent(r),r}function w(){return new Promise((e=>requestAnimationFrame((()=>e()))))}function _(e=""){return(new DOMParser).parseFromString(e,"text/html")}function E(e,...t){const n=function(e,t){return e.reduce(((e,n,i)=>e+n+(null==t[i]?"":t[i])),"")}(e,t).replace(/^\n/,"").split("\n"),i=n[0].match(/^\s+/),r=i?i[0].length:0;return n.map((e=>e.slice(r))).join("\n")}function S(){return Array.from({length:36}).map(((e,t)=>8==t||13==t||18==t||23==t?"-":14==t?"4":19==t?(Math.floor(4*Math.random())+8).toString(16):Math.floor(15*Math.random()).toString(16))).join("")}function A(e,...t){for(const n of t.map((t=>null==t?void 0:t.getAttribute(e))))if("string"==typeof n)return n;return null}function C(...e){for(const t of e)"turbo-frame"==t.localName&&t.setAttribute("busy",""),t.setAttribute("aria-busy","true")}function T(...e){for(const t of e)"turbo-frame"==t.localName&&t.removeAttribute("busy"),t.removeAttribute("aria-busy")}function k(e,t=2e3){return new Promise((n=>{const i=()=>{e.removeEventListener("error",i),e.removeEventListener("load",i),n()};e.addEventListener("load",i,{once:!0}),e.addEventListener("error",i,{once:!0}),setTimeout(n,t)}))}function O(e){switch(e){case"replace":return history.replaceState;case"advance":case"restore":return history.pushState}}function x(...e){const t=A("data-turbo-action",...e);return function(e){return"advance"==e||"replace"==e||"restore"==e}(t)?t:null}function L(e){return document.querySelector(`meta[name="${e}"]`)}function M(e){const t=L(e);return t&&t.content}function P(e,t){var n;if(e instanceof Element)return e.closest(t)||P(e.assignedSlot||(null===(n=e.getRootNode())||void 0===n?void 0:n.host),t)}!function(e){e[e.get=0]="get",e[e.post=1]="post",e[e.put=2]="put",e[e.patch=3]="patch",e[e.delete=4]="delete"}(s||(s={}));class R{constructor(e,t,n,i=new URLSearchParams,r=null){this.abortController=new AbortController,this.resolveRequestPromise=e=>{},this.delegate=e,this.method=t,this.headers=this.defaultHeaders,this.body=i,this.url=n,this.target=r}get location(){return this.url}get params(){return this.url.searchParams}get entries(){return this.body?Array.from(this.body.entries()):[]}cancel(){this.abortController.abort()}async perform(){const{fetchOptions:e}=this;this.delegate.prepareRequest(this),await this.allowRequestToBeIntercepted(e);try{this.delegate.requestStarted(this);const t=await fetch(this.url.href,e);return await this.receive(t)}catch(e){if("AbortError"!==e.name)throw this.willDelegateErrorHandling(e)&&this.delegate.requestErrored(this,e),e}finally{this.delegate.requestFinished(this)}}async receive(e){const t=new v(e);return y("turbo:before-fetch-response",{cancelable:!0,detail:{fetchResponse:t},target:this.target}).defaultPrevented?this.delegate.requestPreventedHandlingResponse(this,t):t.succeeded?this.delegate.requestSucceededWithResponse(this,t):this.delegate.requestFailedWithResponse(this,t),t}get fetchOptions(){var e;return{method:s[this.method].toUpperCase(),credentials:"same-origin",headers:this.headers,redirect:"follow",body:this.isSafe?null:this.body,signal:this.abortSignal,referrer:null===(e=this.delegate.referrer)||void 0===e?void 0:e.href}}get defaultHeaders(){return{Accept:"text/html, application/xhtml+xml"}}get isSafe(){return this.method===s.get}get abortSignal(){return this.abortController.signal}acceptResponseType(e){this.headers.Accept=[e,this.headers.Accept].join(", ")}async allowRequestToBeIntercepted(e){const t=new Promise((e=>this.resolveRequestPromise=e));y("turbo:before-fetch-request",{cancelable:!0,detail:{fetchOptions:e,url:this.url,resume:this.resolveRequestPromise},target:this.target}).defaultPrevented&&await t}willDelegateErrorHandling(e){return!y("turbo:fetch-request-error",{target:this.target,cancelable:!0,detail:{request:this,error:e}}).defaultPrevented}}class D{constructor(e,t){this.started=!1,this.intersect=e=>{const t=e.slice(-1)[0];(null==t?void 0:t.isIntersecting)&&this.delegate.elementAppearedInViewport(this.element)},this.delegate=e,this.element=t,this.intersectionObserver=new IntersectionObserver(this.intersect)}start(){this.started||(this.started=!0,this.intersectionObserver.observe(this.element))}stop(){this.started&&(this.started=!1,this.intersectionObserver.unobserve(this.element))}}class I{static wrap(e){return"string"==typeof e?new this(function(e){const t=document.createElement("template");return t.innerHTML=e,t.content}(e)):e}constructor(e){this.fragment=function(e){for(const t of e.querySelectorAll("turbo-stream")){const e=document.importNode(t,!0);for(const t of e.templateElement.content.querySelectorAll("script"))t.replaceWith(b(t));t.replaceWith(e)}return e}(e)}}I.contentType="text/vnd.turbo-stream.html",function(e){e[e.initialized=0]="initialized",e[e.requesting=1]="requesting",e[e.waiting=2]="waiting",e[e.receiving=3]="receiving",e[e.stopping=4]="stopping",e[e.stopped=5]="stopped"}(o||(o={})),function(e){e.urlEncoded="application/x-www-form-urlencoded",e.multipart="multipart/form-data",e.plain="text/plain"}(a||(a={}));class N{static confirmMethod(e,t,n){return Promise.resolve(confirm(e))}constructor(e,t,n,i=!1){this.state=o.initialized,this.delegate=e,this.formElement=t,this.submitter=n,this.formData=function(e,t){const n=new FormData(e),i=null==t?void 0:t.getAttribute("name"),r=null==t?void 0:t.getAttribute("value");return i&&n.append(i,r||""),n}(t,n),this.location=u(this.action),this.method==s.get&&function(e,t){const n=new URLSearchParams;for(const[e,i]of t)i instanceof File||n.append(e,i);e.search=n.toString()}(this.location,[...this.body.entries()]),this.fetchRequest=new R(this,this.method,this.location,this.body,this.formElement),this.mustRedirect=i}get method(){var e;return function(e){switch(e.toLowerCase()){case"get":return s.get;case"post":return s.post;case"put":return s.put;case"patch":return s.patch;case"delete":return s.delete}}(((null===(e=this.submitter)||void 0===e?void 0:e.getAttribute("formmethod"))||this.formElement.getAttribute("method")||"").toLowerCase())||s.get}get action(){var e;const t="string"==typeof this.formElement.action?this.formElement.action:null;return(null===(e=this.submitter)||void 0===e?void 0:e.hasAttribute("formaction"))?this.submitter.getAttribute("formaction")||"":this.formElement.getAttribute("action")||t||""}get body(){return this.enctype==a.urlEncoded||this.method==s.get?new URLSearchParams(this.stringFormData):this.formData}get enctype(){var e;return function(e){switch(e.toLowerCase()){case a.multipart:return a.multipart;case a.plain:return a.plain;default:return a.urlEncoded}}((null===(e=this.submitter)||void 0===e?void 0:e.getAttribute("formenctype"))||this.formElement.enctype)}get isSafe(){return this.fetchRequest.isSafe}get stringFormData(){return[...this.formData].reduce(((e,[t,n])=>e.concat("string"==typeof n?[[t,n]]:[])),[])}async start(){const{initialized:e,requesting:t}=o,n=A("data-turbo-confirm",this.submitter,this.formElement);if("string"!=typeof n||await N.confirmMethod(n,this.formElement,this.submitter))return this.state==e?(this.state=t,this.fetchRequest.perform()):void 0}stop(){const{stopping:e,stopped:t}=o;if(this.state!=e&&this.state!=t)return this.state=e,this.fetchRequest.cancel(),!0}prepareRequest(e){if(!e.isSafe){const t=function(e){if(null!=e){const t=(document.cookie?document.cookie.split("; "):[]).find((t=>t.startsWith(e)));if(t){const e=t.split("=").slice(1).join("=");return e?decodeURIComponent(e):void 0}}}(M("csrf-param"))||M("csrf-token");t&&(e.headers["X-CSRF-Token"]=t)}this.requestAcceptsTurboStreamResponse(e)&&e.acceptResponseType(I.contentType)}requestStarted(e){var t;this.state=o.waiting,null===(t=this.submitter)||void 0===t||t.setAttribute("disabled",""),this.setSubmitsWith(),y("turbo:submit-start",{target:this.formElement,detail:{formSubmission:this}}),this.delegate.formSubmissionStarted(this)}requestPreventedHandlingResponse(e,t){this.result={success:t.succeeded,fetchResponse:t}}requestSucceededWithResponse(e,t){if(t.clientError||t.serverError)this.delegate.formSubmissionFailedWithResponse(this,t);else if(this.requestMustRedirect(e)&&function(e){return 200==e.statusCode&&!e.redirected}(t)){const e=new Error("Form responses must redirect to another location");this.delegate.formSubmissionErrored(this,e)}else this.state=o.receiving,this.result={success:!0,fetchResponse:t},this.delegate.formSubmissionSucceededWithResponse(this,t)}requestFailedWithResponse(e,t){this.result={success:!1,fetchResponse:t},this.delegate.formSubmissionFailedWithResponse(this,t)}requestErrored(e,t){this.result={success:!1,error:t},this.delegate.formSubmissionErrored(this,t)}requestFinished(e){var t;this.state=o.stopped,null===(t=this.submitter)||void 0===t||t.removeAttribute("disabled"),this.resetSubmitterText(),y("turbo:submit-end",{target:this.formElement,detail:Object.assign({formSubmission:this},this.result)}),this.delegate.formSubmissionFinished(this)}setSubmitsWith(){if(this.submitter&&this.submitsWith)if(this.submitter.matches("button"))this.originalSubmitText=this.submitter.innerHTML,this.submitter.innerHTML=this.submitsWith;else if(this.submitter.matches("input")){const e=this.submitter;this.originalSubmitText=e.value,e.value=this.submitsWith}}resetSubmitterText(){this.submitter&&this.originalSubmitText&&(this.submitter.matches("button")?this.submitter.innerHTML=this.originalSubmitText:this.submitter.matches("input")&&(this.submitter.value=this.originalSubmitText))}requestMustRedirect(e){return!e.isSafe&&this.mustRedirect}requestAcceptsTurboStreamResponse(e){return!e.isSafe||function(e,...t){return t.some((t=>t&&t.hasAttribute(e)))}("data-turbo-stream",this.submitter,this.formElement)}get submitsWith(){var e;return null===(e=this.submitter)||void 0===e?void 0:e.getAttribute("data-turbo-submits-with")}}class F{constructor(e){this.element=e}get activeElement(){return this.element.ownerDocument.activeElement}get children(){return[...this.element.children]}hasAnchor(e){return null!=this.getElementForAnchor(e)}getElementForAnchor(e){return e?this.element.querySelector(`[id='${e}'], a[name='${e}']`):null}get isConnected(){return this.element.isConnected}get firstAutofocusableElement(){for(const e of this.element.querySelectorAll("[autofocus]"))if(null==e.closest("[inert], :disabled, [hidden], details:not([open]), dialog:not([open])"))return e;return null}get permanentElements(){return B(this.element)}getPermanentElementById(e){return j(this.element,e)}getPermanentElementMapForSnapshot(e){const t={};for(const n of this.permanentElements){const{id:i}=n,r=e.getPermanentElementById(i);r&&(t[i]=[n,r])}return t}}function j(e,t){return e.querySelector(`#${t}[data-turbo-permanent]`)}function B(e){return e.querySelectorAll("[id][data-turbo-permanent]")}class ${constructor(e,t){this.started=!1,this.submitCaptured=()=>{this.eventTarget.removeEventListener("submit",this.submitBubbled,!1),this.eventTarget.addEventListener("submit",this.submitBubbled,!1)},this.submitBubbled=e=>{if(!e.defaultPrevented){const t=e.target instanceof HTMLFormElement?e.target:void 0,n=e.submitter||void 0;t&&function(e,t){return"dialog"!=((null==t?void 0:t.getAttribute("formmethod"))||e.getAttribute("method"))}(t,n)&&function(e,t){if((null==t?void 0:t.hasAttribute("formtarget"))||e.hasAttribute("target")){const n=(null==t?void 0:t.getAttribute("formtarget"))||e.target;for(const e of document.getElementsByName(n))if(e instanceof HTMLIFrameElement)return!1;return!0}return!0}(t,n)&&this.delegate.willSubmitForm(t,n)&&(e.preventDefault(),e.stopImmediatePropagation(),this.delegate.formSubmitted(t,n))}},this.delegate=e,this.eventTarget=t}start(){this.started||(this.eventTarget.addEventListener("submit",this.submitCaptured,!0),this.started=!0)}stop(){this.started&&(this.eventTarget.removeEventListener("submit",this.submitCaptured,!0),this.started=!1)}}class q{constructor(e,t){this.resolveRenderPromise=e=>{},this.resolveInterceptionPromise=e=>{},this.delegate=e,this.element=t}scrollToAnchor(e){const t=this.snapshot.getElementForAnchor(e);t?(this.scrollToElement(t),this.focusElement(t)):this.scrollToPosition({x:0,y:0})}scrollToAnchorFromLocation(e){this.scrollToAnchor(d(e))}scrollToElement(e){e.scrollIntoView()}focusElement(e){e instanceof HTMLElement&&(e.hasAttribute("tabindex")?e.focus():(e.setAttribute("tabindex","-1"),e.focus(),e.removeAttribute("tabindex")))}scrollToPosition({x:e,y:t}){this.scrollRoot.scrollTo(e,t)}scrollToTop(){this.scrollToPosition({x:0,y:0})}get scrollRoot(){return window}async render(e){const{isPreview:t,shouldRender:n,newSnapshot:i}=e;if(n)try{this.renderPromise=new Promise((e=>this.resolveRenderPromise=e)),this.renderer=e,await this.prepareToRenderSnapshot(e);const n=new Promise((e=>this.resolveInterceptionPromise=e)),r={resume:this.resolveInterceptionPromise,render:this.renderer.renderElement};this.delegate.allowsImmediateRender(i,r)||await n,await this.renderSnapshot(e),this.delegate.viewRenderedSnapshot(i,t),this.delegate.preloadOnLoadLinksForView(this.element),this.finishRenderingSnapshot(e)}finally{delete this.renderer,this.resolveRenderPromise(void 0),delete this.renderPromise}else this.invalidate(e.reloadReason)}invalidate(e){this.delegate.viewInvalidated(e)}async prepareToRenderSnapshot(e){this.markAsPreview(e.isPreview),await e.prepareToRender()}markAsPreview(e){e?this.element.setAttribute("data-turbo-preview",""):this.element.removeAttribute("data-turbo-preview")}async renderSnapshot(e){await e.render()}finishRenderingSnapshot(e){e.finishRendering()}}class H extends q{missing(){this.element.innerHTML='<strong class="turbo-frame-error">Content missing</strong>'}get snapshot(){return new F(this.element)}}class V{constructor(e,t){this.clickBubbled=e=>{this.respondsToEventTarget(e.target)?this.clickEvent=e:delete this.clickEvent},this.linkClicked=e=>{this.clickEvent&&this.respondsToEventTarget(e.target)&&e.target instanceof Element&&this.delegate.shouldInterceptLinkClick(e.target,e.detail.url,e.detail.originalEvent)&&(this.clickEvent.preventDefault(),e.preventDefault(),this.delegate.linkClickIntercepted(e.target,e.detail.url,e.detail.originalEvent)),delete this.clickEvent},this.willVisit=e=>{delete this.clickEvent},this.delegate=e,this.element=t}start(){this.element.addEventListener("click",this.clickBubbled),document.addEventListener("turbo:click",this.linkClicked),document.addEventListener("turbo:before-visit",this.willVisit)}stop(){this.element.removeEventListener("click",this.clickBubbled),document.removeEventListener("turbo:click",this.linkClicked),document.removeEventListener("turbo:before-visit",this.willVisit)}respondsToEventTarget(e){const t=e instanceof Element?e:e instanceof Node?e.parentElement:null;return t&&t.closest("turbo-frame, html")==this.element}}class W{constructor(e,t){this.started=!1,this.clickCaptured=()=>{this.eventTarget.removeEventListener("click",this.clickBubbled,!1),this.eventTarget.addEventListener("click",this.clickBubbled,!1)},this.clickBubbled=e=>{if(e instanceof MouseEvent&&this.clickEventIsSignificant(e)){const t=e.composedPath&&e.composedPath()[0]||e.target,n=this.findLinkFromClickTarget(t);if(n&&function(e){if(e.hasAttribute("target")){for(const t of document.getElementsByName(e.target))if(t instanceof HTMLIFrameElement)return!1;return!0}return!0}(n)){const t=this.getLocationForLink(n);this.delegate.willFollowLinkToLocation(n,t,e)&&(e.preventDefault(),this.delegate.followedLinkToLocation(n,t))}}},this.delegate=e,this.eventTarget=t}start(){this.started||(this.eventTarget.addEventListener("click",this.clickCaptured,!0),this.started=!0)}stop(){this.started&&(this.eventTarget.removeEventListener("click",this.clickCaptured,!0),this.started=!1)}clickEventIsSignificant(e){return!(e.target&&e.target.isContentEditable||e.defaultPrevented||e.which>1||e.altKey||e.ctrlKey||e.metaKey||e.shiftKey)}findLinkFromClickTarget(e){return P(e,"a[href]:not([target^=_]):not([download])")}getLocationForLink(e){return u(e.getAttribute("href")||"")}}class z{constructor(e,t){this.delegate=e,this.linkInterceptor=new W(this,t)}start(){this.linkInterceptor.start()}stop(){this.linkInterceptor.stop()}willFollowLinkToLocation(e,t,n){return this.delegate.willSubmitFormLinkToLocation(e,t,n)&&e.hasAttribute("data-turbo-method")}followedLinkToLocation(e,t){const n=document.createElement("form");for(const[e,i]of t.searchParams)n.append(Object.assign(document.createElement("input"),{type:"hidden",name:e,value:i}));const i=Object.assign(t,{search:""});n.setAttribute("data-turbo","true"),n.setAttribute("action",i.href),n.setAttribute("hidden","");const r=e.getAttribute("data-turbo-method");r&&n.setAttribute("method",r);const s=e.getAttribute("data-turbo-frame");s&&n.setAttribute("data-turbo-frame",s);const o=x(e);o&&n.setAttribute("data-turbo-action",o);const a=e.getAttribute("data-turbo-confirm");a&&n.setAttribute("data-turbo-confirm",a),e.hasAttribute("data-turbo-stream")&&n.setAttribute("data-turbo-stream",""),this.delegate.submittedFormLinkToLocation(e,t,n),document.body.appendChild(n),n.addEventListener("turbo:submit-end",(()=>n.remove()),{once:!0}),requestAnimationFrame((()=>n.requestSubmit()))}}class U{static async preservingPermanentElements(e,t,n){const i=new this(e,t);i.enter(),await n(),i.leave()}constructor(e,t){this.delegate=e,this.permanentElementMap=t}enter(){for(const e in this.permanentElementMap){const[t,n]=this.permanentElementMap[e];this.delegate.enteringBardo(t,n),this.replaceNewPermanentElementWithPlaceholder(n)}}leave(){for(const e in this.permanentElementMap){const[t]=this.permanentElementMap[e];this.replaceCurrentPermanentElementWithClone(t),this.replacePlaceholderWithPermanentElement(t),this.delegate.leavingBardo(t)}}replaceNewPermanentElementWithPlaceholder(e){const t=function(e){const t=document.createElement("meta");return t.setAttribute("name","turbo-permanent-placeholder"),t.setAttribute("content",e.id),t}(e);e.replaceWith(t)}replaceCurrentPermanentElementWithClone(e){const t=e.cloneNode(!0);e.replaceWith(t)}replacePlaceholderWithPermanentElement(e){const t=this.getPlaceholderById(e.id);null==t||t.replaceWith(e)}getPlaceholderById(e){return this.placeholders.find((t=>t.content==e))}get placeholders(){return[...document.querySelectorAll("meta[name=turbo-permanent-placeholder][content]")]}}class K{constructor(e,t,n,i,r=!0){this.activeElement=null,this.currentSnapshot=e,this.newSnapshot=t,this.isPreview=i,this.willRender=r,this.renderElement=n,this.promise=new Promise(((e,t)=>this.resolvingFunctions={resolve:e,reject:t}))}get shouldRender(){return!0}get reloadReason(){}prepareToRender(){}finishRendering(){this.resolvingFunctions&&(this.resolvingFunctions.resolve(),delete this.resolvingFunctions)}async preservingPermanentElements(e){await U.preservingPermanentElements(this,this.permanentElementMap,e)}focusFirstAutofocusableElement(){const e=this.connectedSnapshot.firstAutofocusableElement;(function(e){return e&&"function"==typeof e.focus})(e)&&e.focus()}enteringBardo(e){this.activeElement||e.contains(this.currentSnapshot.activeElement)&&(this.activeElement=this.currentSnapshot.activeElement)}leavingBardo(e){e.contains(this.activeElement)&&this.activeElement instanceof HTMLElement&&(this.activeElement.focus(),this.activeElement=null)}get connectedSnapshot(){return this.newSnapshot.isConnected?this.newSnapshot:this.currentSnapshot}get currentElement(){return this.currentSnapshot.element}get newElement(){return this.newSnapshot.element}get permanentElementMap(){return this.currentSnapshot.getPermanentElementMapForSnapshot(this.newSnapshot)}}class G extends K{static renderElement(e,t){var n;const i=document.createRange();i.selectNodeContents(e),i.deleteContents();const r=t,s=null===(n=r.ownerDocument)||void 0===n?void 0:n.createRange();s&&(s.selectNodeContents(r),e.appendChild(s.extractContents()))}constructor(e,t,n,i,r,s=!0){super(t,n,i,r,s),this.delegate=e}get shouldRender(){return!0}async render(){await w(),this.preservingPermanentElements((()=>{this.loadFrameElement()})),this.scrollFrameIntoView(),await w(),this.focusFirstAutofocusableElement(),await w(),this.activateScriptElements()}loadFrameElement(){this.delegate.willRenderFrame(this.currentElement,this.newElement),this.renderElement(this.currentElement,this.newElement)}scrollFrameIntoView(){if(this.currentElement.autoscroll||this.newElement.autoscroll){const t=this.currentElement.firstElementChild,n=("end","end"==(e=this.currentElement.getAttribute("data-autoscroll-block"))||"start"==e||"center"==e||"nearest"==e?e:"end"),i=function(e,t){return"auto"==e||"smooth"==e?e:"auto"}(this.currentElement.getAttribute("data-autoscroll-behavior"));if(t)return t.scrollIntoView({block:n,behavior:i}),!0}var e;return!1}activateScriptElements(){for(const e of this.newScriptElements){const t=b(e);e.replaceWith(t)}}get newScriptElements(){return this.currentElement.querySelectorAll("script")}}class X{static get defaultCSS(){return E`
      .turbo-progress-bar {
        position: fixed;
        display: block;
        top: 0;
        left: 0;
        height: 3px;
        background: #0076ff;
        z-index: 2147483647;
        transition:
          width ${X.animationDuration}ms ease-out,
          opacity ${X.animationDuration/2}ms ${X.animationDuration/2}ms ease-in;
        transform: translate3d(0, 0, 0);
      }
    `}constructor(){this.hiding=!1,this.value=0,this.visible=!1,this.trickle=()=>{this.setValue(this.value+Math.random()/100)},this.stylesheetElement=this.createStylesheetElement(),this.progressElement=this.createProgressElement(),this.installStylesheetElement(),this.setValue(0)}show(){this.visible||(this.visible=!0,this.installProgressElement(),this.startTrickling())}hide(){this.visible&&!this.hiding&&(this.hiding=!0,this.fadeProgressElement((()=>{this.uninstallProgressElement(),this.stopTrickling(),this.visible=!1,this.hiding=!1})))}setValue(e){this.value=e,this.refresh()}installStylesheetElement(){document.head.insertBefore(this.stylesheetElement,document.head.firstChild)}installProgressElement(){this.progressElement.style.width="0",this.progressElement.style.opacity="1",document.documentElement.insertBefore(this.progressElement,document.body),this.refresh()}fadeProgressElement(e){this.progressElement.style.opacity="0",setTimeout(e,1.5*X.animationDuration)}uninstallProgressElement(){this.progressElement.parentNode&&document.documentElement.removeChild(this.progressElement)}startTrickling(){this.trickleInterval||(this.trickleInterval=window.setInterval(this.trickle,X.animationDuration))}stopTrickling(){window.clearInterval(this.trickleInterval),delete this.trickleInterval}refresh(){requestAnimationFrame((()=>{this.progressElement.style.width=10+90*this.value+"%"}))}createStylesheetElement(){const e=document.createElement("style");return e.type="text/css",e.textContent=X.defaultCSS,this.cspNonce&&(e.nonce=this.cspNonce),e}createProgressElement(){const e=document.createElement("div");return e.className="turbo-progress-bar",e}get cspNonce(){return M("csp-nonce")}}X.animationDuration=300;class Y extends F{constructor(){super(...arguments),this.detailsByOuterHTML=this.children.filter((e=>!function(e){return"noscript"==e.localName}(e))).map((e=>function(e){return e.hasAttribute("nonce")&&e.setAttribute("nonce",""),e}(e))).reduce(((e,t)=>{const{outerHTML:n}=t,i=n in e?e[n]:{type:Q(t),tracked:J(t),elements:[]};return Object.assign(Object.assign({},e),{[n]:Object.assign(Object.assign({},i),{elements:[...i.elements,t]})})}),{})}get trackedElementSignature(){return Object.keys(this.detailsByOuterHTML).filter((e=>this.detailsByOuterHTML[e].tracked)).join("")}getScriptElementsNotInSnapshot(e){return this.getElementsMatchingTypeNotInSnapshot("script",e)}getStylesheetElementsNotInSnapshot(e){return this.getElementsMatchingTypeNotInSnapshot("stylesheet",e)}getElementsMatchingTypeNotInSnapshot(e,t){return Object.keys(this.detailsByOuterHTML).filter((e=>!(e in t.detailsByOuterHTML))).map((e=>this.detailsByOuterHTML[e])).filter((({type:t})=>t==e)).map((({elements:[e]})=>e))}get provisionalElements(){return Object.keys(this.detailsByOuterHTML).reduce(((e,t)=>{const{type:n,tracked:i,elements:r}=this.detailsByOuterHTML[t];return null!=n||i?r.length>1?[...e,...r.slice(1)]:e:[...e,...r]}),[])}getMetaValue(e){const t=this.findMetaElementByName(e);return t?t.getAttribute("content"):null}findMetaElementByName(e){return Object.keys(this.detailsByOuterHTML).reduce(((t,n)=>{const{elements:[i]}=this.detailsByOuterHTML[n];return function(e,t){return"meta"==e.localName&&e.getAttribute("name")==t}(i,e)?i:t}),void 0)}}function Q(e){return function(e){return"script"==e.localName}(e)?"script":function(e){const t=e.localName;return"style"==t||"link"==t&&"stylesheet"==e.getAttribute("rel")}(e)?"stylesheet":void 0}function J(e){return"reload"==e.getAttribute("data-turbo-track")}class Z extends F{static fromHTMLString(e=""){return this.fromDocument(_(e))}static fromElement(e){return this.fromDocument(e.ownerDocument)}static fromDocument({head:e,body:t}){return new this(t,new Y(e))}constructor(e,t){super(e),this.headSnapshot=t}clone(){const e=this.element.cloneNode(!0),t=this.element.querySelectorAll("select"),n=e.querySelectorAll("select");for(const[e,i]of t.entries()){const t=n[e];for(const e of t.selectedOptions)e.selected=!1;for(const e of i.selectedOptions)t.options[e.index].selected=!0}for(const t of e.querySelectorAll('input[type="password"]'))t.value="";return new Z(e,this.headSnapshot)}get headElement(){return this.headSnapshot.element}get rootLocation(){var e;return u(null!==(e=this.getSetting("root"))&&void 0!==e?e:"/")}get cacheControlValue(){return this.getSetting("cache-control")}get isPreviewable(){return"no-preview"!=this.cacheControlValue}get isCacheable(){return"no-cache"!=this.cacheControlValue}get isVisitable(){return"reload"!=this.getSetting("visit-control")}getSetting(e){return this.headSnapshot.getMetaValue(`turbo-${e}`)}}!function(e){e.visitStart="visitStart",e.requestStart="requestStart",e.requestEnd="requestEnd",e.visitEnd="visitEnd"}(l||(l={})),function(e){e.initialized="initialized",e.started="started",e.canceled="canceled",e.failed="failed",e.completed="completed"}(c||(c={}));const ee={action:"advance",historyChanged:!1,visitCachedSnapshot:()=>{},willRender:!0,updateHistory:!0,shouldCacheSnapshot:!0,acceptsStreamResponse:!1};var te,ne;!function(e){e[e.networkFailure=0]="networkFailure",e[e.timeoutFailure=-1]="timeoutFailure",e[e.contentTypeMismatch=-2]="contentTypeMismatch"}(te||(te={}));class ie{constructor(e,t,n,i={}){this.identifier=S(),this.timingMetrics={},this.followedRedirect=!1,this.historyChanged=!1,this.scrolled=!1,this.shouldCacheSnapshot=!0,this.acceptsStreamResponse=!1,this.snapshotCached=!1,this.state=c.initialized,this.delegate=e,this.location=t,this.restorationIdentifier=n||S();const{action:r,historyChanged:s,referrer:o,snapshot:a,snapshotHTML:l,response:h,visitCachedSnapshot:u,willRender:d,updateHistory:p,shouldCacheSnapshot:m,acceptsStreamResponse:f}=Object.assign(Object.assign({},ee),i);this.action=r,this.historyChanged=s,this.referrer=o,this.snapshot=a,this.snapshotHTML=l,this.response=h,this.isSamePage=this.delegate.locationWithActionIsSamePage(this.location,this.action),this.visitCachedSnapshot=u,this.willRender=d,this.updateHistory=p,this.scrolled=!d,this.shouldCacheSnapshot=m,this.acceptsStreamResponse=f}get adapter(){return this.delegate.adapter}get view(){return this.delegate.view}get history(){return this.delegate.history}get restorationData(){return this.history.getRestorationDataForIdentifier(this.restorationIdentifier)}get silent(){return this.isSamePage}start(){this.state==c.initialized&&(this.recordTimingMetric(l.visitStart),this.state=c.started,this.adapter.visitStarted(this),this.delegate.visitStarted(this))}cancel(){this.state==c.started&&(this.request&&this.request.cancel(),this.cancelRender(),this.state=c.canceled)}complete(){this.state==c.started&&(this.recordTimingMetric(l.visitEnd),this.state=c.completed,this.followRedirect(),this.followedRedirect||(this.adapter.visitCompleted(this),this.delegate.visitCompleted(this)))}fail(){this.state==c.started&&(this.state=c.failed,this.adapter.visitFailed(this))}changeHistory(){var e;if(!this.historyChanged&&this.updateHistory){const t=O(this.location.href===(null===(e=this.referrer)||void 0===e?void 0:e.href)?"replace":this.action);this.history.update(t,this.location,this.restorationIdentifier),this.historyChanged=!0}}issueRequest(){this.hasPreloadedResponse()?this.simulateRequest():this.shouldIssueRequest()&&!this.request&&(this.request=new R(this,s.get,this.location),this.request.perform())}simulateRequest(){this.response&&(this.startRequest(),this.recordResponse(),this.finishRequest())}startRequest(){this.recordTimingMetric(l.requestStart),this.adapter.visitRequestStarted(this)}recordResponse(e=this.response){if(this.response=e,e){const{statusCode:t}=e;re(t)?this.adapter.visitRequestCompleted(this):this.adapter.visitRequestFailedWithStatusCode(this,t)}}finishRequest(){this.recordTimingMetric(l.requestEnd),this.adapter.visitRequestFinished(this)}loadResponse(){if(this.response){const{statusCode:e,responseHTML:t}=this.response;this.render((async()=>{this.shouldCacheSnapshot&&this.cacheSnapshot(),this.view.renderPromise&&await this.view.renderPromise,re(e)&&null!=t?(await this.view.renderPage(Z.fromHTMLString(t),!1,this.willRender,this),this.performScroll(),this.adapter.visitRendered(this),this.complete()):(await this.view.renderError(Z.fromHTMLString(t),this),this.adapter.visitRendered(this),this.fail())}))}}getCachedSnapshot(){const e=this.view.getCachedSnapshotForLocation(this.location)||this.getPreloadedSnapshot();if(e&&(!d(this.location)||e.hasAnchor(d(this.location)))&&("restore"==this.action||e.isPreviewable))return e}getPreloadedSnapshot(){if(this.snapshotHTML)return Z.fromHTMLString(this.snapshotHTML)}hasCachedSnapshot(){return null!=this.getCachedSnapshot()}loadCachedSnapshot(){const e=this.getCachedSnapshot();if(e){const t=this.shouldIssueRequest();this.render((async()=>{this.cacheSnapshot(),this.isSamePage?this.adapter.visitRendered(this):(this.view.renderPromise&&await this.view.renderPromise,await this.view.renderPage(e,t,this.willRender,this),this.performScroll(),this.adapter.visitRendered(this),t||this.complete())}))}}followRedirect(){var e;this.redirectedToLocation&&!this.followedRedirect&&(null===(e=this.response)||void 0===e?void 0:e.redirected)&&(this.adapter.visitProposedToLocation(this.redirectedToLocation,{action:"replace",response:this.response,shouldCacheSnapshot:!1,willRender:!1}),this.followedRedirect=!0)}goToSamePageAnchor(){this.isSamePage&&this.render((async()=>{this.cacheSnapshot(),this.performScroll(),this.changeHistory(),this.adapter.visitRendered(this)}))}prepareRequest(e){this.acceptsStreamResponse&&e.acceptResponseType(I.contentType)}requestStarted(){this.startRequest()}requestPreventedHandlingResponse(e,t){}async requestSucceededWithResponse(e,t){const n=await t.responseHTML,{redirected:i,statusCode:r}=t;null==n?this.recordResponse({statusCode:te.contentTypeMismatch,redirected:i}):(this.redirectedToLocation=t.redirected?t.location:void 0,this.recordResponse({statusCode:r,responseHTML:n,redirected:i}))}async requestFailedWithResponse(e,t){const n=await t.responseHTML,{redirected:i,statusCode:r}=t;null==n?this.recordResponse({statusCode:te.contentTypeMismatch,redirected:i}):this.recordResponse({statusCode:r,responseHTML:n,redirected:i})}requestErrored(e,t){this.recordResponse({statusCode:te.networkFailure,redirected:!1})}requestFinished(){this.finishRequest()}performScroll(){this.scrolled||this.view.forceReloaded||("restore"==this.action?this.scrollToRestoredPosition()||this.scrollToAnchor()||this.view.scrollToTop():this.scrollToAnchor()||this.view.scrollToTop(),this.isSamePage&&this.delegate.visitScrolledToSamePageLocation(this.view.lastRenderedLocation,this.location),this.scrolled=!0)}scrollToRestoredPosition(){const{scrollPosition:e}=this.restorationData;if(e)return this.view.scrollToPosition(e),!0}scrollToAnchor(){const e=d(this.location);if(null!=e)return this.view.scrollToAnchor(e),!0}recordTimingMetric(e){this.timingMetrics[e]=(new Date).getTime()}getTimingMetrics(){return Object.assign({},this.timingMetrics)}getHistoryMethodForAction(e){switch(e){case"replace":return history.replaceState;case"advance":case"restore":return history.pushState}}hasPreloadedResponse(){return"object"==typeof this.response}shouldIssueRequest(){return!this.isSamePage&&("restore"==this.action?!this.hasCachedSnapshot():this.willRender)}cacheSnapshot(){this.snapshotCached||(this.view.cacheSnapshot(this.snapshot).then((e=>e&&this.visitCachedSnapshot(e))),this.snapshotCached=!0)}async render(e){this.cancelRender(),await new Promise((e=>{this.frame=requestAnimationFrame((()=>e()))})),await e(),delete this.frame}cancelRender(){this.frame&&(cancelAnimationFrame(this.frame),delete this.frame)}}function re(e){return e>=200&&e<300}class se{constructor(e){this.progressBar=new X,this.showProgressBar=()=>{this.progressBar.show()},this.session=e}visitProposedToLocation(e,t){this.navigator.startVisit(e,(null==t?void 0:t.restorationIdentifier)||S(),t)}visitStarted(e){this.location=e.location,e.loadCachedSnapshot(),e.issueRequest(),e.goToSamePageAnchor()}visitRequestStarted(e){this.progressBar.setValue(0),e.hasCachedSnapshot()||"restore"!=e.action?this.showVisitProgressBarAfterDelay():this.showProgressBar()}visitRequestCompleted(e){e.loadResponse()}visitRequestFailedWithStatusCode(e,t){switch(t){case te.networkFailure:case te.timeoutFailure:case te.contentTypeMismatch:return this.reload({reason:"request_failed",context:{statusCode:t}});default:return e.loadResponse()}}visitRequestFinished(e){this.progressBar.setValue(1),this.hideVisitProgressBar()}visitCompleted(e){}pageInvalidated(e){this.reload(e)}visitFailed(e){}visitRendered(e){}formSubmissionStarted(e){this.progressBar.setValue(0),this.showFormProgressBarAfterDelay()}formSubmissionFinished(e){this.progressBar.setValue(1),this.hideFormProgressBar()}showVisitProgressBarAfterDelay(){this.visitProgressBarTimeout=window.setTimeout(this.showProgressBar,this.session.progressBarDelay)}hideVisitProgressBar(){this.progressBar.hide(),null!=this.visitProgressBarTimeout&&(window.clearTimeout(this.visitProgressBarTimeout),delete this.visitProgressBarTimeout)}showFormProgressBarAfterDelay(){null==this.formProgressBarTimeout&&(this.formProgressBarTimeout=window.setTimeout(this.showProgressBar,this.session.progressBarDelay))}hideFormProgressBar(){this.progressBar.hide(),null!=this.formProgressBarTimeout&&(window.clearTimeout(this.formProgressBarTimeout),delete this.formProgressBarTimeout)}reload(e){var t;y("turbo:reload",{detail:e}),window.location.href=(null===(t=this.location)||void 0===t?void 0:t.toString())||window.location.href}get navigator(){return this.session.navigator}}class oe{constructor(){this.selector="[data-turbo-temporary]",this.deprecatedSelector="[data-turbo-cache=false]",this.started=!1,this.removeTemporaryElements=e=>{for(const e of this.temporaryElements)e.remove()}}start(){this.started||(this.started=!0,addEventListener("turbo:before-cache",this.removeTemporaryElements,!1))}stop(){this.started&&(this.started=!1,removeEventListener("turbo:before-cache",this.removeTemporaryElements,!1))}get temporaryElements(){return[...document.querySelectorAll(this.selector),...this.temporaryElementsWithDeprecation]}get temporaryElementsWithDeprecation(){const e=document.querySelectorAll(this.deprecatedSelector);return e.length&&console.warn(`The ${this.deprecatedSelector} selector is deprecated and will be removed in a future version. Use ${this.selector} instead.`),[...e]}}class ae{constructor(e,t){this.session=e,this.element=t,this.linkInterceptor=new V(this,t),this.formSubmitObserver=new $(this,t)}start(){this.linkInterceptor.start(),this.formSubmitObserver.start()}stop(){this.linkInterceptor.stop(),this.formSubmitObserver.stop()}shouldInterceptLinkClick(e,t,n){return this.shouldRedirect(e)}linkClickIntercepted(e,t,n){const i=this.findFrameElement(e);i&&i.delegate.linkClickIntercepted(e,t,n)}willSubmitForm(e,t){return null==e.closest("turbo-frame")&&this.shouldSubmit(e,t)&&this.shouldRedirect(e,t)}formSubmitted(e,t){const n=this.findFrameElement(e,t);n&&n.delegate.formSubmitted(e,t)}shouldSubmit(e,t){var n;const i=p(e,t),r=this.element.ownerDocument.querySelector('meta[name="turbo-root"]'),s=u(null!==(n=null==r?void 0:r.content)&&void 0!==n?n:"/");return this.shouldRedirect(e,t)&&m(i,s)}shouldRedirect(e,t){if(e instanceof HTMLFormElement?this.session.submissionIsNavigatable(e,t):this.session.elementIsNavigatable(e)){const n=this.findFrameElement(e,t);return!!n&&n!=e.closest("turbo-frame")}return!1}findFrameElement(e,t){const n=(null==t?void 0:t.getAttribute("data-turbo-frame"))||e.getAttribute("data-turbo-frame");if(n&&"_top"!=n){const e=this.element.querySelector(`#${n}:not([disabled])`);if(e instanceof h)return e}}}class le{constructor(e){this.restorationIdentifier=S(),this.restorationData={},this.started=!1,this.pageLoaded=!1,this.onPopState=e=>{if(this.shouldHandlePopState()){const{turbo:t}=e.state||{};if(t){this.location=new URL(window.location.href);const{restorationIdentifier:e}=t;this.restorationIdentifier=e,this.delegate.historyPoppedToLocationWithRestorationIdentifier(this.location,e)}}},this.onPageLoad=async e=>{await Promise.resolve(),this.pageLoaded=!0},this.delegate=e}start(){this.started||(addEventListener("popstate",this.onPopState,!1),addEventListener("load",this.onPageLoad,!1),this.started=!0,this.replace(new URL(window.location.href)))}stop(){this.started&&(removeEventListener("popstate",this.onPopState,!1),removeEventListener("load",this.onPageLoad,!1),this.started=!1)}push(e,t){this.update(history.pushState,e,t)}replace(e,t){this.update(history.replaceState,e,t)}update(e,t,n=S()){const i={turbo:{restorationIdentifier:n}};e.call(history,i,"",t.href),this.location=t,this.restorationIdentifier=n}getRestorationDataForIdentifier(e){return this.restorationData[e]||{}}updateRestorationData(e){const{restorationIdentifier:t}=this,n=this.restorationData[t];this.restorationData[t]=Object.assign(Object.assign({},n),e)}assumeControlOfScrollRestoration(){var e;this.previousScrollRestoration||(this.previousScrollRestoration=null!==(e=history.scrollRestoration)&&void 0!==e?e:"auto",history.scrollRestoration="manual")}relinquishControlOfScrollRestoration(){this.previousScrollRestoration&&(history.scrollRestoration=this.previousScrollRestoration,delete this.previousScrollRestoration)}shouldHandlePopState(){return this.pageIsLoaded()}pageIsLoaded(){return this.pageLoaded||"complete"==document.readyState}}class ce{constructor(e){this.delegate=e}proposeVisit(e,t={}){this.delegate.allowsVisitingLocationWithAction(e,t.action)&&(m(e,this.view.snapshot.rootLocation)?this.delegate.visitProposedToLocation(e,t):window.location.href=e.toString())}startVisit(e,t,n={}){this.stop(),this.currentVisit=new ie(this,u(e),t,Object.assign({referrer:this.location},n)),this.currentVisit.start()}submitForm(e,t){this.stop(),this.formSubmission=new N(this,e,t,!0),this.formSubmission.start()}stop(){this.formSubmission&&(this.formSubmission.stop(),delete this.formSubmission),this.currentVisit&&(this.currentVisit.cancel(),delete this.currentVisit)}get adapter(){return this.delegate.adapter}get view(){return this.delegate.view}get history(){return this.delegate.history}formSubmissionStarted(e){"function"==typeof this.adapter.formSubmissionStarted&&this.adapter.formSubmissionStarted(e)}async formSubmissionSucceededWithResponse(e,t){if(e==this.formSubmission){const n=await t.responseHTML;if(n){const i=e.isSafe;i||this.view.clearSnapshotCache();const{statusCode:r,redirected:s}=t,o={action:this.getActionForFormSubmission(e),shouldCacheSnapshot:i,response:{statusCode:r,responseHTML:n,redirected:s}};this.proposeVisit(t.location,o)}}}async formSubmissionFailedWithResponse(e,t){const n=await t.responseHTML;if(n){const e=Z.fromHTMLString(n);t.serverError?await this.view.renderError(e,this.currentVisit):await this.view.renderPage(e,!1,!0,this.currentVisit),this.view.scrollToTop(),this.view.clearSnapshotCache()}}formSubmissionErrored(e,t){console.error(t)}formSubmissionFinished(e){"function"==typeof this.adapter.formSubmissionFinished&&this.adapter.formSubmissionFinished(e)}visitStarted(e){this.delegate.visitStarted(e)}visitCompleted(e){this.delegate.visitCompleted(e)}locationWithActionIsSamePage(e,t){const n=d(e),i=d(this.view.lastRenderedLocation),r="restore"===t&&void 0===n;return"replace"!==t&&f(e)===f(this.view.lastRenderedLocation)&&(r||null!=n&&n!==i)}visitScrolledToSamePageLocation(e,t){this.delegate.visitScrolledToSamePageLocation(e,t)}get location(){return this.history.location}get restorationIdentifier(){return this.history.restorationIdentifier}getActionForFormSubmission({submitter:e,formElement:t}){return x(e,t)||"advance"}}!function(e){e[e.initial=0]="initial",e[e.loading=1]="loading",e[e.interactive=2]="interactive",e[e.complete=3]="complete"}(ne||(ne={}));class he{constructor(e){this.stage=ne.initial,this.started=!1,this.interpretReadyState=()=>{const{readyState:e}=this;"interactive"==e?this.pageIsInteractive():"complete"==e&&this.pageIsComplete()},this.pageWillUnload=()=>{this.delegate.pageWillUnload()},this.delegate=e}start(){this.started||(this.stage==ne.initial&&(this.stage=ne.loading),document.addEventListener("readystatechange",this.interpretReadyState,!1),addEventListener("pagehide",this.pageWillUnload,!1),this.started=!0)}stop(){this.started&&(document.removeEventListener("readystatechange",this.interpretReadyState,!1),removeEventListener("pagehide",this.pageWillUnload,!1),this.started=!1)}pageIsInteractive(){this.stage==ne.loading&&(this.stage=ne.interactive,this.delegate.pageBecameInteractive())}pageIsComplete(){this.pageIsInteractive(),this.stage==ne.interactive&&(this.stage=ne.complete,this.delegate.pageLoaded())}get readyState(){return document.readyState}}class ue{constructor(e){this.started=!1,this.onScroll=()=>{this.updatePosition({x:window.pageXOffset,y:window.pageYOffset})},this.delegate=e}start(){this.started||(addEventListener("scroll",this.onScroll,!1),this.onScroll(),this.started=!0)}stop(){this.started&&(removeEventListener("scroll",this.onScroll,!1),this.started=!1)}updatePosition(e){this.delegate.scrollPositionChanged(e)}}class de{render({fragment:e}){U.preservingPermanentElements(this,function(e){const t=B(document.documentElement),n={};for(const i of t){const{id:t}=i;for(const r of e.querySelectorAll("turbo-stream")){const e=j(r.templateElement.content,t);e&&(n[t]=[i,e])}}return n}(e),(()=>document.documentElement.appendChild(e)))}enteringBardo(e,t){t.replaceWith(e.cloneNode(!0))}leavingBardo(){}}class pe{constructor(e){this.sources=new Set,this.started=!1,this.inspectFetchResponse=e=>{const t=function(e){var t;const n=null===(t=e.detail)||void 0===t?void 0:t.fetchResponse;if(n instanceof v)return n}(e);t&&function(e){var t;return(null!==(t=e.contentType)&&void 0!==t?t:"").startsWith(I.contentType)}(t)&&(e.preventDefault(),this.receiveMessageResponse(t))},this.receiveMessageEvent=e=>{this.started&&"string"==typeof e.data&&this.receiveMessageHTML(e.data)},this.delegate=e}start(){this.started||(this.started=!0,addEventListener("turbo:before-fetch-response",this.inspectFetchResponse,!1))}stop(){this.started&&(this.started=!1,removeEventListener("turbo:before-fetch-response",this.inspectFetchResponse,!1))}connectStreamSource(e){this.streamSourceIsConnected(e)||(this.sources.add(e),e.addEventListener("message",this.receiveMessageEvent,!1))}disconnectStreamSource(e){this.streamSourceIsConnected(e)&&(this.sources.delete(e),e.removeEventListener("message",this.receiveMessageEvent,!1))}streamSourceIsConnected(e){return this.sources.has(e)}async receiveMessageResponse(e){const t=await e.responseHTML;t&&this.receiveMessageHTML(t)}receiveMessageHTML(e){this.delegate.receivedMessageFromStream(I.wrap(e))}}class me extends K{static renderElement(e,t){const{documentElement:n,body:i}=document;n.replaceChild(t,i)}async render(){this.replaceHeadAndBody(),this.activateScriptElements()}replaceHeadAndBody(){const{documentElement:e,head:t}=document;e.replaceChild(this.newHead,t),this.renderElement(this.currentElement,this.newElement)}activateScriptElements(){for(const e of this.scriptElements){const t=e.parentNode;if(t){const n=b(e);t.replaceChild(n,e)}}}get newHead(){return this.newSnapshot.headSnapshot.element}get scriptElements(){return document.documentElement.querySelectorAll("script")}}class fe extends K{static renderElement(e,t){document.body&&t instanceof HTMLBodyElement?document.body.replaceWith(t):document.documentElement.appendChild(t)}get shouldRender(){return this.newSnapshot.isVisitable&&this.trackedElementsAreIdentical}get reloadReason(){return this.newSnapshot.isVisitable?this.trackedElementsAreIdentical?void 0:{reason:"tracked_element_mismatch"}:{reason:"turbo_visit_control_is_reload"}}async prepareToRender(){await this.mergeHead()}async render(){this.willRender&&await this.replaceBody()}finishRendering(){super.finishRendering(),this.isPreview||this.focusFirstAutofocusableElement()}get currentHeadSnapshot(){return this.currentSnapshot.headSnapshot}get newHeadSnapshot(){return this.newSnapshot.headSnapshot}get newElement(){return this.newSnapshot.element}async mergeHead(){const e=this.mergeProvisionalElements(),t=this.copyNewHeadStylesheetElements();this.copyNewHeadScriptElements(),await e,await t}async replaceBody(){await this.preservingPermanentElements((async()=>{this.activateNewBody(),await this.assignNewBody()}))}get trackedElementsAreIdentical(){return this.currentHeadSnapshot.trackedElementSignature==this.newHeadSnapshot.trackedElementSignature}async copyNewHeadStylesheetElements(){const e=[];for(const t of this.newHeadStylesheetElements)e.push(k(t)),document.head.appendChild(t);await Promise.all(e)}copyNewHeadScriptElements(){for(const e of this.newHeadScriptElements)document.head.appendChild(b(e))}async mergeProvisionalElements(){const e=[...this.newHeadProvisionalElements];for(const t of this.currentHeadProvisionalElements)this.isCurrentElementInElementList(t,e)||document.head.removeChild(t);for(const t of e)document.head.appendChild(t)}isCurrentElementInElementList(e,t){for(const[n,i]of t.entries()){if("TITLE"==e.tagName){if("TITLE"!=i.tagName)continue;if(e.innerHTML==i.innerHTML)return t.splice(n,1),!0}if(i.isEqualNode(e))return t.splice(n,1),!0}return!1}removeCurrentHeadProvisionalElements(){for(const e of this.currentHeadProvisionalElements)document.head.removeChild(e)}copyNewHeadProvisionalElements(){for(const e of this.newHeadProvisionalElements)document.head.appendChild(e)}activateNewBody(){document.adoptNode(this.newElement),this.activateNewBodyScriptElements()}activateNewBodyScriptElements(){for(const e of this.newBodyScriptElements){const t=b(e);e.replaceWith(t)}}async assignNewBody(){await this.renderElement(this.currentElement,this.newElement)}get newHeadStylesheetElements(){return this.newHeadSnapshot.getStylesheetElementsNotInSnapshot(this.currentHeadSnapshot)}get newHeadScriptElements(){return this.newHeadSnapshot.getScriptElementsNotInSnapshot(this.currentHeadSnapshot)}get currentHeadProvisionalElements(){return this.currentHeadSnapshot.provisionalElements}get newHeadProvisionalElements(){return this.newHeadSnapshot.provisionalElements}get newBodyScriptElements(){return this.newElement.querySelectorAll("script")}}class ge{constructor(e){this.keys=[],this.snapshots={},this.size=e}has(e){return g(e)in this.snapshots}get(e){if(this.has(e)){const t=this.read(e);return this.touch(e),t}}put(e,t){return this.write(e,t),this.touch(e),t}clear(){this.snapshots={}}read(e){return this.snapshots[g(e)]}write(e,t){this.snapshots[g(e)]=t}touch(e){const t=g(e),n=this.keys.indexOf(t);n>-1&&this.keys.splice(n,1),this.keys.unshift(t),this.trim()}trim(){for(const e of this.keys.splice(this.size))delete this.snapshots[e]}}class ve extends q{constructor(){super(...arguments),this.snapshotCache=new ge(10),this.lastRenderedLocation=new URL(location.href),this.forceReloaded=!1}renderPage(e,t=!1,n=!0,i){const r=new fe(this.snapshot,e,fe.renderElement,t,n);return r.shouldRender?null==i||i.changeHistory():this.forceReloaded=!0,this.render(r)}renderError(e,t){null==t||t.changeHistory();const n=new me(this.snapshot,e,me.renderElement,!1);return this.render(n)}clearSnapshotCache(){this.snapshotCache.clear()}async cacheSnapshot(e=this.snapshot){if(e.isCacheable){this.delegate.viewWillCacheSnapshot();const{lastRenderedLocation:t}=this;await new Promise((e=>setTimeout((()=>e()),0)));const n=e.clone();return this.snapshotCache.put(t,n),n}}getCachedSnapshotForLocation(e){return this.snapshotCache.get(e)}get snapshot(){return Z.fromElement(this.element)}}class be{constructor(e){this.selector="a[data-turbo-preload]",this.delegate=e}get snapshotCache(){return this.delegate.navigator.view.snapshotCache}start(){if("loading"===document.readyState)return document.addEventListener("DOMContentLoaded",(()=>{this.preloadOnLoadLinksForView(document.body)}));this.preloadOnLoadLinksForView(document.body)}preloadOnLoadLinksForView(e){for(const t of e.querySelectorAll(this.selector))this.preloadURL(t)}async preloadURL(e){const t=new URL(e.href);if(!this.snapshotCache.has(t))try{const e=await fetch(t.toString(),{headers:{"VND.PREFETCH":"true",Accept:"text/html"}}),n=await e.text(),i=Z.fromHTMLString(n);this.snapshotCache.put(t,i)}catch(e){}}}function ye(e){Object.defineProperties(e,we)}const we={absoluteURL:{get(){return this.toString()}}},_e={after(){this.targetElements.forEach((e=>{var t;return null===(t=e.parentElement)||void 0===t?void 0:t.insertBefore(this.templateContent,e.nextSibling)}))},append(){this.removeDuplicateTargetChildren(),this.targetElements.forEach((e=>e.append(this.templateContent)))},before(){this.targetElements.forEach((e=>{var t;return null===(t=e.parentElement)||void 0===t?void 0:t.insertBefore(this.templateContent,e)}))},prepend(){this.removeDuplicateTargetChildren(),this.targetElements.forEach((e=>e.prepend(this.templateContent)))},remove(){this.targetElements.forEach((e=>e.remove()))},replace(){this.targetElements.forEach((e=>e.replaceWith(this.templateContent)))},update(){this.targetElements.forEach((e=>{e.innerHTML="",e.append(this.templateContent)}))}},Ee=new class{constructor(){this.navigator=new ce(this),this.history=new le(this),this.preloader=new be(this),this.view=new ve(this,document.documentElement),this.adapter=new se(this),this.pageObserver=new he(this),this.cacheObserver=new oe,this.linkClickObserver=new W(this,window),this.formSubmitObserver=new $(this,document),this.scrollObserver=new ue(this),this.streamObserver=new pe(this),this.formLinkClickObserver=new z(this,document.documentElement),this.frameRedirector=new ae(this,document.documentElement),this.streamMessageRenderer=new de,this.drive=!0,this.enabled=!0,this.progressBarDelay=500,this.started=!1,this.formMode="on"}start(){this.started||(this.pageObserver.start(),this.cacheObserver.start(),this.formLinkClickObserver.start(),this.linkClickObserver.start(),this.formSubmitObserver.start(),this.scrollObserver.start(),this.streamObserver.start(),this.frameRedirector.start(),this.history.start(),this.preloader.start(),this.started=!0,this.enabled=!0)}disable(){this.enabled=!1}stop(){this.started&&(this.pageObserver.stop(),this.cacheObserver.stop(),this.formLinkClickObserver.stop(),this.linkClickObserver.stop(),this.formSubmitObserver.stop(),this.scrollObserver.stop(),this.streamObserver.stop(),this.frameRedirector.stop(),this.history.stop(),this.started=!1)}registerAdapter(e){this.adapter=e}visit(e,t={}){const n=t.frame?document.getElementById(t.frame):null;n instanceof h?(n.src=e.toString(),n.loaded):this.navigator.proposeVisit(u(e),t)}connectStreamSource(e){this.streamObserver.connectStreamSource(e)}disconnectStreamSource(e){this.streamObserver.disconnectStreamSource(e)}renderStreamMessage(e){this.streamMessageRenderer.render(I.wrap(e))}clearCache(){this.view.clearSnapshotCache()}setProgressBarDelay(e){this.progressBarDelay=e}setFormMode(e){this.formMode=e}get location(){return this.history.location}get restorationIdentifier(){return this.history.restorationIdentifier}historyPoppedToLocationWithRestorationIdentifier(e,t){this.enabled?this.navigator.startVisit(e,t,{action:"restore",historyChanged:!0}):this.adapter.pageInvalidated({reason:"turbo_disabled"})}scrollPositionChanged(e){this.history.updateRestorationData({scrollPosition:e})}willSubmitFormLinkToLocation(e,t){return this.elementIsNavigatable(e)&&m(t,this.snapshot.rootLocation)}submittedFormLinkToLocation(){}willFollowLinkToLocation(e,t,n){return this.elementIsNavigatable(e)&&m(t,this.snapshot.rootLocation)&&this.applicationAllowsFollowingLinkToLocation(e,t,n)}followedLinkToLocation(e,t){const n=this.getActionForLink(e),i=e.hasAttribute("data-turbo-stream");this.visit(t.href,{action:n,acceptsStreamResponse:i})}allowsVisitingLocationWithAction(e,t){return this.locationWithActionIsSamePage(e,t)||this.applicationAllowsVisitingLocation(e)}visitProposedToLocation(e,t){ye(e),this.adapter.visitProposedToLocation(e,t)}visitStarted(e){e.acceptsStreamResponse||C(document.documentElement),ye(e.location),e.silent||this.notifyApplicationAfterVisitingLocation(e.location,e.action)}visitCompleted(e){T(document.documentElement),this.notifyApplicationAfterPageLoad(e.getTimingMetrics())}locationWithActionIsSamePage(e,t){return this.navigator.locationWithActionIsSamePage(e,t)}visitScrolledToSamePageLocation(e,t){this.notifyApplicationAfterVisitingSamePageLocation(e,t)}willSubmitForm(e,t){const n=p(e,t);return this.submissionIsNavigatable(e,t)&&m(u(n),this.snapshot.rootLocation)}formSubmitted(e,t){this.navigator.submitForm(e,t)}pageBecameInteractive(){this.view.lastRenderedLocation=this.location,this.notifyApplicationAfterPageLoad()}pageLoaded(){this.history.assumeControlOfScrollRestoration()}pageWillUnload(){this.history.relinquishControlOfScrollRestoration()}receivedMessageFromStream(e){this.renderStreamMessage(e)}viewWillCacheSnapshot(){var e;(null===(e=this.navigator.currentVisit)||void 0===e?void 0:e.silent)||this.notifyApplicationBeforeCachingSnapshot()}allowsImmediateRender({element:e},t){const n=this.notifyApplicationBeforeRender(e,t),{defaultPrevented:i,detail:{render:r}}=n;return this.view.renderer&&r&&(this.view.renderer.renderElement=r),!i}viewRenderedSnapshot(e,t){this.view.lastRenderedLocation=this.history.location,this.notifyApplicationAfterRender()}preloadOnLoadLinksForView(e){this.preloader.preloadOnLoadLinksForView(e)}viewInvalidated(e){this.adapter.pageInvalidated(e)}frameLoaded(e){this.notifyApplicationAfterFrameLoad(e)}frameRendered(e,t){this.notifyApplicationAfterFrameRender(e,t)}applicationAllowsFollowingLinkToLocation(e,t,n){return!this.notifyApplicationAfterClickingLinkToLocation(e,t,n).defaultPrevented}applicationAllowsVisitingLocation(e){return!this.notifyApplicationBeforeVisitingLocation(e).defaultPrevented}notifyApplicationAfterClickingLinkToLocation(e,t,n){return y("turbo:click",{target:e,detail:{url:t.href,originalEvent:n},cancelable:!0})}notifyApplicationBeforeVisitingLocation(e){return y("turbo:before-visit",{detail:{url:e.href},cancelable:!0})}notifyApplicationAfterVisitingLocation(e,t){return y("turbo:visit",{detail:{url:e.href,action:t}})}notifyApplicationBeforeCachingSnapshot(){return y("turbo:before-cache")}notifyApplicationBeforeRender(e,t){return y("turbo:before-render",{detail:Object.assign({newBody:e},t),cancelable:!0})}notifyApplicationAfterRender(){return y("turbo:render")}notifyApplicationAfterPageLoad(e={}){return y("turbo:load",{detail:{url:this.location.href,timing:e}})}notifyApplicationAfterVisitingSamePageLocation(e,t){dispatchEvent(new HashChangeEvent("hashchange",{oldURL:e.toString(),newURL:t.toString()}))}notifyApplicationAfterFrameLoad(e){return y("turbo:frame-load",{target:e})}notifyApplicationAfterFrameRender(e,t){return y("turbo:frame-render",{detail:{fetchResponse:e},target:t,cancelable:!0})}submissionIsNavigatable(e,t){if("off"==this.formMode)return!1;{const n=!t||this.elementIsNavigatable(t);return"optin"==this.formMode?n&&null!=e.closest('[data-turbo="true"]'):n&&this.elementIsNavigatable(e)}}elementIsNavigatable(e){const t=P(e,"[data-turbo]"),n=P(e,"turbo-frame");return this.drive||n?!t||"false"!=t.getAttribute("data-turbo"):!!t&&"true"==t.getAttribute("data-turbo")}getActionForLink(e){return x(e)||"advance"}get snapshot(){return this.view.snapshot}},Se=new class{constructor(e){this.session=e}clear(){this.session.clearCache()}resetCacheControl(){this.setCacheControl("")}exemptPageFromCache(){this.setCacheControl("no-cache")}exemptPageFromPreview(){this.setCacheControl("no-preview")}setCacheControl(e){!function(e,t){let n=L(e);n||(n=document.createElement("meta"),n.setAttribute("name",e),document.head.appendChild(n)),n.setAttribute("content",t)}("turbo-cache-control",e)}}(Ee),{navigator:Ae}=Ee;function Ce(){Ee.start()}function Te(e){Ee.connectStreamSource(e)}function ke(e){Ee.disconnectStreamSource(e)}var Oe=Object.freeze({__proto__:null,navigator:Ae,session:Ee,cache:Se,PageRenderer:fe,PageSnapshot:Z,FrameRenderer:G,start:Ce,registerAdapter:function(e){Ee.registerAdapter(e)},visit:function(e,t){Ee.visit(e,t)},connectStreamSource:Te,disconnectStreamSource:ke,renderStreamMessage:function(e){Ee.renderStreamMessage(e)},clearCache:function(){console.warn("Please replace `Turbo.clearCache()` with `Turbo.cache.clear()`. The top-level function is deprecated and will be removed in a future version of Turbo.`"),Ee.clearCache()},setProgressBarDelay:function(e){Ee.setProgressBarDelay(e)},setConfirmMethod:function(e){N.confirmMethod=e},setFormMode:function(e){Ee.setFormMode(e)},StreamActions:_e});class xe extends Error{}function Le(e){if(null!=e){const t=document.getElementById(e);if(t instanceof h)return t}}function Me(e,t){if(e){const n=e.getAttribute("src");if(null!=n&&null!=t&&function(e,t){return u(e).href==u(t).href}(n,t))throw new Error(`Matching <turbo-frame id="${e.id}"> element has a source URL which references itself`);if(e.ownerDocument!==document&&(e=document.importNode(e,!0)),e instanceof h)return e.connectedCallback(),e.disconnectedCallback(),e}}class Pe extends HTMLElement{static async renderElement(e){await e.performAction()}async connectedCallback(){try{await this.render()}catch(e){console.error(e)}finally{this.disconnect()}}async render(){var e;return null!==(e=this.renderPromise)&&void 0!==e?e:this.renderPromise=(async()=>{const e=this.beforeRenderEvent;this.dispatchEvent(e)&&(await w(),await e.detail.render(this))})()}disconnect(){try{this.remove()}catch(e){}}removeDuplicateTargetChildren(){this.duplicateChildren.forEach((e=>e.remove()))}get duplicateChildren(){var e;const t=this.targetElements.flatMap((e=>[...e.children])).filter((e=>!!e.id)),n=[...(null===(e=this.templateContent)||void 0===e?void 0:e.children)||[]].filter((e=>!!e.id)).map((e=>e.id));return t.filter((e=>n.includes(e.id)))}get performAction(){if(this.action){const e=_e[this.action];if(e)return e;this.raise("unknown action")}this.raise("action attribute is missing")}get targetElements(){return this.target?this.targetElementsById:this.targets?this.targetElementsByQuery:void this.raise("target or targets attribute is missing")}get templateContent(){return this.templateElement.content.cloneNode(!0)}get templateElement(){if(null===this.firstElementChild){const e=this.ownerDocument.createElement("template");return this.appendChild(e),e}if(this.firstElementChild instanceof HTMLTemplateElement)return this.firstElementChild;this.raise("first child element must be a <template> element")}get action(){return this.getAttribute("action")}get target(){return this.getAttribute("target")}get targets(){return this.getAttribute("targets")}raise(e){throw new Error(`${this.description}: ${e}`)}get description(){var e,t;return null!==(t=(null!==(e=this.outerHTML.match(/<[^>]+>/))&&void 0!==e?e:[])[0])&&void 0!==t?t:"<turbo-stream>"}get beforeRenderEvent(){return new CustomEvent("turbo:before-stream-render",{bubbles:!0,cancelable:!0,detail:{newStream:this,render:Pe.renderElement}})}get targetElementsById(){var e;const t=null===(e=this.ownerDocument)||void 0===e?void 0:e.getElementById(this.target);return null!==t?[t]:[]}get targetElementsByQuery(){var e;const t=null===(e=this.ownerDocument)||void 0===e?void 0:e.querySelectorAll(this.targets);return 0!==t.length?Array.prototype.slice.call(t):[]}}class Re extends HTMLElement{constructor(){super(...arguments),this.streamSource=null}connectedCallback(){this.streamSource=this.src.match(/^ws{1,2}:/)?new WebSocket(this.src):new EventSource(this.src),Te(this.streamSource)}disconnectedCallback(){this.streamSource&&ke(this.streamSource)}get src(){return this.getAttribute("src")||""}}let De;function Ie(e){return De=e}function Ne(e){return e&&"object"==typeof e?e instanceof Date||e instanceof RegExp?e:Array.isArray(e)?e.map(Ne):Object.keys(e).reduce((function(t,n){return t[n[0].toLowerCase()+n.slice(1).replace(/([A-Z]+)/g,(function(e,t){return"_"+t.toLowerCase()}))]=Ne(e[n]),t}),{}):e}h.delegateConstructor=class{constructor(e){this.fetchResponseLoaded=e=>{},this.currentFetchRequest=null,this.resolveVisitPromise=()=>{},this.connected=!1,this.hasBeenLoaded=!1,this.ignoredAttributes=new Set,this.action=null,this.visitCachedSnapshot=({element:e})=>{const t=e.querySelector("#"+this.element.id);t&&this.previousFrameElement&&t.replaceChildren(...this.previousFrameElement.children),delete this.previousFrameElement},this.element=e,this.view=new H(this,this.element),this.appearanceObserver=new D(this,this.element),this.formLinkClickObserver=new z(this,this.element),this.linkInterceptor=new V(this,this.element),this.restorationIdentifier=S(),this.formSubmitObserver=new $(this,this.element)}connect(){this.connected||(this.connected=!0,this.loadingStyle==r.lazy?this.appearanceObserver.start():this.loadSourceURL(),this.formLinkClickObserver.start(),this.linkInterceptor.start(),this.formSubmitObserver.start())}disconnect(){this.connected&&(this.connected=!1,this.appearanceObserver.stop(),this.formLinkClickObserver.stop(),this.linkInterceptor.stop(),this.formSubmitObserver.stop())}disabledChanged(){this.loadingStyle==r.eager&&this.loadSourceURL()}sourceURLChanged(){this.isIgnoringChangesTo("src")||(this.element.isConnected&&(this.complete=!1),(this.loadingStyle==r.eager||this.hasBeenLoaded)&&this.loadSourceURL())}sourceURLReloaded(){const{src:e}=this.element;return this.ignoringChangesToAttribute("complete",(()=>{this.element.removeAttribute("complete")})),this.element.src=null,this.element.src=e,this.element.loaded}completeChanged(){this.isIgnoringChangesTo("complete")||this.loadSourceURL()}loadingStyleChanged(){this.loadingStyle==r.lazy?this.appearanceObserver.start():(this.appearanceObserver.stop(),this.loadSourceURL())}async loadSourceURL(){this.enabled&&this.isActive&&!this.complete&&this.sourceURL&&(this.element.loaded=this.visit(u(this.sourceURL)),this.appearanceObserver.stop(),await this.element.loaded,this.hasBeenLoaded=!0)}async loadResponse(e){(e.redirected||e.succeeded&&e.isHTML)&&(this.sourceURL=e.response.url);try{const t=await e.responseHTML;if(t){const n=_(t);Z.fromDocument(n).isVisitable?await this.loadFrameResponse(e,n):await this.handleUnvisitableFrameResponse(e)}}finally{this.fetchResponseLoaded=()=>{}}}elementAppearedInViewport(e){this.proposeVisitIfNavigatedWithAction(e,e),this.loadSourceURL()}willSubmitFormLinkToLocation(e){return this.shouldInterceptNavigation(e)}submittedFormLinkToLocation(e,t,n){const i=this.findFrameElement(e);i&&n.setAttribute("data-turbo-frame",i.id)}shouldInterceptLinkClick(e,t,n){return this.shouldInterceptNavigation(e)}linkClickIntercepted(e,t){this.navigateFrame(e,t)}willSubmitForm(e,t){return e.closest("turbo-frame")==this.element&&this.shouldInterceptNavigation(e,t)}formSubmitted(e,t){this.formSubmission&&this.formSubmission.stop(),this.formSubmission=new N(this,e,t);const{fetchRequest:n}=this.formSubmission;this.prepareRequest(n),this.formSubmission.start()}prepareRequest(e){var t;e.headers["Turbo-Frame"]=this.id,(null===(t=this.currentNavigationElement)||void 0===t?void 0:t.hasAttribute("data-turbo-stream"))&&e.acceptResponseType(I.contentType)}requestStarted(e){C(this.element)}requestPreventedHandlingResponse(e,t){this.resolveVisitPromise()}async requestSucceededWithResponse(e,t){await this.loadResponse(t),this.resolveVisitPromise()}async requestFailedWithResponse(e,t){await this.loadResponse(t),this.resolveVisitPromise()}requestErrored(e,t){console.error(t),this.resolveVisitPromise()}requestFinished(e){T(this.element)}formSubmissionStarted({formElement:e}){C(e,this.findFrameElement(e))}formSubmissionSucceededWithResponse(e,t){const n=this.findFrameElement(e.formElement,e.submitter);n.delegate.proposeVisitIfNavigatedWithAction(n,e.formElement,e.submitter),n.delegate.loadResponse(t),e.isSafe||Ee.clearCache()}formSubmissionFailedWithResponse(e,t){this.element.delegate.loadResponse(t),Ee.clearCache()}formSubmissionErrored(e,t){console.error(t)}formSubmissionFinished({formElement:e}){T(e,this.findFrameElement(e))}allowsImmediateRender({element:e},t){const n=y("turbo:before-frame-render",{target:this.element,detail:Object.assign({newFrame:e},t),cancelable:!0}),{defaultPrevented:i,detail:{render:r}}=n;return this.view.renderer&&r&&(this.view.renderer.renderElement=r),!i}viewRenderedSnapshot(e,t){}preloadOnLoadLinksForView(e){Ee.preloadOnLoadLinksForView(e)}viewInvalidated(){}willRenderFrame(e,t){this.previousFrameElement=e.cloneNode(!0)}async loadFrameResponse(e,t){const n=await this.extractForeignFrameElement(t.body);if(n){const t=new F(n),i=new G(this,this.view.snapshot,t,G.renderElement,!1,!1);this.view.renderPromise&&await this.view.renderPromise,this.changeHistory(),await this.view.render(i),this.complete=!0,Ee.frameRendered(e,this.element),Ee.frameLoaded(this.element),this.fetchResponseLoaded(e)}else this.willHandleFrameMissingFromResponse(e)&&this.handleFrameMissingFromResponse(e)}async visit(e){var t;const n=new R(this,s.get,e,new URLSearchParams,this.element);return null===(t=this.currentFetchRequest)||void 0===t||t.cancel(),this.currentFetchRequest=n,new Promise((e=>{this.resolveVisitPromise=()=>{this.resolveVisitPromise=()=>{},this.currentFetchRequest=null,e()},n.perform()}))}navigateFrame(e,t,n){const i=this.findFrameElement(e,n);i.delegate.proposeVisitIfNavigatedWithAction(i,e,n),this.withCurrentNavigationElement(e,(()=>{i.src=t}))}proposeVisitIfNavigatedWithAction(e,t,n){if(this.action=x(n,t,e),this.action){const t=Z.fromElement(e).clone(),{visitCachedSnapshot:n}=e.delegate;e.delegate.fetchResponseLoaded=i=>{if(e.src){const{statusCode:r,redirected:s}=i,o={response:{statusCode:r,redirected:s,responseHTML:e.ownerDocument.documentElement.outerHTML},visitCachedSnapshot:n,willRender:!1,updateHistory:!1,restorationIdentifier:this.restorationIdentifier,snapshot:t};this.action&&(o.action=this.action),Ee.visit(e.src,o)}}}}changeHistory(){if(this.action){const e=O(this.action);Ee.history.update(e,u(this.element.src||""),this.restorationIdentifier)}}async handleUnvisitableFrameResponse(e){console.warn(`The response (${e.statusCode}) from <turbo-frame id="${this.element.id}"> is performing a full page visit due to turbo-visit-control.`),await this.visitResponse(e.response)}willHandleFrameMissingFromResponse(e){this.element.setAttribute("complete","");const t=e.response;return!y("turbo:frame-missing",{target:this.element,detail:{response:t,visit:async(e,t={})=>{e instanceof Response?this.visitResponse(e):Ee.visit(e,t)}},cancelable:!0}).defaultPrevented}handleFrameMissingFromResponse(e){this.view.missing(),this.throwFrameMissingError(e)}throwFrameMissingError(e){const t=`The response (${e.statusCode}) did not contain the expected <turbo-frame id="${this.element.id}"> and will be ignored. To perform a full page visit instead, set turbo-visit-control to reload.`;throw new xe(t)}async visitResponse(e){const t=new v(e),n=await t.responseHTML,{location:i,redirected:r,statusCode:s}=t;return Ee.visit(i,{response:{redirected:r,statusCode:s,responseHTML:n}})}findFrameElement(e,t){var n;return null!==(n=Le(A("data-turbo-frame",t,e)||this.element.getAttribute("target")))&&void 0!==n?n:this.element}async extractForeignFrameElement(e){let t;const n=CSS.escape(this.id);try{if(t=Me(e.querySelector(`turbo-frame#${n}`),this.sourceURL),t)return t;if(t=Me(e.querySelector(`turbo-frame[src][recurse~=${n}]`),this.sourceURL),t)return await t.loaded,await this.extractForeignFrameElement(t)}catch(e){return console.error(e),new h}return null}formActionIsVisitable(e,t){return m(u(p(e,t)),this.rootLocation)}shouldInterceptNavigation(e,t){const n=A("data-turbo-frame",t,e)||this.element.getAttribute("target");if(e instanceof HTMLFormElement&&!this.formActionIsVisitable(e,t))return!1;if(!this.enabled||"_top"==n)return!1;if(n){const e=Le(n);if(e)return!e.disabled}return!(!Ee.elementIsNavigatable(e)||t&&!Ee.elementIsNavigatable(t))}get id(){return this.element.id}get enabled(){return!this.element.disabled}get sourceURL(){if(this.element.src)return this.element.src}set sourceURL(e){this.ignoringChangesToAttribute("src",(()=>{this.element.src=null!=e?e:null}))}get loadingStyle(){return this.element.loading}get isLoading(){return void 0!==this.formSubmission||void 0!==this.resolveVisitPromise()}get complete(){return this.element.hasAttribute("complete")}set complete(e){this.ignoringChangesToAttribute("complete",(()=>{e?this.element.setAttribute("complete",""):this.element.removeAttribute("complete")}))}get isActive(){return this.element.isActive&&this.connected}get rootLocation(){var e;const t=this.element.ownerDocument.querySelector('meta[name="turbo-root"]');return u(null!==(e=null==t?void 0:t.content)&&void 0!==e?e:"/")}isIgnoringChangesTo(e){return this.ignoredAttributes.has(e)}ignoringChangesToAttribute(e,t){this.ignoredAttributes.add(e),t(),this.ignoredAttributes.delete(e)}withCurrentNavigationElement(e,t){this.currentNavigationElement=e,t(),delete this.currentNavigationElement}},void 0===customElements.get("turbo-frame")&&customElements.define("turbo-frame",h),void 0===customElements.get("turbo-stream")&&customElements.define("turbo-stream",Pe),void 0===customElements.get("turbo-stream-source")&&customElements.define("turbo-stream-source",Re),(()=>{let e=document.currentScript;if(e&&!e.hasAttribute("data-turbo-suppress-warning"))for(e=e.parentElement;e;){if(e==document.body)return console.warn(E`
        You are loading Turbo from a <script> element inside the <body> element. This is probably not what you meant to do!

        Load your application’s JavaScript bundle inside the <head> element instead. <script> elements in <body> are evaluated with each page change.

        For more information, see: https://turbo.hotwired.dev/handbook/building#working-with-script-elements

        ——
        Suppress this warning by adding a "data-turbo-suppress-warning" attribute to: %s
      `,e.outerHTML);e=e.parentElement}})(),window.Turbo=Oe,Ce();class Fe extends HTMLElement{async connectedCallback(){Te(this),this.subscription=await async function(e,t){const{subscriptions:i}=await async function(){return De||Ie(async function(){const{createConsumer:e}=await Promise.resolve().then(n.bind(n,245));return e()}().then(Ie))}();return i.create(e,t)}(this.channel,{received:this.dispatchMessageEvent.bind(this),connected:this.subscriptionConnected.bind(this),disconnected:this.subscriptionDisconnected.bind(this)})}disconnectedCallback(){ke(this),this.subscription&&this.subscription.unsubscribe()}dispatchMessageEvent(e){const t=new MessageEvent("message",{data:e});return this.dispatchEvent(t)}subscriptionConnected(){this.setAttribute("connected","")}subscriptionDisconnected(){this.removeAttribute("connected")}get channel(){return{channel:this.getAttribute("channel"),signed_stream_name:this.getAttribute("signed-stream-name"),...Ne({...this.dataset})}}}void 0===customElements.get("turbo-cable-stream-source")&&customElements.define("turbo-cable-stream-source",Fe),addEventListener("turbo:before-fetch-request",(function(e){if(e.target instanceof HTMLFormElement){const{target:t,detail:{fetchOptions:n}}=e;t.addEventListener("turbo:submit-start",(({detail:{formSubmission:{submitter:e}}})=>{const i=function(e){return e instanceof FormData||e instanceof URLSearchParams}(n.body)?n.body:new URLSearchParams,r=function(e,t,n){const i=function(e){return(e instanceof HTMLButtonElement||e instanceof HTMLInputElement)&&e.hasAttribute("formmethod")?e.formMethod:null}(e),r=t.get("_method"),s=n.getAttribute("method")||"get";return"string"==typeof i?i:"string"==typeof r?r:s}(e,i,t);/get/i.test(r)||(/post/i.test(r)?i.delete("_method"):i.set("_method",r),n.method="post")}),{once:!0})}}));class je{constructor(e,t,n){this.eventTarget=e,this.eventName=t,this.eventOptions=n,this.unorderedBindings=new Set}connect(){this.eventTarget.addEventListener(this.eventName,this,this.eventOptions)}disconnect(){this.eventTarget.removeEventListener(this.eventName,this,this.eventOptions)}bindingConnected(e){this.unorderedBindings.add(e)}bindingDisconnected(e){this.unorderedBindings.delete(e)}handleEvent(e){const t=function(e){if("immediatePropagationStopped"in e)return e;{const{stopImmediatePropagation:t}=e;return Object.assign(e,{immediatePropagationStopped:!1,stopImmediatePropagation(){this.immediatePropagationStopped=!0,t.call(this)}})}}(e);for(const e of this.bindings){if(t.immediatePropagationStopped)break;e.handleEvent(t)}}hasBindings(){return this.unorderedBindings.size>0}get bindings(){return Array.from(this.unorderedBindings).sort(((e,t)=>{const n=e.index,i=t.index;return n<i?-1:n>i?1:0}))}}class Be{constructor(e){this.application=e,this.eventListenerMaps=new Map,this.started=!1}start(){this.started||(this.started=!0,this.eventListeners.forEach((e=>e.connect())))}stop(){this.started&&(this.started=!1,this.eventListeners.forEach((e=>e.disconnect())))}get eventListeners(){return Array.from(this.eventListenerMaps.values()).reduce(((e,t)=>e.concat(Array.from(t.values()))),[])}bindingConnected(e){this.fetchEventListenerForBinding(e).bindingConnected(e)}bindingDisconnected(e,t=!1){this.fetchEventListenerForBinding(e).bindingDisconnected(e),t&&this.clearEventListenersForBinding(e)}handleError(e,t,n={}){this.application.handleError(e,`Error ${t}`,n)}clearEventListenersForBinding(e){const t=this.fetchEventListenerForBinding(e);t.hasBindings()||(t.disconnect(),this.removeMappedEventListenerFor(e))}removeMappedEventListenerFor(e){const{eventTarget:t,eventName:n,eventOptions:i}=e,r=this.fetchEventListenerMapForEventTarget(t),s=this.cacheKey(n,i);r.delete(s),0==r.size&&this.eventListenerMaps.delete(t)}fetchEventListenerForBinding(e){const{eventTarget:t,eventName:n,eventOptions:i}=e;return this.fetchEventListener(t,n,i)}fetchEventListener(e,t,n){const i=this.fetchEventListenerMapForEventTarget(e),r=this.cacheKey(t,n);let s=i.get(r);return s||(s=this.createEventListener(e,t,n),i.set(r,s)),s}createEventListener(e,t,n){const i=new je(e,t,n);return this.started&&i.connect(),i}fetchEventListenerMapForEventTarget(e){let t=this.eventListenerMaps.get(e);return t||(t=new Map,this.eventListenerMaps.set(e,t)),t}cacheKey(e,t){const n=[e];return Object.keys(t).sort().forEach((e=>{n.push(`${t[e]?"":"!"}${e}`)})),n.join(":")}}const $e={stop:({event:e,value:t})=>(t&&e.stopPropagation(),!0),prevent:({event:e,value:t})=>(t&&e.preventDefault(),!0),self:({event:e,value:t,element:n})=>!t||n===e.target},qe=/^(?:(.+?)(?:\.(.+?))?(?:@(window|document))?->)?(.+?)(?:#([^:]+?))(?::(.+))?$/;function He(e){return e.replace(/(?:[_-])([a-z0-9])/g,((e,t)=>t.toUpperCase()))}function Ve(e){return He(e.replace(/--/g,"-").replace(/__/g,"_"))}function We(e){return e.charAt(0).toUpperCase()+e.slice(1)}function ze(e){return e.replace(/([A-Z])/g,((e,t)=>`-${t.toLowerCase()}`))}class Ue{constructor(e,t,n,i){this.element=e,this.index=t,this.eventTarget=n.eventTarget||e,this.eventName=n.eventName||function(e){const t=e.tagName.toLowerCase();if(t in Ke)return Ke[t](e)}(e)||Ge("missing event name"),this.eventOptions=n.eventOptions||{},this.identifier=n.identifier||Ge("missing identifier"),this.methodName=n.methodName||Ge("missing method name"),this.keyFilter=n.keyFilter||"",this.schema=i}static forToken(e,t){return new this(e.element,e.index,function(e){const t=e.trim().match(qe)||[];let n=t[1],i=t[2];return i&&!["keydown","keyup","keypress"].includes(n)&&(n+=`.${i}`,i=""),{eventTarget:(r=t[3],"window"==r?window:"document"==r?document:void 0),eventName:n,eventOptions:t[6]?(s=t[6],s.split(":").reduce(((e,t)=>Object.assign(e,{[t.replace(/^!/,"")]:!/^!/.test(t)})),{})):{},identifier:t[4],methodName:t[5],keyFilter:i};var r,s}(e.content),t)}toString(){const e=this.keyFilter?`.${this.keyFilter}`:"",t=this.eventTargetName?`@${this.eventTargetName}`:"";return`${this.eventName}${e}${t}->${this.identifier}#${this.methodName}`}isFilterTarget(e){if(!this.keyFilter)return!1;const t=this.keyFilter.split("+"),n=["meta","ctrl","alt","shift"],[i,r,s,o]=n.map((e=>t.includes(e)));if(e.metaKey!==i||e.ctrlKey!==r||e.altKey!==s||e.shiftKey!==o)return!0;const a=t.filter((e=>!n.includes(e)))[0];return!!a&&(Object.prototype.hasOwnProperty.call(this.keyMappings,a)||Ge(`contains unknown key filter: ${this.keyFilter}`),this.keyMappings[a].toLowerCase()!==e.key.toLowerCase())}get params(){const e={},t=new RegExp(`^data-${this.identifier}-(.+)-param$`,"i");for(const{name:n,value:i}of Array.from(this.element.attributes)){const r=n.match(t),s=r&&r[1];s&&(e[He(s)]=Xe(i))}return e}get eventTargetName(){return(e=this.eventTarget)==window?"window":e==document?"document":void 0;var e}get keyMappings(){return this.schema.keyMappings}}const Ke={a:()=>"click",button:()=>"click",form:()=>"submit",details:()=>"toggle",input:e=>"submit"==e.getAttribute("type")?"click":"input",select:()=>"change",textarea:()=>"input"};function Ge(e){throw new Error(e)}function Xe(e){try{return JSON.parse(e)}catch(t){return e}}class Ye{constructor(e,t){this.context=e,this.action=t}get index(){return this.action.index}get eventTarget(){return this.action.eventTarget}get eventOptions(){return this.action.eventOptions}get identifier(){return this.context.identifier}handleEvent(e){this.willBeInvokedByEvent(e)&&this.applyEventModifiers(e)&&this.invokeWithEvent(e)}get eventName(){return this.action.eventName}get method(){const e=this.controller[this.methodName];if("function"==typeof e)return e;throw new Error(`Action "${this.action}" references undefined method "${this.methodName}"`)}applyEventModifiers(e){const{element:t}=this.action,{actionDescriptorFilters:n}=this.context.application;let i=!0;for(const[r,s]of Object.entries(this.eventOptions))if(r in n){const o=n[r];i=i&&o({name:r,value:s,event:e,element:t})}return i}invokeWithEvent(e){const{target:t,currentTarget:n}=e;try{const{params:i}=this.action,r=Object.assign(e,{params:i});this.method.call(this.controller,r),this.context.logDebugActivity(this.methodName,{event:e,target:t,currentTarget:n,action:this.methodName})}catch(t){const{identifier:n,controller:i,element:r,index:s}=this,o={identifier:n,controller:i,element:r,index:s,event:e};this.context.handleError(t,`invoking action "${this.action}"`,o)}}willBeInvokedByEvent(e){const t=e.target;return!(e instanceof KeyboardEvent&&this.action.isFilterTarget(e))&&(this.element===t||(t instanceof Element&&this.element.contains(t)?this.scope.containsElement(t):this.scope.containsElement(this.action.element)))}get controller(){return this.context.controller}get methodName(){return this.action.methodName}get element(){return this.scope.element}get scope(){return this.context.scope}}class Qe{constructor(e,t){this.mutationObserverInit={attributes:!0,childList:!0,subtree:!0},this.element=e,this.started=!1,this.delegate=t,this.elements=new Set,this.mutationObserver=new MutationObserver((e=>this.processMutations(e)))}start(){this.started||(this.started=!0,this.mutationObserver.observe(this.element,this.mutationObserverInit),this.refresh())}pause(e){this.started&&(this.mutationObserver.disconnect(),this.started=!1),e(),this.started||(this.mutationObserver.observe(this.element,this.mutationObserverInit),this.started=!0)}stop(){this.started&&(this.mutationObserver.takeRecords(),this.mutationObserver.disconnect(),this.started=!1)}refresh(){if(this.started){const e=new Set(this.matchElementsInTree());for(const t of Array.from(this.elements))e.has(t)||this.removeElement(t);for(const t of Array.from(e))this.addElement(t)}}processMutations(e){if(this.started)for(const t of e)this.processMutation(t)}processMutation(e){"attributes"==e.type?this.processAttributeChange(e.target,e.attributeName):"childList"==e.type&&(this.processRemovedNodes(e.removedNodes),this.processAddedNodes(e.addedNodes))}processAttributeChange(e,t){const n=e;this.elements.has(n)?this.delegate.elementAttributeChanged&&this.matchElement(n)?this.delegate.elementAttributeChanged(n,t):this.removeElement(n):this.matchElement(n)&&this.addElement(n)}processRemovedNodes(e){for(const t of Array.from(e)){const e=this.elementFromNode(t);e&&this.processTree(e,this.removeElement)}}processAddedNodes(e){for(const t of Array.from(e)){const e=this.elementFromNode(t);e&&this.elementIsActive(e)&&this.processTree(e,this.addElement)}}matchElement(e){return this.delegate.matchElement(e)}matchElementsInTree(e=this.element){return this.delegate.matchElementsInTree(e)}processTree(e,t){for(const n of this.matchElementsInTree(e))t.call(this,n)}elementFromNode(e){if(e.nodeType==Node.ELEMENT_NODE)return e}elementIsActive(e){return e.isConnected==this.element.isConnected&&this.element.contains(e)}addElement(e){this.elements.has(e)||this.elementIsActive(e)&&(this.elements.add(e),this.delegate.elementMatched&&this.delegate.elementMatched(e))}removeElement(e){this.elements.has(e)&&(this.elements.delete(e),this.delegate.elementUnmatched&&this.delegate.elementUnmatched(e))}}class Je{constructor(e,t,n){this.attributeName=t,this.delegate=n,this.elementObserver=new Qe(e,this)}get element(){return this.elementObserver.element}get selector(){return`[${this.attributeName}]`}start(){this.elementObserver.start()}pause(e){this.elementObserver.pause(e)}stop(){this.elementObserver.stop()}refresh(){this.elementObserver.refresh()}get started(){return this.elementObserver.started}matchElement(e){return e.hasAttribute(this.attributeName)}matchElementsInTree(e){const t=this.matchElement(e)?[e]:[],n=Array.from(e.querySelectorAll(this.selector));return t.concat(n)}elementMatched(e){this.delegate.elementMatchedAttribute&&this.delegate.elementMatchedAttribute(e,this.attributeName)}elementUnmatched(e){this.delegate.elementUnmatchedAttribute&&this.delegate.elementUnmatchedAttribute(e,this.attributeName)}elementAttributeChanged(e,t){this.delegate.elementAttributeValueChanged&&this.attributeName==t&&this.delegate.elementAttributeValueChanged(e,t)}}function Ze(e,t){let n=e.get(t);return n||(n=new Set,e.set(t,n)),n}class et{constructor(){this.valuesByKey=new Map}get keys(){return Array.from(this.valuesByKey.keys())}get values(){return Array.from(this.valuesByKey.values()).reduce(((e,t)=>e.concat(Array.from(t))),[])}get size(){return Array.from(this.valuesByKey.values()).reduce(((e,t)=>e+t.size),0)}add(e,t){!function(e,t,n){Ze(e,t).add(n)}(this.valuesByKey,e,t)}delete(e,t){!function(e,t,n){Ze(e,t).delete(n),function(e,t){const n=e.get(t);null!=n&&0==n.size&&e.delete(t)}(e,t)}(this.valuesByKey,e,t)}has(e,t){const n=this.valuesByKey.get(e);return null!=n&&n.has(t)}hasKey(e){return this.valuesByKey.has(e)}hasValue(e){return Array.from(this.valuesByKey.values()).some((t=>t.has(e)))}getValuesForKey(e){const t=this.valuesByKey.get(e);return t?Array.from(t):[]}getKeysForValue(e){return Array.from(this.valuesByKey).filter((([t,n])=>n.has(e))).map((([e,t])=>e))}}class tt{constructor(e,t,n,i={}){this.selector=t,this.details=i,this.elementObserver=new Qe(e,this),this.delegate=n,this.matchesByElement=new et}get started(){return this.elementObserver.started}start(){this.elementObserver.start()}pause(e){this.elementObserver.pause(e)}stop(){this.elementObserver.stop()}refresh(){this.elementObserver.refresh()}get element(){return this.elementObserver.element}matchElement(e){const t=e.matches(this.selector);return this.delegate.selectorMatchElement?t&&this.delegate.selectorMatchElement(e,this.details):t}matchElementsInTree(e){const t=this.matchElement(e)?[e]:[],n=Array.from(e.querySelectorAll(this.selector)).filter((e=>this.matchElement(e)));return t.concat(n)}elementMatched(e){this.selectorMatched(e)}elementUnmatched(e){this.selectorUnmatched(e)}elementAttributeChanged(e,t){const n=this.matchElement(e),i=this.matchesByElement.has(this.selector,e);!n&&i&&this.selectorUnmatched(e)}selectorMatched(e){this.delegate.selectorMatched&&(this.delegate.selectorMatched(e,this.selector,this.details),this.matchesByElement.add(this.selector,e))}selectorUnmatched(e){this.delegate.selectorUnmatched(e,this.selector,this.details),this.matchesByElement.delete(this.selector,e)}}class nt{constructor(e,t){this.element=e,this.delegate=t,this.started=!1,this.stringMap=new Map,this.mutationObserver=new MutationObserver((e=>this.processMutations(e)))}start(){this.started||(this.started=!0,this.mutationObserver.observe(this.element,{attributes:!0,attributeOldValue:!0}),this.refresh())}stop(){this.started&&(this.mutationObserver.takeRecords(),this.mutationObserver.disconnect(),this.started=!1)}refresh(){if(this.started)for(const e of this.knownAttributeNames)this.refreshAttribute(e,null)}processMutations(e){if(this.started)for(const t of e)this.processMutation(t)}processMutation(e){const t=e.attributeName;t&&this.refreshAttribute(t,e.oldValue)}refreshAttribute(e,t){const n=this.delegate.getStringMapKeyForAttribute(e);if(null!=n){this.stringMap.has(e)||this.stringMapKeyAdded(n,e);const i=this.element.getAttribute(e);if(this.stringMap.get(e)!=i&&this.stringMapValueChanged(i,n,t),null==i){const t=this.stringMap.get(e);this.stringMap.delete(e),t&&this.stringMapKeyRemoved(n,e,t)}else this.stringMap.set(e,i)}}stringMapKeyAdded(e,t){this.delegate.stringMapKeyAdded&&this.delegate.stringMapKeyAdded(e,t)}stringMapValueChanged(e,t,n){this.delegate.stringMapValueChanged&&this.delegate.stringMapValueChanged(e,t,n)}stringMapKeyRemoved(e,t,n){this.delegate.stringMapKeyRemoved&&this.delegate.stringMapKeyRemoved(e,t,n)}get knownAttributeNames(){return Array.from(new Set(this.currentAttributeNames.concat(this.recordedAttributeNames)))}get currentAttributeNames(){return Array.from(this.element.attributes).map((e=>e.name))}get recordedAttributeNames(){return Array.from(this.stringMap.keys())}}class it{constructor(e,t,n){this.attributeObserver=new Je(e,t,this),this.delegate=n,this.tokensByElement=new et}get started(){return this.attributeObserver.started}start(){this.attributeObserver.start()}pause(e){this.attributeObserver.pause(e)}stop(){this.attributeObserver.stop()}refresh(){this.attributeObserver.refresh()}get element(){return this.attributeObserver.element}get attributeName(){return this.attributeObserver.attributeName}elementMatchedAttribute(e){this.tokensMatched(this.readTokensForElement(e))}elementAttributeValueChanged(e){const[t,n]=this.refreshTokensForElement(e);this.tokensUnmatched(t),this.tokensMatched(n)}elementUnmatchedAttribute(e){this.tokensUnmatched(this.tokensByElement.getValuesForKey(e))}tokensMatched(e){e.forEach((e=>this.tokenMatched(e)))}tokensUnmatched(e){e.forEach((e=>this.tokenUnmatched(e)))}tokenMatched(e){this.delegate.tokenMatched(e),this.tokensByElement.add(e.element,e)}tokenUnmatched(e){this.delegate.tokenUnmatched(e),this.tokensByElement.delete(e.element,e)}refreshTokensForElement(e){const t=this.tokensByElement.getValuesForKey(e),n=this.readTokensForElement(e),i=function(e,t){const n=Math.max(e.length,t.length);return Array.from({length:n},((n,i)=>[e[i],t[i]]))}(t,n).findIndex((([e,t])=>!function(e,t){return e&&t&&e.index==t.index&&e.content==t.content}(e,t)));return-1==i?[[],[]]:[t.slice(i),n.slice(i)]}readTokensForElement(e){const t=this.attributeName;return function(e,t,n){return e.trim().split(/\s+/).filter((e=>e.length)).map(((e,i)=>({element:t,attributeName:n,content:e,index:i})))}(e.getAttribute(t)||"",e,t)}}class rt{constructor(e,t,n){this.tokenListObserver=new it(e,t,this),this.delegate=n,this.parseResultsByToken=new WeakMap,this.valuesByTokenByElement=new WeakMap}get started(){return this.tokenListObserver.started}start(){this.tokenListObserver.start()}stop(){this.tokenListObserver.stop()}refresh(){this.tokenListObserver.refresh()}get element(){return this.tokenListObserver.element}get attributeName(){return this.tokenListObserver.attributeName}tokenMatched(e){const{element:t}=e,{value:n}=this.fetchParseResultForToken(e);n&&(this.fetchValuesByTokenForElement(t).set(e,n),this.delegate.elementMatchedValue(t,n))}tokenUnmatched(e){const{element:t}=e,{value:n}=this.fetchParseResultForToken(e);n&&(this.fetchValuesByTokenForElement(t).delete(e),this.delegate.elementUnmatchedValue(t,n))}fetchParseResultForToken(e){let t=this.parseResultsByToken.get(e);return t||(t=this.parseToken(e),this.parseResultsByToken.set(e,t)),t}fetchValuesByTokenForElement(e){let t=this.valuesByTokenByElement.get(e);return t||(t=new Map,this.valuesByTokenByElement.set(e,t)),t}parseToken(e){try{return{value:this.delegate.parseValueForToken(e)}}catch(e){return{error:e}}}}class st{constructor(e,t){this.context=e,this.delegate=t,this.bindingsByAction=new Map}start(){this.valueListObserver||(this.valueListObserver=new rt(this.element,this.actionAttribute,this),this.valueListObserver.start())}stop(){this.valueListObserver&&(this.valueListObserver.stop(),delete this.valueListObserver,this.disconnectAllActions())}get element(){return this.context.element}get identifier(){return this.context.identifier}get actionAttribute(){return this.schema.actionAttribute}get schema(){return this.context.schema}get bindings(){return Array.from(this.bindingsByAction.values())}connectAction(e){const t=new Ye(this.context,e);this.bindingsByAction.set(e,t),this.delegate.bindingConnected(t)}disconnectAction(e){const t=this.bindingsByAction.get(e);t&&(this.bindingsByAction.delete(e),this.delegate.bindingDisconnected(t))}disconnectAllActions(){this.bindings.forEach((e=>this.delegate.bindingDisconnected(e,!0))),this.bindingsByAction.clear()}parseValueForToken(e){const t=Ue.forToken(e,this.schema);if(t.identifier==this.identifier)return t}elementMatchedValue(e,t){this.connectAction(t)}elementUnmatchedValue(e,t){this.disconnectAction(t)}}class ot{constructor(e,t){this.context=e,this.receiver=t,this.stringMapObserver=new nt(this.element,this),this.valueDescriptorMap=this.controller.valueDescriptorMap}start(){this.stringMapObserver.start(),this.invokeChangedCallbacksForDefaultValues()}stop(){this.stringMapObserver.stop()}get element(){return this.context.element}get controller(){return this.context.controller}getStringMapKeyForAttribute(e){if(e in this.valueDescriptorMap)return this.valueDescriptorMap[e].name}stringMapKeyAdded(e,t){const n=this.valueDescriptorMap[t];this.hasValue(e)||this.invokeChangedCallback(e,n.writer(this.receiver[e]),n.writer(n.defaultValue))}stringMapValueChanged(e,t,n){const i=this.valueDescriptorNameMap[t];null!==e&&(null===n&&(n=i.writer(i.defaultValue)),this.invokeChangedCallback(t,e,n))}stringMapKeyRemoved(e,t,n){const i=this.valueDescriptorNameMap[e];this.hasValue(e)?this.invokeChangedCallback(e,i.writer(this.receiver[e]),n):this.invokeChangedCallback(e,i.writer(i.defaultValue),n)}invokeChangedCallbacksForDefaultValues(){for(const{key:e,name:t,defaultValue:n,writer:i}of this.valueDescriptors)null==n||this.controller.data.has(e)||this.invokeChangedCallback(t,i(n),void 0)}invokeChangedCallback(e,t,n){const i=`${e}Changed`,r=this.receiver[i];if("function"==typeof r){const i=this.valueDescriptorNameMap[e];try{const e=i.reader(t);let s=n;n&&(s=i.reader(n)),r.call(this.receiver,e,s)}catch(e){throw e instanceof TypeError&&(e.message=`Stimulus Value "${this.context.identifier}.${i.name}" - ${e.message}`),e}}}get valueDescriptors(){const{valueDescriptorMap:e}=this;return Object.keys(e).map((t=>e[t]))}get valueDescriptorNameMap(){const e={};return Object.keys(this.valueDescriptorMap).forEach((t=>{const n=this.valueDescriptorMap[t];e[n.name]=n})),e}hasValue(e){const t=`has${We(this.valueDescriptorNameMap[e].name)}`;return this.receiver[t]}}class at{constructor(e,t){this.context=e,this.delegate=t,this.targetsByName=new et}start(){this.tokenListObserver||(this.tokenListObserver=new it(this.element,this.attributeName,this),this.tokenListObserver.start())}stop(){this.tokenListObserver&&(this.disconnectAllTargets(),this.tokenListObserver.stop(),delete this.tokenListObserver)}tokenMatched({element:e,content:t}){this.scope.containsElement(e)&&this.connectTarget(e,t)}tokenUnmatched({element:e,content:t}){this.disconnectTarget(e,t)}connectTarget(e,t){var n;this.targetsByName.has(t,e)||(this.targetsByName.add(t,e),null===(n=this.tokenListObserver)||void 0===n||n.pause((()=>this.delegate.targetConnected(e,t))))}disconnectTarget(e,t){var n;this.targetsByName.has(t,e)&&(this.targetsByName.delete(t,e),null===(n=this.tokenListObserver)||void 0===n||n.pause((()=>this.delegate.targetDisconnected(e,t))))}disconnectAllTargets(){for(const e of this.targetsByName.keys)for(const t of this.targetsByName.getValuesForKey(e))this.disconnectTarget(t,e)}get attributeName(){return`data-${this.context.identifier}-target`}get element(){return this.context.element}get scope(){return this.context.scope}}function lt(e,t){const n=ct(e);return Array.from(n.reduce(((e,n)=>(function(e,t){const n=e[t];return Array.isArray(n)?n:[]}(n,t).forEach((t=>e.add(t))),e)),new Set))}function ct(e){const t=[];for(;e;)t.push(e),e=Object.getPrototypeOf(e);return t.reverse()}class ht{constructor(e,t){this.context=e,this.delegate=t,this.outletsByName=new et,this.outletElementsByName=new et,this.selectorObserverMap=new Map}start(){0===this.selectorObserverMap.size&&(this.outletDefinitions.forEach((e=>{const t=this.selector(e),n={outletName:e};t&&this.selectorObserverMap.set(e,new tt(document.body,t,this,n))})),this.selectorObserverMap.forEach((e=>e.start()))),this.dependentContexts.forEach((e=>e.refresh()))}stop(){this.selectorObserverMap.size>0&&(this.disconnectAllOutlets(),this.selectorObserverMap.forEach((e=>e.stop())),this.selectorObserverMap.clear())}refresh(){this.selectorObserverMap.forEach((e=>e.refresh()))}selectorMatched(e,t,{outletName:n}){const i=this.getOutlet(e,n);i&&this.connectOutlet(i,e,n)}selectorUnmatched(e,t,{outletName:n}){const i=this.getOutletFromMap(e,n);i&&this.disconnectOutlet(i,e,n)}selectorMatchElement(e,{outletName:t}){return this.hasOutlet(e,t)&&e.matches(`[${this.context.application.schema.controllerAttribute}~=${t}]`)}connectOutlet(e,t,n){var i;this.outletElementsByName.has(n,t)||(this.outletsByName.add(n,e),this.outletElementsByName.add(n,t),null===(i=this.selectorObserverMap.get(n))||void 0===i||i.pause((()=>this.delegate.outletConnected(e,t,n))))}disconnectOutlet(e,t,n){var i;this.outletElementsByName.has(n,t)&&(this.outletsByName.delete(n,e),this.outletElementsByName.delete(n,t),null===(i=this.selectorObserverMap.get(n))||void 0===i||i.pause((()=>this.delegate.outletDisconnected(e,t,n))))}disconnectAllOutlets(){for(const e of this.outletElementsByName.keys)for(const t of this.outletElementsByName.getValuesForKey(e))for(const n of this.outletsByName.getValuesForKey(e))this.disconnectOutlet(n,t,e)}selector(e){return this.scope.outlets.getSelectorForOutletName(e)}get outletDependencies(){const e=new et;return this.router.modules.forEach((t=>{lt(t.definition.controllerConstructor,"outlets").forEach((n=>e.add(n,t.identifier)))})),e}get outletDefinitions(){return this.outletDependencies.getKeysForValue(this.identifier)}get dependentControllerIdentifiers(){return this.outletDependencies.getValuesForKey(this.identifier)}get dependentContexts(){const e=this.dependentControllerIdentifiers;return this.router.contexts.filter((t=>e.includes(t.identifier)))}hasOutlet(e,t){return!!this.getOutlet(e,t)||!!this.getOutletFromMap(e,t)}getOutlet(e,t){return this.application.getControllerForElementAndIdentifier(e,t)}getOutletFromMap(e,t){return this.outletsByName.getValuesForKey(t).find((t=>t.element===e))}get scope(){return this.context.scope}get identifier(){return this.context.identifier}get application(){return this.context.application}get router(){return this.application.router}}class ut{constructor(e,t){this.logDebugActivity=(e,t={})=>{const{identifier:n,controller:i,element:r}=this;t=Object.assign({identifier:n,controller:i,element:r},t),this.application.logDebugActivity(this.identifier,e,t)},this.module=e,this.scope=t,this.controller=new e.controllerConstructor(this),this.bindingObserver=new st(this,this.dispatcher),this.valueObserver=new ot(this,this.controller),this.targetObserver=new at(this,this),this.outletObserver=new ht(this,this);try{this.controller.initialize(),this.logDebugActivity("initialize")}catch(e){this.handleError(e,"initializing controller")}}connect(){this.bindingObserver.start(),this.valueObserver.start(),this.targetObserver.start(),this.outletObserver.start();try{this.controller.connect(),this.logDebugActivity("connect")}catch(e){this.handleError(e,"connecting controller")}}refresh(){this.outletObserver.refresh()}disconnect(){try{this.controller.disconnect(),this.logDebugActivity("disconnect")}catch(e){this.handleError(e,"disconnecting controller")}this.outletObserver.stop(),this.targetObserver.stop(),this.valueObserver.stop(),this.bindingObserver.stop()}get application(){return this.module.application}get identifier(){return this.module.identifier}get schema(){return this.application.schema}get dispatcher(){return this.application.dispatcher}get element(){return this.scope.element}get parentElement(){return this.element.parentElement}handleError(e,t,n={}){const{identifier:i,controller:r,element:s}=this;n=Object.assign({identifier:i,controller:r,element:s},n),this.application.handleError(e,`Error ${t}`,n)}targetConnected(e,t){this.invokeControllerMethod(`${t}TargetConnected`,e)}targetDisconnected(e,t){this.invokeControllerMethod(`${t}TargetDisconnected`,e)}outletConnected(e,t,n){this.invokeControllerMethod(`${Ve(n)}OutletConnected`,e,t)}outletDisconnected(e,t,n){this.invokeControllerMethod(`${Ve(n)}OutletDisconnected`,e,t)}invokeControllerMethod(e,...t){const n=this.controller;"function"==typeof n[e]&&n[e](...t)}}const dt="function"==typeof Object.getOwnPropertySymbols?e=>[...Object.getOwnPropertyNames(e),...Object.getOwnPropertySymbols(e)]:Object.getOwnPropertyNames,pt=(()=>{function e(e){function t(){return Reflect.construct(e,arguments,new.target)}return t.prototype=Object.create(e.prototype,{constructor:{value:t}}),Reflect.setPrototypeOf(t,e),t}try{return function(){const t=e((function(){this.a.call(this)}));t.prototype.a=function(){},new t}(),e}catch(e){return e=>class extends e{}}})();class mt{constructor(e,t){this.application=e,this.definition=function(e){return{identifier:e.identifier,controllerConstructor:(t=e.controllerConstructor,function(e,t){const n=pt(e),i=function(e,t){return dt(t).reduce(((n,i)=>{const r=function(e,t,n){const i=Object.getOwnPropertyDescriptor(e,n);if(!i||!("value"in i)){const e=Object.getOwnPropertyDescriptor(t,n).value;return i&&(e.get=i.get||e.get,e.set=i.set||e.set),e}}(e,t,i);return r&&Object.assign(n,{[i]:r}),n}),{})}(e.prototype,t);return Object.defineProperties(n.prototype,i),n}(t,function(e){return lt(e,"blessings").reduce(((t,n)=>{const i=n(e);for(const e in i){const n=t[e]||{};t[e]=Object.assign(n,i[e])}return t}),{})}(t)))};var t}(t),this.contextsByScope=new WeakMap,this.connectedContexts=new Set}get identifier(){return this.definition.identifier}get controllerConstructor(){return this.definition.controllerConstructor}get contexts(){return Array.from(this.connectedContexts)}connectContextForScope(e){const t=this.fetchContextForScope(e);this.connectedContexts.add(t),t.connect()}disconnectContextForScope(e){const t=this.contextsByScope.get(e);t&&(this.connectedContexts.delete(t),t.disconnect())}fetchContextForScope(e){let t=this.contextsByScope.get(e);return t||(t=new ut(this,e),this.contextsByScope.set(e,t)),t}}class ft{constructor(e){this.scope=e}has(e){return this.data.has(this.getDataKey(e))}get(e){return this.getAll(e)[0]}getAll(e){return(this.data.get(this.getDataKey(e))||"").match(/[^\s]+/g)||[]}getAttributeName(e){return this.data.getAttributeNameForKey(this.getDataKey(e))}getDataKey(e){return`${e}-class`}get data(){return this.scope.data}}class gt{constructor(e){this.scope=e}get element(){return this.scope.element}get identifier(){return this.scope.identifier}get(e){const t=this.getAttributeNameForKey(e);return this.element.getAttribute(t)}set(e,t){const n=this.getAttributeNameForKey(e);return this.element.setAttribute(n,t),this.get(e)}has(e){const t=this.getAttributeNameForKey(e);return this.element.hasAttribute(t)}delete(e){if(this.has(e)){const t=this.getAttributeNameForKey(e);return this.element.removeAttribute(t),!0}return!1}getAttributeNameForKey(e){return`data-${this.identifier}-${ze(e)}`}}class vt{constructor(e){this.warnedKeysByObject=new WeakMap,this.logger=e}warn(e,t,n){let i=this.warnedKeysByObject.get(e);i||(i=new Set,this.warnedKeysByObject.set(e,i)),i.has(t)||(i.add(t),this.logger.warn(n,e))}}function bt(e,t){return`[${e}~="${t}"]`}class yt{constructor(e){this.scope=e}get element(){return this.scope.element}get identifier(){return this.scope.identifier}get schema(){return this.scope.schema}has(e){return null!=this.find(e)}find(...e){return e.reduce(((e,t)=>e||this.findTarget(t)||this.findLegacyTarget(t)),void 0)}findAll(...e){return e.reduce(((e,t)=>[...e,...this.findAllTargets(t),...this.findAllLegacyTargets(t)]),[])}findTarget(e){const t=this.getSelectorForTargetName(e);return this.scope.findElement(t)}findAllTargets(e){const t=this.getSelectorForTargetName(e);return this.scope.findAllElements(t)}getSelectorForTargetName(e){return bt(this.schema.targetAttributeForScope(this.identifier),e)}findLegacyTarget(e){const t=this.getLegacySelectorForTargetName(e);return this.deprecate(this.scope.findElement(t),e)}findAllLegacyTargets(e){const t=this.getLegacySelectorForTargetName(e);return this.scope.findAllElements(t).map((t=>this.deprecate(t,e)))}getLegacySelectorForTargetName(e){const t=`${this.identifier}.${e}`;return bt(this.schema.targetAttribute,t)}deprecate(e,t){if(e){const{identifier:n}=this,i=this.schema.targetAttribute,r=this.schema.targetAttributeForScope(n);this.guide.warn(e,`target:${t}`,`Please replace ${i}="${n}.${t}" with ${r}="${t}". The ${i} attribute is deprecated and will be removed in a future version of Stimulus.`)}return e}get guide(){return this.scope.guide}}class wt{constructor(e,t){this.scope=e,this.controllerElement=t}get element(){return this.scope.element}get identifier(){return this.scope.identifier}get schema(){return this.scope.schema}has(e){return null!=this.find(e)}find(...e){return e.reduce(((e,t)=>e||this.findOutlet(t)),void 0)}findAll(...e){return e.reduce(((e,t)=>[...e,...this.findAllOutlets(t)]),[])}getSelectorForOutletName(e){const t=this.schema.outletAttributeForScope(this.identifier,e);return this.controllerElement.getAttribute(t)}findOutlet(e){const t=this.getSelectorForOutletName(e);if(t)return this.findElement(t,e)}findAllOutlets(e){const t=this.getSelectorForOutletName(e);return t?this.findAllElements(t,e):[]}findElement(e,t){return this.scope.queryElements(e).filter((n=>this.matchesElement(n,e,t)))[0]}findAllElements(e,t){return this.scope.queryElements(e).filter((n=>this.matchesElement(n,e,t)))}matchesElement(e,t,n){const i=e.getAttribute(this.scope.schema.controllerAttribute)||"";return e.matches(t)&&i.split(" ").includes(n)}}class _t{constructor(e,t,n,i){this.targets=new yt(this),this.classes=new ft(this),this.data=new gt(this),this.containsElement=e=>e.closest(this.controllerSelector)===this.element,this.schema=e,this.element=t,this.identifier=n,this.guide=new vt(i),this.outlets=new wt(this.documentScope,t)}findElement(e){return this.element.matches(e)?this.element:this.queryElements(e).find(this.containsElement)}findAllElements(e){return[...this.element.matches(e)?[this.element]:[],...this.queryElements(e).filter(this.containsElement)]}queryElements(e){return Array.from(this.element.querySelectorAll(e))}get controllerSelector(){return bt(this.schema.controllerAttribute,this.identifier)}get isDocumentScope(){return this.element===document.documentElement}get documentScope(){return this.isDocumentScope?this:new _t(this.schema,document.documentElement,this.identifier,this.guide.logger)}}class Et{constructor(e,t,n){this.element=e,this.schema=t,this.delegate=n,this.valueListObserver=new rt(this.element,this.controllerAttribute,this),this.scopesByIdentifierByElement=new WeakMap,this.scopeReferenceCounts=new WeakMap}start(){this.valueListObserver.start()}stop(){this.valueListObserver.stop()}get controllerAttribute(){return this.schema.controllerAttribute}parseValueForToken(e){const{element:t,content:n}=e,i=this.fetchScopesByIdentifierForElement(t);let r=i.get(n);return r||(r=this.delegate.createScopeForElementAndIdentifier(t,n),i.set(n,r)),r}elementMatchedValue(e,t){const n=(this.scopeReferenceCounts.get(t)||0)+1;this.scopeReferenceCounts.set(t,n),1==n&&this.delegate.scopeConnected(t)}elementUnmatchedValue(e,t){const n=this.scopeReferenceCounts.get(t);n&&(this.scopeReferenceCounts.set(t,n-1),1==n&&this.delegate.scopeDisconnected(t))}fetchScopesByIdentifierForElement(e){let t=this.scopesByIdentifierByElement.get(e);return t||(t=new Map,this.scopesByIdentifierByElement.set(e,t)),t}}class St{constructor(e){this.application=e,this.scopeObserver=new Et(this.element,this.schema,this),this.scopesByIdentifier=new et,this.modulesByIdentifier=new Map}get element(){return this.application.element}get schema(){return this.application.schema}get logger(){return this.application.logger}get controllerAttribute(){return this.schema.controllerAttribute}get modules(){return Array.from(this.modulesByIdentifier.values())}get contexts(){return this.modules.reduce(((e,t)=>e.concat(t.contexts)),[])}start(){this.scopeObserver.start()}stop(){this.scopeObserver.stop()}loadDefinition(e){this.unloadIdentifier(e.identifier);const t=new mt(this.application,e);this.connectModule(t);const n=e.controllerConstructor.afterLoad;n&&n(e.identifier,this.application)}unloadIdentifier(e){const t=this.modulesByIdentifier.get(e);t&&this.disconnectModule(t)}getContextForElementAndIdentifier(e,t){const n=this.modulesByIdentifier.get(t);if(n)return n.contexts.find((t=>t.element==e))}handleError(e,t,n){this.application.handleError(e,t,n)}createScopeForElementAndIdentifier(e,t){return new _t(this.schema,e,t,this.logger)}scopeConnected(e){this.scopesByIdentifier.add(e.identifier,e);const t=this.modulesByIdentifier.get(e.identifier);t&&t.connectContextForScope(e)}scopeDisconnected(e){this.scopesByIdentifier.delete(e.identifier,e);const t=this.modulesByIdentifier.get(e.identifier);t&&t.disconnectContextForScope(e)}connectModule(e){this.modulesByIdentifier.set(e.identifier,e),this.scopesByIdentifier.getValuesForKey(e.identifier).forEach((t=>e.connectContextForScope(t)))}disconnectModule(e){this.modulesByIdentifier.delete(e.identifier),this.scopesByIdentifier.getValuesForKey(e.identifier).forEach((t=>e.disconnectContextForScope(t)))}}const At={controllerAttribute:"data-controller",actionAttribute:"data-action",targetAttribute:"data-target",targetAttributeForScope:e=>`data-${e}-target`,outletAttributeForScope:(e,t)=>`data-${e}-${t}-outlet`,keyMappings:Object.assign(Object.assign({enter:"Enter",tab:"Tab",esc:"Escape",space:" ",up:"ArrowUp",down:"ArrowDown",left:"ArrowLeft",right:"ArrowRight",home:"Home",end:"End"},Ct("abcdefghijklmnopqrstuvwxyz".split("").map((e=>[e,e])))),Ct("0123456789".split("").map((e=>[e,e]))))};function Ct(e){return e.reduce(((e,[t,n])=>Object.assign(Object.assign({},e),{[t]:n})),{})}function Tt([e,t],n){return function(e){const t=`${ze(e.token)}-value`,n=function(e){const t=function(e){const t=kt(e.typeObject.type);if(!t)return;const n=Ot(e.typeObject.default);if(t!==n){throw new Error(`The specified default value for the Stimulus Value "${e.controller?`${e.controller}.${e.token}`:e.token}" must match the defined type "${t}". The provided default value of "${e.typeObject.default}" is of type "${n}".`)}return t}({controller:e.controller,token:e.token,typeObject:e.typeDefinition}),n=Ot(e.typeDefinition),i=kt(e.typeDefinition),r=t||n||i;if(r)return r;throw new Error(`Unknown value type "${e.controller?`${e.controller}.${e.typeDefinition}`:e.token}" for "${e.token}" value`)}(e);return{type:n,key:t,name:He(t),get defaultValue(){return function(e){const t=kt(e);if(t)return xt[t];const n=e.default;return void 0!==n?n:e}(e.typeDefinition)},get hasCustomDefaultValue(){return void 0!==Ot(e.typeDefinition)},reader:Lt[n],writer:Mt[n]||Mt.default}}({controller:n,token:e,typeDefinition:t})}function kt(e){switch(e){case Array:return"array";case Boolean:return"boolean";case Number:return"number";case Object:return"object";case String:return"string"}}function Ot(e){switch(typeof e){case"boolean":return"boolean";case"number":return"number";case"string":return"string"}return Array.isArray(e)?"array":"[object Object]"===Object.prototype.toString.call(e)?"object":void 0}const xt={get array(){return[]},boolean:!1,number:0,get object(){return{}},string:""},Lt={array(e){const t=JSON.parse(e);if(!Array.isArray(t))throw new TypeError(`expected value of type "array" but instead got value "${e}" of type "${Ot(t)}"`);return t},boolean:e=>!("0"==e||"false"==String(e).toLowerCase()),number:e=>Number(e),object(e){const t=JSON.parse(e);if(null===t||"object"!=typeof t||Array.isArray(t))throw new TypeError(`expected value of type "object" but instead got value "${e}" of type "${Ot(t)}"`);return t},string:e=>e},Mt={default:function(e){return`${e}`},array:Pt,object:Pt};function Pt(e){return JSON.stringify(e)}class Rt{constructor(e){this.context=e}static get shouldLoad(){return!0}static afterLoad(e,t){}get application(){return this.context.application}get scope(){return this.context.scope}get element(){return this.scope.element}get identifier(){return this.scope.identifier}get targets(){return this.scope.targets}get outlets(){return this.scope.outlets}get classes(){return this.scope.classes}get data(){return this.scope.data}initialize(){}connect(){}disconnect(){}dispatch(e,{target:t=this.element,detail:n={},prefix:i=this.identifier,bubbles:r=!0,cancelable:s=!0}={}){const o=new CustomEvent(i?`${i}:${e}`:e,{detail:n,bubbles:r,cancelable:s});return t.dispatchEvent(o),o}}Rt.blessings=[function(e){return lt(e,"classes").reduce(((e,t)=>{return Object.assign(e,{[`${n=t}Class`]:{get(){const{classes:e}=this;if(e.has(n))return e.get(n);{const t=e.getAttributeName(n);throw new Error(`Missing attribute "${t}"`)}}},[`${n}Classes`]:{get(){return this.classes.getAll(n)}},[`has${We(n)}Class`]:{get(){return this.classes.has(n)}}});var n}),{})},function(e){return lt(e,"targets").reduce(((e,t)=>{return Object.assign(e,{[`${n=t}Target`]:{get(){const e=this.targets.find(n);if(e)return e;throw new Error(`Missing target element "${n}" for "${this.identifier}" controller`)}},[`${n}Targets`]:{get(){return this.targets.findAll(n)}},[`has${We(n)}Target`]:{get(){return this.targets.has(n)}}});var n}),{})},function(e){const t=function(e,t){return ct(e).reduce(((e,n)=>(e.push(...function(e,t){const n=e[t];return n?Object.keys(n).map((e=>[e,n[e]])):[]}(n,t)),e)),[])}(e,"values"),n={valueDescriptorMap:{get(){return t.reduce(((e,t)=>{const n=Tt(t,this.identifier),i=this.data.getAttributeNameForKey(n.key);return Object.assign(e,{[i]:n})}),{})}}};return t.reduce(((e,t)=>Object.assign(e,function(e,t){const n=Tt(e,void 0),{key:i,name:r,reader:s,writer:o}=n;return{[r]:{get(){const e=this.data.get(i);return null!==e?s(e):n.defaultValue},set(e){void 0===e?this.data.delete(i):this.data.set(i,o(e))}},[`has${We(r)}`]:{get(){return this.data.has(i)||n.hasCustomDefaultValue}}}}(t))),n)},function(e){return lt(e,"outlets").reduce(((e,t)=>Object.assign(e,function(e){const t=Ve(e);return{[`${t}Outlet`]:{get(){const t=this.outlets.find(e);if(t){const n=this.application.getControllerForElementAndIdentifier(t,e);if(n)return n;throw new Error(`Missing "data-controller=${e}" attribute on outlet element for "${this.identifier}" controller`)}throw new Error(`Missing outlet element "${e}" for "${this.identifier}" controller`)}},[`${t}Outlets`]:{get(){const t=this.outlets.findAll(e);return t.length>0?t.map((t=>{const n=this.application.getControllerForElementAndIdentifier(t,e);if(n)return n;console.warn(`The provided outlet element is missing the outlet controller "${e}" for "${this.identifier}"`,t)})).filter((e=>e)):[]}},[`${t}OutletElement`]:{get(){const t=this.outlets.find(e);if(t)return t;throw new Error(`Missing outlet element "${e}" for "${this.identifier}" controller`)}},[`${t}OutletElements`]:{get(){return this.outlets.findAll(e)}},[`has${We(t)}Outlet`]:{get(){return this.outlets.has(e)}}}}(t))),{})}],Rt.targets=[],Rt.outlets=[],Rt.values={};const Dt=class{constructor(e=document.documentElement,t=At){this.logger=console,this.debug=!1,this.logDebugActivity=(e,t,n={})=>{this.debug&&this.logFormattedMessage(e,t,n)},this.element=e,this.schema=t,this.dispatcher=new Be(this),this.router=new St(this),this.actionDescriptorFilters=Object.assign({},$e)}static start(e,t){const n=new this(e,t);return n.start(),n}async start(){await new Promise((e=>{"loading"==document.readyState?document.addEventListener("DOMContentLoaded",(()=>e())):e()})),this.logDebugActivity("application","starting"),this.dispatcher.start(),this.router.start(),this.logDebugActivity("application","start")}stop(){this.logDebugActivity("application","stopping"),this.dispatcher.stop(),this.router.stop(),this.logDebugActivity("application","stop")}register(e,t){this.load({identifier:e,controllerConstructor:t})}registerActionOption(e,t){this.actionDescriptorFilters[e]=t}load(e,...t){(Array.isArray(e)?e:[e,...t]).forEach((e=>{e.controllerConstructor.shouldLoad&&this.router.loadDefinition(e)}))}unload(e,...t){(Array.isArray(e)?e:[e,...t]).forEach((e=>this.router.unloadIdentifier(e)))}get controllers(){return this.router.contexts.map((e=>e.controller))}getControllerForElementAndIdentifier(e,t){const n=this.router.getContextForElementAndIdentifier(e,t);return n?n.controller:null}handleError(e,t,n){var i;this.logger.error("%s\n\n%o\n\n%o",t,e,n),null===(i=window.onerror)||void 0===i||i.call(window,t,"",0,0,e)}logFormattedMessage(e,t,n={}){n=Object.assign({application:this},n),this.logger.groupCollapsed(`${e} #${t}`),this.logger.log("details:",Object.assign({},n)),this.logger.groupEnd()}}.start();Dt.debug=!1,window.Stimulus=Dt;var It=n(651),Nt=n.n(It),Ft=n(363),jt=n.n(Ft);function Bt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function $t(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Bt(Object(n),!0).forEach((function(t){Ht(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Bt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function qt(e){return qt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},qt(e)}function Ht(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Vt(){return Vt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Vt.apply(this,arguments)}function Wt(e){if("undefined"!=typeof window&&window.navigator)return!!navigator.userAgent.match(e)}var zt=Wt(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),Ut=Wt(/Edge/i),Kt=Wt(/firefox/i),Gt=Wt(/safari/i)&&!Wt(/chrome/i)&&!Wt(/android/i),Xt=Wt(/iP(ad|od|hone)/i),Yt=Wt(/chrome/i)&&Wt(/android/i),Qt={capture:!1,passive:!1};function Jt(e,t,n){e.addEventListener(t,n,!zt&&Qt)}function Zt(e,t,n){e.removeEventListener(t,n,!zt&&Qt)}function en(e,t){if(t){if(">"===t[0]&&(t=t.substring(1)),e)try{if(e.matches)return e.matches(t);if(e.msMatchesSelector)return e.msMatchesSelector(t);if(e.webkitMatchesSelector)return e.webkitMatchesSelector(t)}catch(e){return!1}return!1}}function tn(e){return e.host&&e!==document&&e.host.nodeType?e.host:e.parentNode}function nn(e,t,n,i){if(e){n=n||document;do{if(null!=t&&(">"===t[0]?e.parentNode===n&&en(e,t):en(e,t))||i&&e===n)return e;if(e===n)break}while(e=tn(e))}return null}var rn,sn=/\s+/g;function on(e,t,n){if(e&&t)if(e.classList)e.classList[n?"add":"remove"](t);else{var i=(" "+e.className+" ").replace(sn," ").replace(" "+t+" "," ");e.className=(i+(n?" "+t:"")).replace(sn," ")}}function an(e,t,n){var i=e&&e.style;if(i){if(void 0===n)return document.defaultView&&document.defaultView.getComputedStyle?n=document.defaultView.getComputedStyle(e,""):e.currentStyle&&(n=e.currentStyle),void 0===t?n:n[t];t in i||-1!==t.indexOf("webkit")||(t="-webkit-"+t),i[t]=n+("string"==typeof n?"":"px")}}function ln(e,t){var n="";if("string"==typeof e)n=e;else do{var i=an(e,"transform");i&&"none"!==i&&(n=i+" "+n)}while(!t&&(e=e.parentNode));var r=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return r&&new r(n)}function cn(e,t,n){if(e){var i=e.getElementsByTagName(t),r=0,s=i.length;if(n)for(;r<s;r++)n(i[r],r);return i}return[]}function hn(){return document.scrollingElement||document.documentElement}function un(e,t,n,i,r){if(e.getBoundingClientRect||e===window){var s,o,a,l,c,h,u;if(e!==window&&e.parentNode&&e!==hn()?(o=(s=e.getBoundingClientRect()).top,a=s.left,l=s.bottom,c=s.right,h=s.height,u=s.width):(o=0,a=0,l=window.innerHeight,c=window.innerWidth,h=window.innerHeight,u=window.innerWidth),(t||n)&&e!==window&&(r=r||e.parentNode,!zt))do{if(r&&r.getBoundingClientRect&&("none"!==an(r,"transform")||n&&"static"!==an(r,"position"))){var d=r.getBoundingClientRect();o-=d.top+parseInt(an(r,"border-top-width")),a-=d.left+parseInt(an(r,"border-left-width")),l=o+s.height,c=a+s.width;break}}while(r=r.parentNode);if(i&&e!==window){var p=ln(r||e),m=p&&p.a,f=p&&p.d;p&&(l=(o/=f)+(h/=f),c=(a/=m)+(u/=m))}return{top:o,left:a,bottom:l,right:c,width:u,height:h}}}function dn(e,t,n){for(var i=vn(e,!0),r=un(e)[t];i;){var s=un(i)[n];if(!("top"===n||"left"===n?r>=s:r<=s))return i;if(i===hn())break;i=vn(i,!1)}return!1}function pn(e,t,n,i){for(var r=0,s=0,o=e.children;s<o.length;){if("none"!==o[s].style.display&&o[s]!==yi.ghost&&(i||o[s]!==yi.dragged)&&nn(o[s],n.draggable,e,!1)){if(r===t)return o[s];r++}s++}return null}function mn(e,t){for(var n=e.lastElementChild;n&&(n===yi.ghost||"none"===an(n,"display")||t&&!en(n,t));)n=n.previousElementSibling;return n||null}function fn(e,t){var n=0;if(!e||!e.parentNode)return-1;for(;e=e.previousElementSibling;)"TEMPLATE"===e.nodeName.toUpperCase()||e===yi.clone||t&&!en(e,t)||n++;return n}function gn(e){var t=0,n=0,i=hn();if(e)do{var r=ln(e),s=r.a,o=r.d;t+=e.scrollLeft*s,n+=e.scrollTop*o}while(e!==i&&(e=e.parentNode));return[t,n]}function vn(e,t){if(!e||!e.getBoundingClientRect)return hn();var n=e,i=!1;do{if(n.clientWidth<n.scrollWidth||n.clientHeight<n.scrollHeight){var r=an(n);if(n.clientWidth<n.scrollWidth&&("auto"==r.overflowX||"scroll"==r.overflowX)||n.clientHeight<n.scrollHeight&&("auto"==r.overflowY||"scroll"==r.overflowY)){if(!n.getBoundingClientRect||n===document.body)return hn();if(i||t)return n;i=!0}}}while(n=n.parentNode);return hn()}function bn(e,t){return Math.round(e.top)===Math.round(t.top)&&Math.round(e.left)===Math.round(t.left)&&Math.round(e.height)===Math.round(t.height)&&Math.round(e.width)===Math.round(t.width)}function yn(e,t){return function(){if(!rn){var n=arguments;1===n.length?e.call(this,n[0]):e.apply(this,n),rn=setTimeout((function(){rn=void 0}),t)}}}function wn(e,t,n){e.scrollLeft+=t,e.scrollTop+=n}function _n(e){var t=window.Polymer,n=window.jQuery||window.Zepto;return t&&t.dom?t.dom(e).cloneNode(!0):n?n(e).clone(!0)[0]:e.cloneNode(!0)}var En="Sortable"+(new Date).getTime();var Sn=[],An={initializeByDefault:!0},Cn={mount:function(e){for(var t in An)An.hasOwnProperty(t)&&!(t in e)&&(e[t]=An[t]);Sn.forEach((function(t){if(t.pluginName===e.pluginName)throw"Sortable: Cannot mount plugin ".concat(e.pluginName," more than once")})),Sn.push(e)},pluginEvent:function(e,t,n){var i=this;this.eventCanceled=!1,n.cancel=function(){i.eventCanceled=!0};var r=e+"Global";Sn.forEach((function(i){t[i.pluginName]&&(t[i.pluginName][r]&&t[i.pluginName][r]($t({sortable:t},n)),t.options[i.pluginName]&&t[i.pluginName][e]&&t[i.pluginName][e]($t({sortable:t},n)))}))},initializePlugins:function(e,t,n,i){for(var r in Sn.forEach((function(i){var r=i.pluginName;if(e.options[r]||i.initializeByDefault){var s=new i(e,t,e.options);s.sortable=e,s.options=e.options,e[r]=s,Vt(n,s.defaults)}})),e.options)if(e.options.hasOwnProperty(r)){var s=this.modifyOption(e,r,e.options[r]);void 0!==s&&(e.options[r]=s)}},getEventProperties:function(e,t){var n={};return Sn.forEach((function(i){"function"==typeof i.eventProperties&&Vt(n,i.eventProperties.call(t[i.pluginName],e))})),n},modifyOption:function(e,t,n){var i;return Sn.forEach((function(r){e[r.pluginName]&&r.optionListeners&&"function"==typeof r.optionListeners[t]&&(i=r.optionListeners[t].call(e[r.pluginName],n))})),i}};var Tn=["evt"],kn=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=n.evt,r=function(e,t){if(null==e)return{};var n,i,r=function(e,t){if(null==e)return{};var n,i,r={},s=Object.keys(e);for(i=0;i<s.length;i++)n=s[i],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(i=0;i<s.length;i++)n=s[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}(n,Tn);Cn.pluginEvent.bind(yi)(e,t,$t({dragEl:xn,parentEl:Ln,ghostEl:Mn,rootEl:Pn,nextEl:Rn,lastDownEl:Dn,cloneEl:In,cloneHidden:Nn,dragStarted:Xn,putSortable:Hn,activeSortable:yi.active,originalEvent:i,oldIndex:Fn,oldDraggableIndex:Bn,newIndex:jn,newDraggableIndex:$n,hideGhostForTarget:fi,unhideGhostForTarget:gi,cloneNowHidden:function(){Nn=!0},cloneNowShown:function(){Nn=!1},dispatchSortableEvent:function(e){On({sortable:t,name:e,originalEvent:i})}},r))};function On(e){!function(e){var t=e.sortable,n=e.rootEl,i=e.name,r=e.targetEl,s=e.cloneEl,o=e.toEl,a=e.fromEl,l=e.oldIndex,c=e.newIndex,h=e.oldDraggableIndex,u=e.newDraggableIndex,d=e.originalEvent,p=e.putSortable,m=e.extraEventProperties;if(t=t||n&&n[En]){var f,g=t.options,v="on"+i.charAt(0).toUpperCase()+i.substr(1);!window.CustomEvent||zt||Ut?(f=document.createEvent("Event")).initEvent(i,!0,!0):f=new CustomEvent(i,{bubbles:!0,cancelable:!0}),f.to=o||n,f.from=a||n,f.item=r||n,f.clone=s,f.oldIndex=l,f.newIndex=c,f.oldDraggableIndex=h,f.newDraggableIndex=u,f.originalEvent=d,f.pullMode=p?p.lastPutMode:void 0;var b=$t($t({},m),Cn.getEventProperties(i,t));for(var y in b)f[y]=b[y];n&&n.dispatchEvent(f),g[v]&&g[v].call(t,f)}}($t({putSortable:Hn,cloneEl:In,targetEl:xn,rootEl:Pn,oldIndex:Fn,oldDraggableIndex:Bn,newIndex:jn,newDraggableIndex:$n},e))}var xn,Ln,Mn,Pn,Rn,Dn,In,Nn,Fn,jn,Bn,$n,qn,Hn,Vn,Wn,zn,Un,Kn,Gn,Xn,Yn,Qn,Jn,Zn,ei=!1,ti=!1,ni=[],ii=!1,ri=!1,si=[],oi=!1,ai=[],li="undefined"!=typeof document,ci=Xt,hi=Ut||zt?"cssFloat":"float",ui=li&&!Yt&&!Xt&&"draggable"in document.createElement("div"),di=function(){if(li){if(zt)return!1;var e=document.createElement("x");return e.style.cssText="pointer-events:auto","auto"===e.style.pointerEvents}}(),pi=function(e,t){var n=an(e),i=parseInt(n.width)-parseInt(n.paddingLeft)-parseInt(n.paddingRight)-parseInt(n.borderLeftWidth)-parseInt(n.borderRightWidth),r=pn(e,0,t),s=pn(e,1,t),o=r&&an(r),a=s&&an(s),l=o&&parseInt(o.marginLeft)+parseInt(o.marginRight)+un(r).width,c=a&&parseInt(a.marginLeft)+parseInt(a.marginRight)+un(s).width;if("flex"===n.display)return"column"===n.flexDirection||"column-reverse"===n.flexDirection?"vertical":"horizontal";if("grid"===n.display)return n.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(r&&o.float&&"none"!==o.float){var h="left"===o.float?"left":"right";return!s||"both"!==a.clear&&a.clear!==h?"horizontal":"vertical"}return r&&("block"===o.display||"flex"===o.display||"table"===o.display||"grid"===o.display||l>=i&&"none"===n[hi]||s&&"none"===n[hi]&&l+c>i)?"vertical":"horizontal"},mi=function(e){function t(e,n){return function(i,r,s,o){var a=i.options.group.name&&r.options.group.name&&i.options.group.name===r.options.group.name;if(null==e&&(n||a))return!0;if(null==e||!1===e)return!1;if(n&&"clone"===e)return e;if("function"==typeof e)return t(e(i,r,s,o),n)(i,r,s,o);var l=(n?i:r).options.group.name;return!0===e||"string"==typeof e&&e===l||e.join&&e.indexOf(l)>-1}}var n={},i=e.group;i&&"object"==qt(i)||(i={name:i}),n.name=i.name,n.checkPull=t(i.pull,!0),n.checkPut=t(i.put),n.revertClone=i.revertClone,e.group=n},fi=function(){!di&&Mn&&an(Mn,"display","none")},gi=function(){!di&&Mn&&an(Mn,"display","")};li&&!Yt&&document.addEventListener("click",(function(e){if(ti)return e.preventDefault(),e.stopPropagation&&e.stopPropagation(),e.stopImmediatePropagation&&e.stopImmediatePropagation(),ti=!1,!1}),!0);var vi=function(e){if(xn){e=e.touches?e.touches[0]:e;var t=(r=e.clientX,s=e.clientY,ni.some((function(e){var t=e[En].options.emptyInsertThreshold;if(t&&!mn(e)){var n=un(e),i=r>=n.left-t&&r<=n.right+t,a=s>=n.top-t&&s<=n.bottom+t;return i&&a?o=e:void 0}})),o);if(t){var n={};for(var i in e)e.hasOwnProperty(i)&&(n[i]=e[i]);n.target=n.rootEl=t,n.preventDefault=void 0,n.stopPropagation=void 0,t[En]._onDragOver(n)}}var r,s,o},bi=function(e){xn&&xn.parentNode[En]._isOutsideThisEl(e.target)};function yi(e,t){if(!e||!e.nodeType||1!==e.nodeType)throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(e));this.el=e,this.options=t=Vt({},t),e[En]=this;var n,i,r={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(e.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return pi(e,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(e,t){e.setData("Text",t.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:!1!==yi.supportPointer&&"PointerEvent"in window&&!Gt,emptyInsertThreshold:5};for(var s in Cn.initializePlugins(this,e,r),r)!(s in t)&&(t[s]=r[s]);for(var o in mi(t),this)"_"===o.charAt(0)&&"function"==typeof this[o]&&(this[o]=this[o].bind(this));this.nativeDraggable=!t.forceFallback&&ui,this.nativeDraggable&&(this.options.touchStartThreshold=1),t.supportPointer?Jt(e,"pointerdown",this._onTapStart):(Jt(e,"mousedown",this._onTapStart),Jt(e,"touchstart",this._onTapStart)),this.nativeDraggable&&(Jt(e,"dragover",this),Jt(e,"dragenter",this)),ni.push(this.el),t.store&&t.store.get&&this.sort(t.store.get(this)||[]),Vt(this,(i=[],{captureAnimationState:function(){i=[],this.options.animation&&[].slice.call(this.el.children).forEach((function(e){if("none"!==an(e,"display")&&e!==yi.ghost){i.push({target:e,rect:un(e)});var t=$t({},i[i.length-1].rect);if(e.thisAnimationDuration){var n=ln(e,!0);n&&(t.top-=n.f,t.left-=n.e)}e.fromRect=t}}))},addAnimationState:function(e){i.push(e)},removeAnimationState:function(e){i.splice(function(e,t){for(var n in e)if(e.hasOwnProperty(n))for(var i in t)if(t.hasOwnProperty(i)&&t[i]===e[n][i])return Number(n);return-1}(i,{target:e}),1)},animateAll:function(e){var t=this;if(!this.options.animation)return clearTimeout(n),void("function"==typeof e&&e());var r=!1,s=0;i.forEach((function(e){var n=0,i=e.target,o=i.fromRect,a=un(i),l=i.prevFromRect,c=i.prevToRect,h=e.rect,u=ln(i,!0);u&&(a.top-=u.f,a.left-=u.e),i.toRect=a,i.thisAnimationDuration&&bn(l,a)&&!bn(o,a)&&(h.top-a.top)/(h.left-a.left)==(o.top-a.top)/(o.left-a.left)&&(n=function(e,t,n,i){return Math.sqrt(Math.pow(t.top-e.top,2)+Math.pow(t.left-e.left,2))/Math.sqrt(Math.pow(t.top-n.top,2)+Math.pow(t.left-n.left,2))*i.animation}(h,l,c,t.options)),bn(a,o)||(i.prevFromRect=o,i.prevToRect=a,n||(n=t.options.animation),t.animate(i,h,a,n)),n&&(r=!0,s=Math.max(s,n),clearTimeout(i.animationResetTimer),i.animationResetTimer=setTimeout((function(){i.animationTime=0,i.prevFromRect=null,i.fromRect=null,i.prevToRect=null,i.thisAnimationDuration=null}),n),i.thisAnimationDuration=n)})),clearTimeout(n),r?n=setTimeout((function(){"function"==typeof e&&e()}),s):"function"==typeof e&&e(),i=[]},animate:function(e,t,n,i){if(i){an(e,"transition",""),an(e,"transform","");var r=ln(this.el),s=r&&r.a,o=r&&r.d,a=(t.left-n.left)/(s||1),l=(t.top-n.top)/(o||1);e.animatingX=!!a,e.animatingY=!!l,an(e,"transform","translate3d("+a+"px,"+l+"px,0)"),this.forRepaintDummy=function(e){return e.offsetWidth}(e),an(e,"transition","transform "+i+"ms"+(this.options.easing?" "+this.options.easing:"")),an(e,"transform","translate3d(0,0,0)"),"number"==typeof e.animated&&clearTimeout(e.animated),e.animated=setTimeout((function(){an(e,"transition",""),an(e,"transform",""),e.animated=!1,e.animatingX=!1,e.animatingY=!1}),i)}}}))}function wi(e,t,n,i,r,s,o,a){var l,c,h=e[En],u=h.options.onMove;return!window.CustomEvent||zt||Ut?(l=document.createEvent("Event")).initEvent("move",!0,!0):l=new CustomEvent("move",{bubbles:!0,cancelable:!0}),l.to=t,l.from=e,l.dragged=n,l.draggedRect=i,l.related=r||t,l.relatedRect=s||un(t),l.willInsertAfter=a,l.originalEvent=o,e.dispatchEvent(l),u&&(c=u.call(h,l,o)),c}function _i(e){e.draggable=!1}function Ei(){oi=!1}function Si(e){for(var t=e.tagName+e.className+e.src+e.href+e.textContent,n=t.length,i=0;n--;)i+=t.charCodeAt(n);return i.toString(36)}function Ai(e){return setTimeout(e,0)}function Ci(e){return clearTimeout(e)}yi.prototype={constructor:yi,_isOutsideThisEl:function(e){this.el.contains(e)||e===this.el||(Yn=null)},_getDirection:function(e,t){return"function"==typeof this.options.direction?this.options.direction.call(this,e,t,xn):this.options.direction},_onTapStart:function(e){if(e.cancelable){var t=this,n=this.el,i=this.options,r=i.preventOnFilter,s=e.type,o=e.touches&&e.touches[0]||e.pointerType&&"touch"===e.pointerType&&e,a=(o||e).target,l=e.target.shadowRoot&&(e.path&&e.path[0]||e.composedPath&&e.composedPath()[0])||a,c=i.filter;if(function(e){ai.length=0;for(var t=e.getElementsByTagName("input"),n=t.length;n--;){var i=t[n];i.checked&&ai.push(i)}}(n),!xn&&!(/mousedown|pointerdown/.test(s)&&0!==e.button||i.disabled)&&!l.isContentEditable&&(this.nativeDraggable||!Gt||!a||"SELECT"!==a.tagName.toUpperCase())&&!((a=nn(a,i.draggable,n,!1))&&a.animated||Dn===a)){if(Fn=fn(a),Bn=fn(a,i.draggable),"function"==typeof c){if(c.call(this,e,a,this))return On({sortable:t,rootEl:l,name:"filter",targetEl:a,toEl:n,fromEl:n}),kn("filter",t,{evt:e}),void(r&&e.cancelable&&e.preventDefault())}else if(c&&(c=c.split(",").some((function(i){if(i=nn(l,i.trim(),n,!1))return On({sortable:t,rootEl:i,name:"filter",targetEl:a,fromEl:n,toEl:n}),kn("filter",t,{evt:e}),!0}))))return void(r&&e.cancelable&&e.preventDefault());i.handle&&!nn(l,i.handle,n,!1)||this._prepareDragStart(e,o,a)}}},_prepareDragStart:function(e,t,n){var i,r=this,s=r.el,o=r.options,a=s.ownerDocument;if(n&&!xn&&n.parentNode===s){var l=un(n);if(Pn=s,Ln=(xn=n).parentNode,Rn=xn.nextSibling,Dn=n,qn=o.group,yi.dragged=xn,Vn={target:xn,clientX:(t||e).clientX,clientY:(t||e).clientY},Kn=Vn.clientX-l.left,Gn=Vn.clientY-l.top,this._lastX=(t||e).clientX,this._lastY=(t||e).clientY,xn.style["will-change"]="all",i=function(){kn("delayEnded",r,{evt:e}),yi.eventCanceled?r._onDrop():(r._disableDelayedDragEvents(),!Kt&&r.nativeDraggable&&(xn.draggable=!0),r._triggerDragStart(e,t),On({sortable:r,name:"choose",originalEvent:e}),on(xn,o.chosenClass,!0))},o.ignore.split(",").forEach((function(e){cn(xn,e.trim(),_i)})),Jt(a,"dragover",vi),Jt(a,"mousemove",vi),Jt(a,"touchmove",vi),Jt(a,"mouseup",r._onDrop),Jt(a,"touchend",r._onDrop),Jt(a,"touchcancel",r._onDrop),Kt&&this.nativeDraggable&&(this.options.touchStartThreshold=4,xn.draggable=!0),kn("delayStart",this,{evt:e}),!o.delay||o.delayOnTouchOnly&&!t||this.nativeDraggable&&(Ut||zt))i();else{if(yi.eventCanceled)return void this._onDrop();Jt(a,"mouseup",r._disableDelayedDrag),Jt(a,"touchend",r._disableDelayedDrag),Jt(a,"touchcancel",r._disableDelayedDrag),Jt(a,"mousemove",r._delayedDragTouchMoveHandler),Jt(a,"touchmove",r._delayedDragTouchMoveHandler),o.supportPointer&&Jt(a,"pointermove",r._delayedDragTouchMoveHandler),r._dragStartTimer=setTimeout(i,o.delay)}}},_delayedDragTouchMoveHandler:function(e){var t=e.touches?e.touches[0]:e;Math.max(Math.abs(t.clientX-this._lastX),Math.abs(t.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){xn&&_i(xn),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var e=this.el.ownerDocument;Zt(e,"mouseup",this._disableDelayedDrag),Zt(e,"touchend",this._disableDelayedDrag),Zt(e,"touchcancel",this._disableDelayedDrag),Zt(e,"mousemove",this._delayedDragTouchMoveHandler),Zt(e,"touchmove",this._delayedDragTouchMoveHandler),Zt(e,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(e,t){t=t||"touch"==e.pointerType&&e,!this.nativeDraggable||t?this.options.supportPointer?Jt(document,"pointermove",this._onTouchMove):Jt(document,t?"touchmove":"mousemove",this._onTouchMove):(Jt(xn,"dragend",this),Jt(Pn,"dragstart",this._onDragStart));try{document.selection?Ai((function(){document.selection.empty()})):window.getSelection().removeAllRanges()}catch(e){}},_dragStarted:function(e,t){if(ei=!1,Pn&&xn){kn("dragStarted",this,{evt:t}),this.nativeDraggable&&Jt(document,"dragover",bi);var n=this.options;!e&&on(xn,n.dragClass,!1),on(xn,n.ghostClass,!0),yi.active=this,e&&this._appendGhost(),On({sortable:this,name:"start",originalEvent:t})}else this._nulling()},_emulateDragOver:function(){if(Wn){this._lastX=Wn.clientX,this._lastY=Wn.clientY,fi();for(var e=document.elementFromPoint(Wn.clientX,Wn.clientY),t=e;e&&e.shadowRoot&&(e=e.shadowRoot.elementFromPoint(Wn.clientX,Wn.clientY))!==t;)t=e;if(xn.parentNode[En]._isOutsideThisEl(e),t)do{if(t[En]&&t[En]._onDragOver({clientX:Wn.clientX,clientY:Wn.clientY,target:e,rootEl:t})&&!this.options.dragoverBubble)break;e=t}while(t=t.parentNode);gi()}},_onTouchMove:function(e){if(Vn){var t=this.options,n=t.fallbackTolerance,i=t.fallbackOffset,r=e.touches?e.touches[0]:e,s=Mn&&ln(Mn,!0),o=Mn&&s&&s.a,a=Mn&&s&&s.d,l=ci&&Zn&&gn(Zn),c=(r.clientX-Vn.clientX+i.x)/(o||1)+(l?l[0]-si[0]:0)/(o||1),h=(r.clientY-Vn.clientY+i.y)/(a||1)+(l?l[1]-si[1]:0)/(a||1);if(!yi.active&&!ei){if(n&&Math.max(Math.abs(r.clientX-this._lastX),Math.abs(r.clientY-this._lastY))<n)return;this._onDragStart(e,!0)}if(Mn){s?(s.e+=c-(zn||0),s.f+=h-(Un||0)):s={a:1,b:0,c:0,d:1,e:c,f:h};var u="matrix(".concat(s.a,",").concat(s.b,",").concat(s.c,",").concat(s.d,",").concat(s.e,",").concat(s.f,")");an(Mn,"webkitTransform",u),an(Mn,"mozTransform",u),an(Mn,"msTransform",u),an(Mn,"transform",u),zn=c,Un=h,Wn=r}e.cancelable&&e.preventDefault()}},_appendGhost:function(){if(!Mn){var e=this.options.fallbackOnBody?document.body:Pn,t=un(xn,!0,ci,!0,e),n=this.options;if(ci){for(Zn=e;"static"===an(Zn,"position")&&"none"===an(Zn,"transform")&&Zn!==document;)Zn=Zn.parentNode;Zn!==document.body&&Zn!==document.documentElement?(Zn===document&&(Zn=hn()),t.top+=Zn.scrollTop,t.left+=Zn.scrollLeft):Zn=hn(),si=gn(Zn)}on(Mn=xn.cloneNode(!0),n.ghostClass,!1),on(Mn,n.fallbackClass,!0),on(Mn,n.dragClass,!0),an(Mn,"transition",""),an(Mn,"transform",""),an(Mn,"box-sizing","border-box"),an(Mn,"margin",0),an(Mn,"top",t.top),an(Mn,"left",t.left),an(Mn,"width",t.width),an(Mn,"height",t.height),an(Mn,"opacity","0.8"),an(Mn,"position",ci?"absolute":"fixed"),an(Mn,"zIndex","100000"),an(Mn,"pointerEvents","none"),yi.ghost=Mn,e.appendChild(Mn),an(Mn,"transform-origin",Kn/parseInt(Mn.style.width)*100+"% "+Gn/parseInt(Mn.style.height)*100+"%")}},_onDragStart:function(e,t){var n=this,i=e.dataTransfer,r=n.options;kn("dragStart",this,{evt:e}),yi.eventCanceled?this._onDrop():(kn("setupClone",this),yi.eventCanceled||((In=_n(xn)).removeAttribute("id"),In.draggable=!1,In.style["will-change"]="",this._hideClone(),on(In,this.options.chosenClass,!1),yi.clone=In),n.cloneId=Ai((function(){kn("clone",n),yi.eventCanceled||(n.options.removeCloneOnHide||Pn.insertBefore(In,xn),n._hideClone(),On({sortable:n,name:"clone"}))})),!t&&on(xn,r.dragClass,!0),t?(ti=!0,n._loopId=setInterval(n._emulateDragOver,50)):(Zt(document,"mouseup",n._onDrop),Zt(document,"touchend",n._onDrop),Zt(document,"touchcancel",n._onDrop),i&&(i.effectAllowed="move",r.setData&&r.setData.call(n,i,xn)),Jt(document,"drop",n),an(xn,"transform","translateZ(0)")),ei=!0,n._dragStartId=Ai(n._dragStarted.bind(n,t,e)),Jt(document,"selectstart",n),Xn=!0,Gt&&an(document.body,"user-select","none"))},_onDragOver:function(e){var t,n,i,r,s=this.el,o=e.target,a=this.options,l=a.group,c=yi.active,h=qn===l,u=a.sort,d=Hn||c,p=this,m=!1;if(!oi){if(void 0!==e.preventDefault&&e.cancelable&&e.preventDefault(),o=nn(o,a.draggable,s,!0),x("dragOver"),yi.eventCanceled)return m;if(xn.contains(e.target)||o.animated&&o.animatingX&&o.animatingY||p._ignoreWhileAnimating===o)return M(!1);if(ti=!1,c&&!a.disabled&&(h?u||(i=Ln!==Pn):Hn===this||(this.lastPutMode=qn.checkPull(this,c,xn,e))&&l.checkPut(this,c,xn,e))){if(r="vertical"===this._getDirection(e,o),t=un(xn),x("dragOverValid"),yi.eventCanceled)return m;if(i)return Ln=Pn,L(),this._hideClone(),x("revert"),yi.eventCanceled||(Rn?Pn.insertBefore(xn,Rn):Pn.appendChild(xn)),M(!0);var f=mn(s,a.draggable);if(!f||function(e,t,n){var i=un(mn(n.el,n.options.draggable));return t?e.clientX>i.right+10||e.clientX<=i.right&&e.clientY>i.bottom&&e.clientX>=i.left:e.clientX>i.right&&e.clientY>i.top||e.clientX<=i.right&&e.clientY>i.bottom+10}(e,r,this)&&!f.animated){if(f===xn)return M(!1);if(f&&s===e.target&&(o=f),o&&(n=un(o)),!1!==wi(Pn,s,xn,t,o,n,e,!!o))return L(),f&&f.nextSibling?s.insertBefore(xn,f.nextSibling):s.appendChild(xn),Ln=s,P(),M(!0)}else if(f&&function(e,t,n){var i=un(pn(n.el,0,n.options,!0));return t?e.clientX<i.left-10||e.clientY<i.top&&e.clientX<i.right:e.clientY<i.top-10||e.clientY<i.bottom&&e.clientX<i.left}(e,r,this)){var g=pn(s,0,a,!0);if(g===xn)return M(!1);if(n=un(o=g),!1!==wi(Pn,s,xn,t,o,n,e,!1))return L(),s.insertBefore(xn,g),Ln=s,P(),M(!0)}else if(o.parentNode===s){n=un(o);var v,b,y,w=xn.parentNode!==s,_=!function(e,t,n){var i=n?e.left:e.top,r=n?e.right:e.bottom,s=n?e.width:e.height,o=n?t.left:t.top,a=n?t.right:t.bottom,l=n?t.width:t.height;return i===o||r===a||i+s/2===o+l/2}(xn.animated&&xn.toRect||t,o.animated&&o.toRect||n,r),E=r?"top":"left",S=dn(o,"top","top")||dn(xn,"top","top"),A=S?S.scrollTop:void 0;if(Yn!==o&&(b=n[E],ii=!1,ri=!_&&a.invertSwap||w),v=function(e,t,n,i,r,s,o,a){var l=i?e.clientY:e.clientX,c=i?n.height:n.width,h=i?n.top:n.left,u=i?n.bottom:n.right,d=!1;if(!o)if(a&&Jn<c*r){if(!ii&&(1===Qn?l>h+c*s/2:l<u-c*s/2)&&(ii=!0),ii)d=!0;else if(1===Qn?l<h+Jn:l>u-Jn)return-Qn}else if(l>h+c*(1-r)/2&&l<u-c*(1-r)/2)return function(e){return fn(xn)<fn(e)?1:-1}(t);return(d=d||o)&&(l<h+c*s/2||l>u-c*s/2)?l>h+c/2?1:-1:0}(e,o,n,r,_?1:a.swapThreshold,null==a.invertedSwapThreshold?a.swapThreshold:a.invertedSwapThreshold,ri,Yn===o),0!==v){var C=fn(xn);do{C-=v,y=Ln.children[C]}while(y&&("none"===an(y,"display")||y===Mn))}if(0===v||y===o)return M(!1);Yn=o,Qn=v;var T=o.nextElementSibling,k=!1,O=wi(Pn,s,xn,t,o,n,e,k=1===v);if(!1!==O)return 1!==O&&-1!==O||(k=1===O),oi=!0,setTimeout(Ei,30),L(),k&&!T?s.appendChild(xn):o.parentNode.insertBefore(xn,k?T:o),S&&wn(S,0,A-S.scrollTop),Ln=xn.parentNode,void 0===b||ri||(Jn=Math.abs(b-un(o)[E])),P(),M(!0)}if(s.contains(xn))return M(!1)}return!1}function x(a,l){kn(a,p,$t({evt:e,isOwner:h,axis:r?"vertical":"horizontal",revert:i,dragRect:t,targetRect:n,canSort:u,fromSortable:d,target:o,completed:M,onMove:function(n,i){return wi(Pn,s,xn,t,n,un(n),e,i)},changed:P},l))}function L(){x("dragOverAnimationCapture"),p.captureAnimationState(),p!==d&&d.captureAnimationState()}function M(t){return x("dragOverCompleted",{insertion:t}),t&&(h?c._hideClone():c._showClone(p),p!==d&&(on(xn,Hn?Hn.options.ghostClass:c.options.ghostClass,!1),on(xn,a.ghostClass,!0)),Hn!==p&&p!==yi.active?Hn=p:p===yi.active&&Hn&&(Hn=null),d===p&&(p._ignoreWhileAnimating=o),p.animateAll((function(){x("dragOverAnimationComplete"),p._ignoreWhileAnimating=null})),p!==d&&(d.animateAll(),d._ignoreWhileAnimating=null)),(o===xn&&!xn.animated||o===s&&!o.animated)&&(Yn=null),a.dragoverBubble||e.rootEl||o===document||(xn.parentNode[En]._isOutsideThisEl(e.target),!t&&vi(e)),!a.dragoverBubble&&e.stopPropagation&&e.stopPropagation(),m=!0}function P(){jn=fn(xn),$n=fn(xn,a.draggable),On({sortable:p,name:"change",toEl:s,newIndex:jn,newDraggableIndex:$n,originalEvent:e})}},_ignoreWhileAnimating:null,_offMoveEvents:function(){Zt(document,"mousemove",this._onTouchMove),Zt(document,"touchmove",this._onTouchMove),Zt(document,"pointermove",this._onTouchMove),Zt(document,"dragover",vi),Zt(document,"mousemove",vi),Zt(document,"touchmove",vi)},_offUpEvents:function(){var e=this.el.ownerDocument;Zt(e,"mouseup",this._onDrop),Zt(e,"touchend",this._onDrop),Zt(e,"pointerup",this._onDrop),Zt(e,"touchcancel",this._onDrop),Zt(document,"selectstart",this)},_onDrop:function(e){var t=this.el,n=this.options;jn=fn(xn),$n=fn(xn,n.draggable),kn("drop",this,{evt:e}),Ln=xn&&xn.parentNode,jn=fn(xn),$n=fn(xn,n.draggable),yi.eventCanceled||(ei=!1,ri=!1,ii=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),Ci(this.cloneId),Ci(this._dragStartId),this.nativeDraggable&&(Zt(document,"drop",this),Zt(t,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),Gt&&an(document.body,"user-select",""),an(xn,"transform",""),e&&(Xn&&(e.cancelable&&e.preventDefault(),!n.dropBubble&&e.stopPropagation()),Mn&&Mn.parentNode&&Mn.parentNode.removeChild(Mn),(Pn===Ln||Hn&&"clone"!==Hn.lastPutMode)&&In&&In.parentNode&&In.parentNode.removeChild(In),xn&&(this.nativeDraggable&&Zt(xn,"dragend",this),_i(xn),xn.style["will-change"]="",Xn&&!ei&&on(xn,Hn?Hn.options.ghostClass:this.options.ghostClass,!1),on(xn,this.options.chosenClass,!1),On({sortable:this,name:"unchoose",toEl:Ln,newIndex:null,newDraggableIndex:null,originalEvent:e}),Pn!==Ln?(jn>=0&&(On({rootEl:Ln,name:"add",toEl:Ln,fromEl:Pn,originalEvent:e}),On({sortable:this,name:"remove",toEl:Ln,originalEvent:e}),On({rootEl:Ln,name:"sort",toEl:Ln,fromEl:Pn,originalEvent:e}),On({sortable:this,name:"sort",toEl:Ln,originalEvent:e})),Hn&&Hn.save()):jn!==Fn&&jn>=0&&(On({sortable:this,name:"update",toEl:Ln,originalEvent:e}),On({sortable:this,name:"sort",toEl:Ln,originalEvent:e})),yi.active&&(null!=jn&&-1!==jn||(jn=Fn,$n=Bn),On({sortable:this,name:"end",toEl:Ln,originalEvent:e}),this.save())))),this._nulling()},_nulling:function(){kn("nulling",this),Pn=xn=Ln=Mn=Rn=In=Dn=Nn=Vn=Wn=Xn=jn=$n=Fn=Bn=Yn=Qn=Hn=qn=yi.dragged=yi.ghost=yi.clone=yi.active=null,ai.forEach((function(e){e.checked=!0})),ai.length=zn=Un=0},handleEvent:function(e){switch(e.type){case"drop":case"dragend":this._onDrop(e);break;case"dragenter":case"dragover":xn&&(this._onDragOver(e),function(e){e.dataTransfer&&(e.dataTransfer.dropEffect="move"),e.cancelable&&e.preventDefault()}(e));break;case"selectstart":e.preventDefault()}},toArray:function(){for(var e,t=[],n=this.el.children,i=0,r=n.length,s=this.options;i<r;i++)nn(e=n[i],s.draggable,this.el,!1)&&t.push(e.getAttribute(s.dataIdAttr)||Si(e));return t},sort:function(e,t){var n={},i=this.el;this.toArray().forEach((function(e,t){var r=i.children[t];nn(r,this.options.draggable,i,!1)&&(n[e]=r)}),this),t&&this.captureAnimationState(),e.forEach((function(e){n[e]&&(i.removeChild(n[e]),i.appendChild(n[e]))})),t&&this.animateAll()},save:function(){var e=this.options.store;e&&e.set&&e.set(this)},closest:function(e,t){return nn(e,t||this.options.draggable,this.el,!1)},option:function(e,t){var n=this.options;if(void 0===t)return n[e];var i=Cn.modifyOption(this,e,t);n[e]=void 0!==i?i:t,"group"===e&&mi(n)},destroy:function(){kn("destroy",this);var e=this.el;e[En]=null,Zt(e,"mousedown",this._onTapStart),Zt(e,"touchstart",this._onTapStart),Zt(e,"pointerdown",this._onTapStart),this.nativeDraggable&&(Zt(e,"dragover",this),Zt(e,"dragenter",this)),Array.prototype.forEach.call(e.querySelectorAll("[draggable]"),(function(e){e.removeAttribute("draggable")})),this._onDrop(),this._disableDelayedDragEvents(),ni.splice(ni.indexOf(this.el),1),this.el=e=null},_hideClone:function(){if(!Nn){if(kn("hideClone",this),yi.eventCanceled)return;an(In,"display","none"),this.options.removeCloneOnHide&&In.parentNode&&In.parentNode.removeChild(In),Nn=!0}},_showClone:function(e){if("clone"===e.lastPutMode){if(Nn){if(kn("showClone",this),yi.eventCanceled)return;xn.parentNode!=Pn||this.options.group.revertClone?Rn?Pn.insertBefore(In,Rn):Pn.appendChild(In):Pn.insertBefore(In,xn),this.options.group.revertClone&&this.animate(xn,In),an(In,"display",""),Nn=!1}}else this._hideClone()}},li&&Jt(document,"touchmove",(function(e){(yi.active||ei)&&e.cancelable&&e.preventDefault()})),yi.utils={on:Jt,off:Zt,css:an,find:cn,is:function(e,t){return!!nn(e,t,e,!1)},extend:function(e,t){if(e&&t)for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e},throttle:yn,closest:nn,toggleClass:on,clone:_n,index:fn,nextTick:Ai,cancelNextTick:Ci,detectDirection:pi,getChild:pn},yi.get=function(e){return e[En]},yi.mount=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];t[0].constructor===Array&&(t=t[0]),t.forEach((function(e){if(!e.prototype||!e.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(e));e.utils&&(yi.utils=$t($t({},yi.utils),e.utils)),Cn.mount(e)}))},yi.create=function(e,t){return new yi(e,t)},yi.version="1.15.0";var Ti,ki,Oi,xi,Li,Mi,Pi=[],Ri=!1;function Di(){Pi.forEach((function(e){clearInterval(e.pid)})),Pi=[]}function Ii(){clearInterval(Mi)}var Ni=yn((function(e,t,n,i){if(t.scroll){var r,s=(e.touches?e.touches[0]:e).clientX,o=(e.touches?e.touches[0]:e).clientY,a=t.scrollSensitivity,l=t.scrollSpeed,c=hn(),h=!1;ki!==n&&(ki=n,Di(),Ti=t.scroll,r=t.scrollFn,!0===Ti&&(Ti=vn(n,!0)));var u=0,d=Ti;do{var p=d,m=un(p),f=m.top,g=m.bottom,v=m.left,b=m.right,y=m.width,w=m.height,_=void 0,E=void 0,S=p.scrollWidth,A=p.scrollHeight,C=an(p),T=p.scrollLeft,k=p.scrollTop;p===c?(_=y<S&&("auto"===C.overflowX||"scroll"===C.overflowX||"visible"===C.overflowX),E=w<A&&("auto"===C.overflowY||"scroll"===C.overflowY||"visible"===C.overflowY)):(_=y<S&&("auto"===C.overflowX||"scroll"===C.overflowX),E=w<A&&("auto"===C.overflowY||"scroll"===C.overflowY));var O=_&&(Math.abs(b-s)<=a&&T+y<S)-(Math.abs(v-s)<=a&&!!T),x=E&&(Math.abs(g-o)<=a&&k+w<A)-(Math.abs(f-o)<=a&&!!k);if(!Pi[u])for(var L=0;L<=u;L++)Pi[L]||(Pi[L]={});Pi[u].vx==O&&Pi[u].vy==x&&Pi[u].el===p||(Pi[u].el=p,Pi[u].vx=O,Pi[u].vy=x,clearInterval(Pi[u].pid),0==O&&0==x||(h=!0,Pi[u].pid=setInterval(function(){i&&0===this.layer&&yi.active._onTouchMove(Li);var t=Pi[this.layer].vy?Pi[this.layer].vy*l:0,n=Pi[this.layer].vx?Pi[this.layer].vx*l:0;"function"==typeof r&&"continue"!==r.call(yi.dragged.parentNode[En],n,t,e,Li,Pi[this.layer].el)||wn(Pi[this.layer].el,n,t)}.bind({layer:u}),24))),u++}while(t.bubbleScroll&&d!==c&&(d=vn(d,!1)));Ri=h}}),30),Fi=function(e){var t=e.originalEvent,n=e.putSortable,i=e.dragEl,r=e.activeSortable,s=e.dispatchSortableEvent,o=e.hideGhostForTarget,a=e.unhideGhostForTarget;if(t){var l=n||r;o();var c=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:t,h=document.elementFromPoint(c.clientX,c.clientY);a(),l&&!l.el.contains(h)&&(s("spill"),this.onSpill({dragEl:i,putSortable:n}))}};function ji(){}function Bi(){}ji.prototype={startIndex:null,dragStart:function(e){var t=e.oldDraggableIndex;this.startIndex=t},onSpill:function(e){var t=e.dragEl,n=e.putSortable;this.sortable.captureAnimationState(),n&&n.captureAnimationState();var i=pn(this.sortable.el,this.startIndex,this.options);i?this.sortable.el.insertBefore(t,i):this.sortable.el.appendChild(t),this.sortable.animateAll(),n&&n.animateAll()},drop:Fi},Vt(ji,{pluginName:"revertOnSpill"}),Bi.prototype={onSpill:function(e){var t=e.dragEl,n=e.putSortable||this.sortable;n.captureAnimationState(),t.parentNode&&t.parentNode.removeChild(t),n.animateAll()},drop:Fi},Vt(Bi,{pluginName:"removeOnSpill"}),yi.mount(new function(){function e(){for(var e in this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0},this)"_"===e.charAt(0)&&"function"==typeof this[e]&&(this[e]=this[e].bind(this))}return e.prototype={dragStarted:function(e){var t=e.originalEvent;this.sortable.nativeDraggable?Jt(document,"dragover",this._handleAutoScroll):this.options.supportPointer?Jt(document,"pointermove",this._handleFallbackAutoScroll):t.touches?Jt(document,"touchmove",this._handleFallbackAutoScroll):Jt(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(e){var t=e.originalEvent;this.options.dragOverBubble||t.rootEl||this._handleAutoScroll(t)},drop:function(){this.sortable.nativeDraggable?Zt(document,"dragover",this._handleAutoScroll):(Zt(document,"pointermove",this._handleFallbackAutoScroll),Zt(document,"touchmove",this._handleFallbackAutoScroll),Zt(document,"mousemove",this._handleFallbackAutoScroll)),Ii(),Di(),clearTimeout(rn),rn=void 0},nulling:function(){Li=ki=Ti=Ri=Mi=Oi=xi=null,Pi.length=0},_handleFallbackAutoScroll:function(e){this._handleAutoScroll(e,!0)},_handleAutoScroll:function(e,t){var n=this,i=(e.touches?e.touches[0]:e).clientX,r=(e.touches?e.touches[0]:e).clientY,s=document.elementFromPoint(i,r);if(Li=e,t||this.options.forceAutoScrollFallback||Ut||zt||Gt){Ni(e,this.options,s,t);var o=vn(s,!0);!Ri||Mi&&i===Oi&&r===xi||(Mi&&Ii(),Mi=setInterval((function(){var s=vn(document.elementFromPoint(i,r),!0);s!==o&&(o=s,Di()),Ni(e,n.options,s,t)}),10),Oi=i,xi=r)}else{if(!this.options.bubbleScroll||vn(s,!0)===hn())return void Di();Ni(e,this.options,vn(s,!1),!1)}}},Vt(e,{pluginName:"scroll",initializeByDefault:!0})}),yi.mount(Bi,ji);const $i=yi;Dt.register("address-autocomplete",class extends Rt{static values={apiKey:String};static targets=["title","address","city","latitude","longitude","unspecificPlacename"];connect(){this.geocoder=new(Nt())({accessToken:this.apiKeyValue,types:"neighborhood,address,poi"}),this.geocoder.addTo(this.element),this.geocoder.on("result",(e=>this.#e(e))),this.geocoder.on("clear",(()=>this.#t()))}#e(e){console.log(e.result),this.#n(e.result.text),this.addressTarget.value=e.result.place_name,this.#i("geocoding"),this.#i("geocoding"),this.latitudeTarget.value=e.result.geometry.coordinates[1],this.longitudeTarget.value=e.result.geometry.coordinates[0];let t=null,n=null;e.result.context.forEach((e=>{for(const[i,r]of Object.entries(e))r.includes("place")?t=e.text:r.includes("district")&&(n=e.text)})),this.cityTarget.value=null===t?n:t,e.result.id.includes("poi")?this.titleTarget.value=e.result.text:this.titleTarget.value="Custom location"}#t(){this.addressTarget.value=""}disconnect(){this.geocoder.onRemove()}#i(e){const t=new FormData;t.append(`api_call[${e}]`,"update"),jt().ajax({url:`/apicalls/${e}`,type:"PATCH",data:t,success:function(){console.log(`Successfully updated api count for: ${e}`)},error:function(){console.log(`Could not update api count for: ${e}`)}})}#n(e){this.unspecificPlacenameTarget.checked=!1;const t=`https://api.mapbox.com/geocoding/v5/mapbox.places/${e}.json?&access_token=${this.apiKeyValue}`;fetch(t).then((e=>e.json())).then((e=>{const t={};e.features.forEach((e=>{let n=e.text,i="";e.context.forEach((e=>{e.id.includes("place")&&(i=e.text)})),n in t?t[n].push(i):t[n]=[i]}));for(const e in t){const n=t[e],i=[...new Set(n)];n.length!==i.length&&(console.log(`${e} exists multiple times in the same city`),this.unspecificPlacenameTarget.checked=!0)}console.log(t)}))}}),Dt.register("clipboard",class extends Rt{static targets=["input"];static values={feedbackText:String};connect(){console.log("clipboard controller hellow")}copy(e){console.log("Just copied this:"),console.log(this.inputTarget.value),navigator.clipboard.writeText(this.inputTarget.value),e.currentTarget.disabled=!0,e.currentTarget.innerText=this.feedbackTextValue}}),Dt.register("indexpageviewer",class extends Rt{static targets=["newRouteButton","introText"];connect(){console.log("Hellow from index page viewer controller"),(4e3,new Promise((e=>setTimeout(e,4e3)))).then((()=>{this.introTextTargets.forEach((e=>{e.classList.add("hidden")})),this.newRouteButtonTarget.classList.remove("hidden")}))}}),Dt.register("map",class extends Rt{static values={apiKey:String,markers:Array,routeId:Number,routeMode:String};connect(){mapboxgl.accessToken=this.apiKeyValue;const e=this.markersValue,t={};e.forEach((e=>{t[e.pos]={lat:e.lat,lng:e.lng,marker_html:e.marker_html}}));let n=new mapboxgl.Map({container:this.element,style:"mapbox://styles/mapbox/streets-v10",center:[-.118092,51.509865],zoom:6});if(this.#i("maploads"),1==Object.keys(t).length)console.log("There is one destination"),n.setCenter([t[1].lng,t[1].lat]),n.setZoom(13),this.#r(t,n),this.#s("_",!0);else if(Object.keys(t).length>=2){console.log("There are at least 2 destinations"),this.#r(t,n),this.#o(t,n),console.log(`Route mode: ${this.routeModeValue}`);let e=`https://api.mapbox.com/directions/v5/mapbox/${"driving"===this.routeModeValue?"driving-traffic":this.routeModeValue}/`,i=1;for(const n in t)e=i==Object.keys(t).length?e+t[n].lng+","+t[n].lat+`?${"driving"===this.routeModeValue?"exclude=ferry%2Ctoll":"exclude=ferry"}&geometries=geojson&access_token=${mapboxgl.accessToken}`:e+t[n].lng+","+t[n].lat+";",i+=1;console.log(`Query string: ${e}`),this.#a(e,n)}else console.log("No destination found"),this.#s("_",!0)}#r(e,t){for(const n in e){const i=document.createElement("div");i.innerHTML=e[n].marker_html,new mapboxgl.Marker(i).setLngLat([e[n].lng,e[n].lat]).addTo(t)}console.log("Added markers to map")}#o(e,t){const n=new mapboxgl.LngLatBounds;for(const t in e)n.extend([e[t].lng,e[t].lat]);t.fitBounds(n,{padding:80,duration:0}),console.log("Fitted map bounds to markers")}#a(e,t){fetch(e).then((e=>e.json())).then((e=>{if(this.#i("directions"),"NoRoute"===e.code)if(window.location.href.includes("edit")){const t=new FormData;t.append("route[google_url]","no_route_found"),jt().ajax({url:`/routes/${this.routeIdValue}/noroute`,type:"PATCH",data:t,success:function(){console.log("Successfully updated route information for error")},error:function(){console.log("Could not update route info for error")}}),this.#s(e,!0)}else console.log("Show page. No database update needed");else{const n={type:"Feature",properties:{},geometry:{type:"LineString",coordinates:e.routes[0].geometry.coordinates}};t.on("load",(function(){console.log("Map has loaded"),t.addSource("route-details",{type:"geojson",data:n}),console.log("1 Added route data to map"),t.addLayer({id:"route",type:"line",source:"route-details",layout:{"line-join":"round","line-cap":"round"},paint:{"line-color":"#3887be","line-width":5,"line-opacity":.75}}),console.log("2 Added route layer to map")})),this.#s(e)}}))}#s(e,t=!1){if(window.location.href.includes("edit")){console.log("We are on the edit page");const n=this.routeIdValue,i=new FormData;let r=0,s=0;if(t)console.log("Route is too short or non-existent. Overwriting time, distance with 0");else{const t=e.routes[0].distance,n=e.routes[0].duration;s=parseFloat((t/1e3).toFixed(2)),r=Math.round(n/60)}console.log(`Time in min: ${r}`),console.log(`Distance in km: ${s}`),i.append("route[distance]",s),i.append("route[time]",r),jt().ajax({url:`/routes/${n}/move`,type:"PATCH",data:i,success:function(){console.log("Successfully updated route information"),document.querySelector("#nikspecs").route.add(r,s)},error:function(){console.log("Could not update route info")}})}else console.log("We are on the show page")}#i(e){const t=new FormData;t.append(`api_call[${e}]`,"update"),jt().ajax({url:`/apicalls/${e}`,type:"PATCH",data:t,success:function(){console.log(`Successfully updated api count for: ${e}`)},error:function(){console.log(`Could not update api count for: ${e}`)}})}}),Dt.register("route",class extends Rt{static targets=["time","distance","routeTitle","formUpdateRouteCity","specElement","formUpdateRouteTitle","filterButton","filterMenu","dropdownElement"];static values={time:Number,distance:Number};connect(){this.element[this.identifier]=this}add(e,t){console.log("Routed to route controller"),console.log(`New time: ${e}`),this.distanceTarget.innerText=t,this.timeTarget.innerText=e,console.log("Updated display of time and distance on edit page"),console.log("Goodbye from route controller")}edit_title(e){this.routeTitleTarget.style.display="none",this.formUpdateRouteTitleTarget.classList.remove("hidden")}edit_city(e){this.specElementTargets.forEach((e=>{e.style.display="none"})),this.formUpdateRouteCityTarget.classList.remove("hidden")}toggle_filter_menu(e){e.stopPropagation(),this.filterMenuTarget.classList.contains("hidden")?this.filterMenuTarget.classList.remove("hidden"):this.filterMenuTarget.classList.add("hidden")}toggle_dropdown(e){e.stopPropagation(),e.preventDefault()}share_route(e){if(confirm("Are you sure you want to make this route public? Everyone on the web will be able to see it!")){const t=new FormData;t.append("route[shared]",!0),jt().ajax({url:`/routes/${e.currentTarget.dataset.routeId}/share_route`,type:"PATCH",data:t,success:function(){console.log("Successfully shared route"),location.reload()},error:function(){console.log("Could not share route")}})}else console.log("User cancelled route sharing")}stop_sharing_route(e){const t=new FormData;t.append("route[shared]",!1),jt().ajax({url:`/routes/${e.currentTarget.dataset.routeId}/stop_sharing_route`,type:"PATCH",data:t,success:function(){console.log("Stopped sharing route"),location.reload()},error:function(){console.log("Could not stop sharing route")}})}}),Dt.register("sharing",class extends Rt{static targets=["link"];static values={routeUrl:String};connect(){console.log("Hello from sharing controller"),this.subject="LesRoutes - Route Link",this.message=`Hey mate, check out this route:\n\n${this.routeUrlValue}\n\nI found it on a free website called lesroutes.co.uk that lets you create and manage routes for Google Maps.`}send_email(){window.location.href=`mailto:"Mate"?subject=${this.subject}&body=${encodeURIComponent(this.message)}`}send_whatsapp(){window.location.href=`https://wa.me/?text=${encodeURIComponent(this.message)}`}send_sms(){navigator.userAgent.match(/Android/i)?window.open(`sms://1234/?body=${encodeURIComponent(this.message)}`):navigator.userAgent.match(/iPhone/i)&&window.open(`sms://1234/&body=${encodeURIComponent(this.message)}`)}}),Dt.register("sortable",class extends Rt{connect(){console.log("Sortable controller is connected!"),this.sortable=$i.create(this.element,{animation:150,ghostClass:"blue-background-class",onEnd:this.end.bind(this)})}end(e){const t=e.oldIndex;let n=e.item.dataset.id,i=new FormData;0===e.newIndex?i.append("position",1):i.append("position",e.newIndex+1),this.element.dataset.routeId,console.log(`Changing order of route id: ${this.element.dataset.routeId}`),console.log(`${t+1} -> ${e.newIndex+1}`),console.log(this.data.get("url").replace(":id",n)),jt().ajax({url:this.data.get("url").replace(":id",n),type:"PATCH",data:i,success:function(){console.log("Page is reloading..."),document.location.reload()}})}});var qi="top",Hi="bottom",Vi="right",Wi="left",zi="auto",Ui=[qi,Hi,Vi,Wi],Ki="start",Gi="end",Xi="clippingParents",Yi="viewport",Qi="popper",Ji="reference",Zi=Ui.reduce((function(e,t){return e.concat([t+"-"+Ki,t+"-"+Gi])}),[]),er=[].concat(Ui,[zi]).reduce((function(e,t){return e.concat([t,t+"-"+Ki,t+"-"+Gi])}),[]),tr="beforeRead",nr="read",ir="afterRead",rr="beforeMain",sr="main",or="afterMain",ar="beforeWrite",lr="write",cr="afterWrite",hr=[tr,nr,ir,rr,sr,or,ar,lr,cr];function ur(e){return e?(e.nodeName||"").toLowerCase():null}function dr(e){if(null==e)return window;if("[object Window]"!==e.toString()){var t=e.ownerDocument;return t&&t.defaultView||window}return e}function pr(e){return e instanceof dr(e).Element||e instanceof Element}function mr(e){return e instanceof dr(e).HTMLElement||e instanceof HTMLElement}function fr(e){return"undefined"!=typeof ShadowRoot&&(e instanceof dr(e).ShadowRoot||e instanceof ShadowRoot)}const gr={name:"applyStyles",enabled:!0,phase:"write",fn:function(e){var t=e.state;Object.keys(t.elements).forEach((function(e){var n=t.styles[e]||{},i=t.attributes[e]||{},r=t.elements[e];mr(r)&&ur(r)&&(Object.assign(r.style,n),Object.keys(i).forEach((function(e){var t=i[e];!1===t?r.removeAttribute(e):r.setAttribute(e,!0===t?"":t)})))}))},effect:function(e){var t=e.state,n={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(t.elements.popper.style,n.popper),t.styles=n,t.elements.arrow&&Object.assign(t.elements.arrow.style,n.arrow),function(){Object.keys(t.elements).forEach((function(e){var i=t.elements[e],r=t.attributes[e]||{},s=Object.keys(t.styles.hasOwnProperty(e)?t.styles[e]:n[e]).reduce((function(e,t){return e[t]="",e}),{});mr(i)&&ur(i)&&(Object.assign(i.style,s),Object.keys(r).forEach((function(e){i.removeAttribute(e)})))}))}},requires:["computeStyles"]};function vr(e){return e.split("-")[0]}var br=Math.max,yr=Math.min,wr=Math.round;function _r(){var e=navigator.userAgentData;return null!=e&&e.brands?e.brands.map((function(e){return e.brand+"/"+e.version})).join(" "):navigator.userAgent}function Er(){return!/^((?!chrome|android).)*safari/i.test(_r())}function Sr(e,t,n){void 0===t&&(t=!1),void 0===n&&(n=!1);var i=e.getBoundingClientRect(),r=1,s=1;t&&mr(e)&&(r=e.offsetWidth>0&&wr(i.width)/e.offsetWidth||1,s=e.offsetHeight>0&&wr(i.height)/e.offsetHeight||1);var o=(pr(e)?dr(e):window).visualViewport,a=!Er()&&n,l=(i.left+(a&&o?o.offsetLeft:0))/r,c=(i.top+(a&&o?o.offsetTop:0))/s,h=i.width/r,u=i.height/s;return{width:h,height:u,top:c,right:l+h,bottom:c+u,left:l,x:l,y:c}}function Ar(e){var t=Sr(e),n=e.offsetWidth,i=e.offsetHeight;return Math.abs(t.width-n)<=1&&(n=t.width),Math.abs(t.height-i)<=1&&(i=t.height),{x:e.offsetLeft,y:e.offsetTop,width:n,height:i}}function Cr(e,t){var n=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(n&&fr(n)){var i=t;do{if(i&&e.isSameNode(i))return!0;i=i.parentNode||i.host}while(i)}return!1}function Tr(e){return dr(e).getComputedStyle(e)}function kr(e){return["table","td","th"].indexOf(ur(e))>=0}function Or(e){return((pr(e)?e.ownerDocument:e.document)||window.document).documentElement}function xr(e){return"html"===ur(e)?e:e.assignedSlot||e.parentNode||(fr(e)?e.host:null)||Or(e)}function Lr(e){return mr(e)&&"fixed"!==Tr(e).position?e.offsetParent:null}function Mr(e){for(var t=dr(e),n=Lr(e);n&&kr(n)&&"static"===Tr(n).position;)n=Lr(n);return n&&("html"===ur(n)||"body"===ur(n)&&"static"===Tr(n).position)?t:n||function(e){var t=/firefox/i.test(_r());if(/Trident/i.test(_r())&&mr(e)&&"fixed"===Tr(e).position)return null;var n=xr(e);for(fr(n)&&(n=n.host);mr(n)&&["html","body"].indexOf(ur(n))<0;){var i=Tr(n);if("none"!==i.transform||"none"!==i.perspective||"paint"===i.contain||-1!==["transform","perspective"].indexOf(i.willChange)||t&&"filter"===i.willChange||t&&i.filter&&"none"!==i.filter)return n;n=n.parentNode}return null}(e)||t}function Pr(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function Rr(e,t,n){return br(e,yr(t,n))}function Dr(e){return Object.assign({},{top:0,right:0,bottom:0,left:0},e)}function Ir(e,t){return t.reduce((function(t,n){return t[n]=e,t}),{})}const Nr={name:"arrow",enabled:!0,phase:"main",fn:function(e){var t,n=e.state,i=e.name,r=e.options,s=n.elements.arrow,o=n.modifiersData.popperOffsets,a=vr(n.placement),l=Pr(a),c=[Wi,Vi].indexOf(a)>=0?"height":"width";if(s&&o){var h=function(e,t){return Dr("number"!=typeof(e="function"==typeof e?e(Object.assign({},t.rects,{placement:t.placement})):e)?e:Ir(e,Ui))}(r.padding,n),u=Ar(s),d="y"===l?qi:Wi,p="y"===l?Hi:Vi,m=n.rects.reference[c]+n.rects.reference[l]-o[l]-n.rects.popper[c],f=o[l]-n.rects.reference[l],g=Mr(s),v=g?"y"===l?g.clientHeight||0:g.clientWidth||0:0,b=m/2-f/2,y=h[d],w=v-u[c]-h[p],_=v/2-u[c]/2+b,E=Rr(y,_,w),S=l;n.modifiersData[i]=((t={})[S]=E,t.centerOffset=E-_,t)}},effect:function(e){var t=e.state,n=e.options.element,i=void 0===n?"[data-popper-arrow]":n;null!=i&&("string"!=typeof i||(i=t.elements.popper.querySelector(i)))&&Cr(t.elements.popper,i)&&(t.elements.arrow=i)},requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function Fr(e){return e.split("-")[1]}var jr={top:"auto",right:"auto",bottom:"auto",left:"auto"};function Br(e){var t,n=e.popper,i=e.popperRect,r=e.placement,s=e.variation,o=e.offsets,a=e.position,l=e.gpuAcceleration,c=e.adaptive,h=e.roundOffsets,u=e.isFixed,d=o.x,p=void 0===d?0:d,m=o.y,f=void 0===m?0:m,g="function"==typeof h?h({x:p,y:f}):{x:p,y:f};p=g.x,f=g.y;var v=o.hasOwnProperty("x"),b=o.hasOwnProperty("y"),y=Wi,w=qi,_=window;if(c){var E=Mr(n),S="clientHeight",A="clientWidth";E===dr(n)&&"static"!==Tr(E=Or(n)).position&&"absolute"===a&&(S="scrollHeight",A="scrollWidth"),(r===qi||(r===Wi||r===Vi)&&s===Gi)&&(w=Hi,f-=(u&&E===_&&_.visualViewport?_.visualViewport.height:E[S])-i.height,f*=l?1:-1),r!==Wi&&(r!==qi&&r!==Hi||s!==Gi)||(y=Vi,p-=(u&&E===_&&_.visualViewport?_.visualViewport.width:E[A])-i.width,p*=l?1:-1)}var C,T=Object.assign({position:a},c&&jr),k=!0===h?function(e){var t=e.x,n=e.y,i=window.devicePixelRatio||1;return{x:wr(t*i)/i||0,y:wr(n*i)/i||0}}({x:p,y:f}):{x:p,y:f};return p=k.x,f=k.y,l?Object.assign({},T,((C={})[w]=b?"0":"",C[y]=v?"0":"",C.transform=(_.devicePixelRatio||1)<=1?"translate("+p+"px, "+f+"px)":"translate3d("+p+"px, "+f+"px, 0)",C)):Object.assign({},T,((t={})[w]=b?f+"px":"",t[y]=v?p+"px":"",t.transform="",t))}const $r={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:function(e){var t=e.state,n=e.options,i=n.gpuAcceleration,r=void 0===i||i,s=n.adaptive,o=void 0===s||s,a=n.roundOffsets,l=void 0===a||a,c={placement:vr(t.placement),variation:Fr(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:r,isFixed:"fixed"===t.options.strategy};null!=t.modifiersData.popperOffsets&&(t.styles.popper=Object.assign({},t.styles.popper,Br(Object.assign({},c,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:o,roundOffsets:l})))),null!=t.modifiersData.arrow&&(t.styles.arrow=Object.assign({},t.styles.arrow,Br(Object.assign({},c,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})},data:{}};var qr={passive:!0};const Hr={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:function(e){var t=e.state,n=e.instance,i=e.options,r=i.scroll,s=void 0===r||r,o=i.resize,a=void 0===o||o,l=dr(t.elements.popper),c=[].concat(t.scrollParents.reference,t.scrollParents.popper);return s&&c.forEach((function(e){e.addEventListener("scroll",n.update,qr)})),a&&l.addEventListener("resize",n.update,qr),function(){s&&c.forEach((function(e){e.removeEventListener("scroll",n.update,qr)})),a&&l.removeEventListener("resize",n.update,qr)}},data:{}};var Vr={left:"right",right:"left",bottom:"top",top:"bottom"};function Wr(e){return e.replace(/left|right|bottom|top/g,(function(e){return Vr[e]}))}var zr={start:"end",end:"start"};function Ur(e){return e.replace(/start|end/g,(function(e){return zr[e]}))}function Kr(e){var t=dr(e);return{scrollLeft:t.pageXOffset,scrollTop:t.pageYOffset}}function Gr(e){return Sr(Or(e)).left+Kr(e).scrollLeft}function Xr(e){var t=Tr(e),n=t.overflow,i=t.overflowX,r=t.overflowY;return/auto|scroll|overlay|hidden/.test(n+r+i)}function Yr(e){return["html","body","#document"].indexOf(ur(e))>=0?e.ownerDocument.body:mr(e)&&Xr(e)?e:Yr(xr(e))}function Qr(e,t){var n;void 0===t&&(t=[]);var i=Yr(e),r=i===(null==(n=e.ownerDocument)?void 0:n.body),s=dr(i),o=r?[s].concat(s.visualViewport||[],Xr(i)?i:[]):i,a=t.concat(o);return r?a:a.concat(Qr(xr(o)))}function Jr(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function Zr(e,t,n){return t===Yi?Jr(function(e,t){var n=dr(e),i=Or(e),r=n.visualViewport,s=i.clientWidth,o=i.clientHeight,a=0,l=0;if(r){s=r.width,o=r.height;var c=Er();(c||!c&&"fixed"===t)&&(a=r.offsetLeft,l=r.offsetTop)}return{width:s,height:o,x:a+Gr(e),y:l}}(e,n)):pr(t)?function(e,t){var n=Sr(e,!1,"fixed"===t);return n.top=n.top+e.clientTop,n.left=n.left+e.clientLeft,n.bottom=n.top+e.clientHeight,n.right=n.left+e.clientWidth,n.width=e.clientWidth,n.height=e.clientHeight,n.x=n.left,n.y=n.top,n}(t,n):Jr(function(e){var t,n=Or(e),i=Kr(e),r=null==(t=e.ownerDocument)?void 0:t.body,s=br(n.scrollWidth,n.clientWidth,r?r.scrollWidth:0,r?r.clientWidth:0),o=br(n.scrollHeight,n.clientHeight,r?r.scrollHeight:0,r?r.clientHeight:0),a=-i.scrollLeft+Gr(e),l=-i.scrollTop;return"rtl"===Tr(r||n).direction&&(a+=br(n.clientWidth,r?r.clientWidth:0)-s),{width:s,height:o,x:a,y:l}}(Or(e)))}function es(e){var t,n=e.reference,i=e.element,r=e.placement,s=r?vr(r):null,o=r?Fr(r):null,a=n.x+n.width/2-i.width/2,l=n.y+n.height/2-i.height/2;switch(s){case qi:t={x:a,y:n.y-i.height};break;case Hi:t={x:a,y:n.y+n.height};break;case Vi:t={x:n.x+n.width,y:l};break;case Wi:t={x:n.x-i.width,y:l};break;default:t={x:n.x,y:n.y}}var c=s?Pr(s):null;if(null!=c){var h="y"===c?"height":"width";switch(o){case Ki:t[c]=t[c]-(n[h]/2-i[h]/2);break;case Gi:t[c]=t[c]+(n[h]/2-i[h]/2)}}return t}function ts(e,t){void 0===t&&(t={});var n=t,i=n.placement,r=void 0===i?e.placement:i,s=n.strategy,o=void 0===s?e.strategy:s,a=n.boundary,l=void 0===a?Xi:a,c=n.rootBoundary,h=void 0===c?Yi:c,u=n.elementContext,d=void 0===u?Qi:u,p=n.altBoundary,m=void 0!==p&&p,f=n.padding,g=void 0===f?0:f,v=Dr("number"!=typeof g?g:Ir(g,Ui)),b=d===Qi?Ji:Qi,y=e.rects.popper,w=e.elements[m?b:d],_=function(e,t,n,i){var r="clippingParents"===t?function(e){var t=Qr(xr(e)),n=["absolute","fixed"].indexOf(Tr(e).position)>=0&&mr(e)?Mr(e):e;return pr(n)?t.filter((function(e){return pr(e)&&Cr(e,n)&&"body"!==ur(e)})):[]}(e):[].concat(t),s=[].concat(r,[n]),o=s[0],a=s.reduce((function(t,n){var r=Zr(e,n,i);return t.top=br(r.top,t.top),t.right=yr(r.right,t.right),t.bottom=yr(r.bottom,t.bottom),t.left=br(r.left,t.left),t}),Zr(e,o,i));return a.width=a.right-a.left,a.height=a.bottom-a.top,a.x=a.left,a.y=a.top,a}(pr(w)?w:w.contextElement||Or(e.elements.popper),l,h,o),E=Sr(e.elements.reference),S=es({reference:E,element:y,strategy:"absolute",placement:r}),A=Jr(Object.assign({},y,S)),C=d===Qi?A:E,T={top:_.top-C.top+v.top,bottom:C.bottom-_.bottom+v.bottom,left:_.left-C.left+v.left,right:C.right-_.right+v.right},k=e.modifiersData.offset;if(d===Qi&&k){var O=k[r];Object.keys(T).forEach((function(e){var t=[Vi,Hi].indexOf(e)>=0?1:-1,n=[qi,Hi].indexOf(e)>=0?"y":"x";T[e]+=O[n]*t}))}return T}const ns={name:"flip",enabled:!0,phase:"main",fn:function(e){var t=e.state,n=e.options,i=e.name;if(!t.modifiersData[i]._skip){for(var r=n.mainAxis,s=void 0===r||r,o=n.altAxis,a=void 0===o||o,l=n.fallbackPlacements,c=n.padding,h=n.boundary,u=n.rootBoundary,d=n.altBoundary,p=n.flipVariations,m=void 0===p||p,f=n.allowedAutoPlacements,g=t.options.placement,v=vr(g),b=l||(v!==g&&m?function(e){if(vr(e)===zi)return[];var t=Wr(e);return[Ur(e),t,Ur(t)]}(g):[Wr(g)]),y=[g].concat(b).reduce((function(e,n){return e.concat(vr(n)===zi?function(e,t){void 0===t&&(t={});var n=t,i=n.placement,r=n.boundary,s=n.rootBoundary,o=n.padding,a=n.flipVariations,l=n.allowedAutoPlacements,c=void 0===l?er:l,h=Fr(i),u=h?a?Zi:Zi.filter((function(e){return Fr(e)===h})):Ui,d=u.filter((function(e){return c.indexOf(e)>=0}));0===d.length&&(d=u);var p=d.reduce((function(t,n){return t[n]=ts(e,{placement:n,boundary:r,rootBoundary:s,padding:o})[vr(n)],t}),{});return Object.keys(p).sort((function(e,t){return p[e]-p[t]}))}(t,{placement:n,boundary:h,rootBoundary:u,padding:c,flipVariations:m,allowedAutoPlacements:f}):n)}),[]),w=t.rects.reference,_=t.rects.popper,E=new Map,S=!0,A=y[0],C=0;C<y.length;C++){var T=y[C],k=vr(T),O=Fr(T)===Ki,x=[qi,Hi].indexOf(k)>=0,L=x?"width":"height",M=ts(t,{placement:T,boundary:h,rootBoundary:u,altBoundary:d,padding:c}),P=x?O?Vi:Wi:O?Hi:qi;w[L]>_[L]&&(P=Wr(P));var R=Wr(P),D=[];if(s&&D.push(M[k]<=0),a&&D.push(M[P]<=0,M[R]<=0),D.every((function(e){return e}))){A=T,S=!1;break}E.set(T,D)}if(S)for(var I=function(e){var t=y.find((function(t){var n=E.get(t);if(n)return n.slice(0,e).every((function(e){return e}))}));if(t)return A=t,"break"},N=m?3:1;N>0&&"break"!==I(N);N--);t.placement!==A&&(t.modifiersData[i]._skip=!0,t.placement=A,t.reset=!0)}},requiresIfExists:["offset"],data:{_skip:!1}};function is(e,t,n){return void 0===n&&(n={x:0,y:0}),{top:e.top-t.height-n.y,right:e.right-t.width+n.x,bottom:e.bottom-t.height+n.y,left:e.left-t.width-n.x}}function rs(e){return[qi,Vi,Hi,Wi].some((function(t){return e[t]>=0}))}const ss={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:function(e){var t=e.state,n=e.name,i=t.rects.reference,r=t.rects.popper,s=t.modifiersData.preventOverflow,o=ts(t,{elementContext:"reference"}),a=ts(t,{altBoundary:!0}),l=is(o,i),c=is(a,r,s),h=rs(l),u=rs(c);t.modifiersData[n]={referenceClippingOffsets:l,popperEscapeOffsets:c,isReferenceHidden:h,hasPopperEscaped:u},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":h,"data-popper-escaped":u})}},os={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:function(e){var t=e.state,n=e.options,i=e.name,r=n.offset,s=void 0===r?[0,0]:r,o=er.reduce((function(e,n){return e[n]=function(e,t,n){var i=vr(e),r=[Wi,qi].indexOf(i)>=0?-1:1,s="function"==typeof n?n(Object.assign({},t,{placement:e})):n,o=s[0],a=s[1];return o=o||0,a=(a||0)*r,[Wi,Vi].indexOf(i)>=0?{x:a,y:o}:{x:o,y:a}}(n,t.rects,s),e}),{}),a=o[t.placement],l=a.x,c=a.y;null!=t.modifiersData.popperOffsets&&(t.modifiersData.popperOffsets.x+=l,t.modifiersData.popperOffsets.y+=c),t.modifiersData[i]=o}},as={name:"popperOffsets",enabled:!0,phase:"read",fn:function(e){var t=e.state,n=e.name;t.modifiersData[n]=es({reference:t.rects.reference,element:t.rects.popper,strategy:"absolute",placement:t.placement})},data:{}},ls={name:"preventOverflow",enabled:!0,phase:"main",fn:function(e){var t=e.state,n=e.options,i=e.name,r=n.mainAxis,s=void 0===r||r,o=n.altAxis,a=void 0!==o&&o,l=n.boundary,c=n.rootBoundary,h=n.altBoundary,u=n.padding,d=n.tether,p=void 0===d||d,m=n.tetherOffset,f=void 0===m?0:m,g=ts(t,{boundary:l,rootBoundary:c,padding:u,altBoundary:h}),v=vr(t.placement),b=Fr(t.placement),y=!b,w=Pr(v),_="x"===w?"y":"x",E=t.modifiersData.popperOffsets,S=t.rects.reference,A=t.rects.popper,C="function"==typeof f?f(Object.assign({},t.rects,{placement:t.placement})):f,T="number"==typeof C?{mainAxis:C,altAxis:C}:Object.assign({mainAxis:0,altAxis:0},C),k=t.modifiersData.offset?t.modifiersData.offset[t.placement]:null,O={x:0,y:0};if(E){if(s){var x,L="y"===w?qi:Wi,M="y"===w?Hi:Vi,P="y"===w?"height":"width",R=E[w],D=R+g[L],I=R-g[M],N=p?-A[P]/2:0,F=b===Ki?S[P]:A[P],j=b===Ki?-A[P]:-S[P],B=t.elements.arrow,$=p&&B?Ar(B):{width:0,height:0},q=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:{top:0,right:0,bottom:0,left:0},H=q[L],V=q[M],W=Rr(0,S[P],$[P]),z=y?S[P]/2-N-W-H-T.mainAxis:F-W-H-T.mainAxis,U=y?-S[P]/2+N+W+V+T.mainAxis:j+W+V+T.mainAxis,K=t.elements.arrow&&Mr(t.elements.arrow),G=K?"y"===w?K.clientTop||0:K.clientLeft||0:0,X=null!=(x=null==k?void 0:k[w])?x:0,Y=R+U-X,Q=Rr(p?yr(D,R+z-X-G):D,R,p?br(I,Y):I);E[w]=Q,O[w]=Q-R}if(a){var J,Z="x"===w?qi:Wi,ee="x"===w?Hi:Vi,te=E[_],ne="y"===_?"height":"width",ie=te+g[Z],re=te-g[ee],se=-1!==[qi,Wi].indexOf(v),oe=null!=(J=null==k?void 0:k[_])?J:0,ae=se?ie:te-S[ne]-A[ne]-oe+T.altAxis,le=se?te+S[ne]+A[ne]-oe-T.altAxis:re,ce=p&&se?function(e,t,n){var i=Rr(e,t,n);return i>n?n:i}(ae,te,le):Rr(p?ae:ie,te,p?le:re);E[_]=ce,O[_]=ce-te}t.modifiersData[i]=O}},requiresIfExists:["offset"]};function cs(e,t,n){void 0===n&&(n=!1);var i,r,s=mr(t),o=mr(t)&&function(e){var t=e.getBoundingClientRect(),n=wr(t.width)/e.offsetWidth||1,i=wr(t.height)/e.offsetHeight||1;return 1!==n||1!==i}(t),a=Or(t),l=Sr(e,o,n),c={scrollLeft:0,scrollTop:0},h={x:0,y:0};return(s||!s&&!n)&&(("body"!==ur(t)||Xr(a))&&(c=(i=t)!==dr(i)&&mr(i)?{scrollLeft:(r=i).scrollLeft,scrollTop:r.scrollTop}:Kr(i)),mr(t)?((h=Sr(t,!0)).x+=t.clientLeft,h.y+=t.clientTop):a&&(h.x=Gr(a))),{x:l.left+c.scrollLeft-h.x,y:l.top+c.scrollTop-h.y,width:l.width,height:l.height}}function hs(e){var t=new Map,n=new Set,i=[];function r(e){n.add(e.name),[].concat(e.requires||[],e.requiresIfExists||[]).forEach((function(e){if(!n.has(e)){var i=t.get(e);i&&r(i)}})),i.push(e)}return e.forEach((function(e){t.set(e.name,e)})),e.forEach((function(e){n.has(e.name)||r(e)})),i}var us={placement:"bottom",modifiers:[],strategy:"absolute"};function ds(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return!t.some((function(e){return!(e&&"function"==typeof e.getBoundingClientRect)}))}function ps(e){void 0===e&&(e={});var t=e,n=t.defaultModifiers,i=void 0===n?[]:n,r=t.defaultOptions,s=void 0===r?us:r;return function(e,t,n){void 0===n&&(n=s);var r,o,a={placement:"bottom",orderedModifiers:[],options:Object.assign({},us,s),modifiersData:{},elements:{reference:e,popper:t},attributes:{},styles:{}},l=[],c=!1,h={state:a,setOptions:function(n){var r="function"==typeof n?n(a.options):n;u(),a.options=Object.assign({},s,a.options,r),a.scrollParents={reference:pr(e)?Qr(e):e.contextElement?Qr(e.contextElement):[],popper:Qr(t)};var o,c,d=function(e){var t=hs(e);return hr.reduce((function(e,n){return e.concat(t.filter((function(e){return e.phase===n})))}),[])}((o=[].concat(i,a.options.modifiers),c=o.reduce((function(e,t){var n=e[t.name];return e[t.name]=n?Object.assign({},n,t,{options:Object.assign({},n.options,t.options),data:Object.assign({},n.data,t.data)}):t,e}),{}),Object.keys(c).map((function(e){return c[e]}))));return a.orderedModifiers=d.filter((function(e){return e.enabled})),a.orderedModifiers.forEach((function(e){var t=e.name,n=e.options,i=void 0===n?{}:n,r=e.effect;if("function"==typeof r){var s=r({state:a,name:t,instance:h,options:i});l.push(s||function(){})}})),h.update()},forceUpdate:function(){if(!c){var e=a.elements,t=e.reference,n=e.popper;if(ds(t,n)){a.rects={reference:cs(t,Mr(n),"fixed"===a.options.strategy),popper:Ar(n)},a.reset=!1,a.placement=a.options.placement,a.orderedModifiers.forEach((function(e){return a.modifiersData[e.name]=Object.assign({},e.data)}));for(var i=0;i<a.orderedModifiers.length;i++)if(!0!==a.reset){var r=a.orderedModifiers[i],s=r.fn,o=r.options,l=void 0===o?{}:o,u=r.name;"function"==typeof s&&(a=s({state:a,options:l,name:u,instance:h})||a)}else a.reset=!1,i=-1}}},update:(r=function(){return new Promise((function(e){h.forceUpdate(),e(a)}))},function(){return o||(o=new Promise((function(e){Promise.resolve().then((function(){o=void 0,e(r())}))}))),o}),destroy:function(){u(),c=!0}};if(!ds(e,t))return h;function u(){l.forEach((function(e){return e()})),l=[]}return h.setOptions(n).then((function(e){!c&&n.onFirstUpdate&&n.onFirstUpdate(e)})),h}}var ms=ps(),fs=ps({defaultModifiers:[Hr,as,$r,gr,os,ns,ls,Nr,ss]}),gs=ps({defaultModifiers:[Hr,as,$r,gr]});const vs="transitionend",bs=e=>{let t=e.getAttribute("data-bs-target");if(!t||"#"===t){let n=e.getAttribute("href");if(!n||!n.includes("#")&&!n.startsWith("."))return null;n.includes("#")&&!n.startsWith("#")&&(n=`#${n.split("#")[1]}`),t=n&&"#"!==n?n.trim():null}return t},ys=e=>{const t=bs(e);return t&&document.querySelector(t)?t:null},ws=e=>{const t=bs(e);return t?document.querySelector(t):null},_s=e=>{e.dispatchEvent(new Event(vs))},Es=e=>!(!e||"object"!=typeof e)&&(void 0!==e.jquery&&(e=e[0]),void 0!==e.nodeType),Ss=e=>Es(e)?e.jquery?e[0]:e:"string"==typeof e&&e.length>0?document.querySelector(e):null,As=e=>{if(!Es(e)||0===e.getClientRects().length)return!1;const t="visible"===getComputedStyle(e).getPropertyValue("visibility"),n=e.closest("details:not([open])");if(!n)return t;if(n!==e){const t=e.closest("summary");if(t&&t.parentNode!==n)return!1;if(null===t)return!1}return t},Cs=e=>!e||e.nodeType!==Node.ELEMENT_NODE||!!e.classList.contains("disabled")||(void 0!==e.disabled?e.disabled:e.hasAttribute("disabled")&&"false"!==e.getAttribute("disabled")),Ts=e=>{if(!document.documentElement.attachShadow)return null;if("function"==typeof e.getRootNode){const t=e.getRootNode();return t instanceof ShadowRoot?t:null}return e instanceof ShadowRoot?e:e.parentNode?Ts(e.parentNode):null},ks=()=>{},Os=e=>{e.offsetHeight},xs=()=>window.jQuery&&!document.body.hasAttribute("data-bs-no-jquery")?window.jQuery:null,Ls=[],Ms=()=>"rtl"===document.documentElement.dir,Ps=e=>{var t;t=()=>{const t=xs();if(t){const n=e.NAME,i=t.fn[n];t.fn[n]=e.jQueryInterface,t.fn[n].Constructor=e,t.fn[n].noConflict=()=>(t.fn[n]=i,e.jQueryInterface)}},"loading"===document.readyState?(Ls.length||document.addEventListener("DOMContentLoaded",(()=>{for(const e of Ls)e()})),Ls.push(t)):t()},Rs=e=>{"function"==typeof e&&e()},Ds=(e,t,n=!0)=>{if(!n)return void Rs(e);const i=(e=>{if(!e)return 0;let{transitionDuration:t,transitionDelay:n}=window.getComputedStyle(e);const i=Number.parseFloat(t),r=Number.parseFloat(n);return i||r?(t=t.split(",")[0],n=n.split(",")[0],1e3*(Number.parseFloat(t)+Number.parseFloat(n))):0})(t)+5;let r=!1;const s=({target:n})=>{n===t&&(r=!0,t.removeEventListener(vs,s),Rs(e))};t.addEventListener(vs,s),setTimeout((()=>{r||_s(t)}),i)},Is=(e,t,n,i)=>{const r=e.length;let s=e.indexOf(t);return-1===s?!n&&i?e[r-1]:e[0]:(s+=n?1:-1,i&&(s=(s+r)%r),e[Math.max(0,Math.min(s,r-1))])},Ns=/[^.]*(?=\..*)\.|.*/,Fs=/\..*/,js=/::\d+$/,Bs={};let $s=1;const qs={mouseenter:"mouseover",mouseleave:"mouseout"},Hs=new Set(["click","dblclick","mouseup","mousedown","contextmenu","mousewheel","DOMMouseScroll","mouseover","mouseout","mousemove","selectstart","selectend","keydown","keypress","keyup","orientationchange","touchstart","touchmove","touchend","touchcancel","pointerdown","pointermove","pointerup","pointerleave","pointercancel","gesturestart","gesturechange","gestureend","focus","blur","change","reset","select","submit","focusin","focusout","load","unload","beforeunload","resize","move","DOMContentLoaded","readystatechange","error","abort","scroll"]);function Vs(e,t){return t&&`${t}::${$s++}`||e.uidEvent||$s++}function Ws(e){const t=Vs(e);return e.uidEvent=t,Bs[t]=Bs[t]||{},Bs[t]}function zs(e,t,n=null){return Object.values(e).find((e=>e.callable===t&&e.delegationSelector===n))}function Us(e,t,n){const i="string"==typeof t,r=i?n:t||n;let s=Ys(e);return Hs.has(s)||(s=e),[i,r,s]}function Ks(e,t,n,i,r){if("string"!=typeof t||!e)return;let[s,o,a]=Us(t,n,i);if(t in qs){const e=e=>function(t){if(!t.relatedTarget||t.relatedTarget!==t.delegateTarget&&!t.delegateTarget.contains(t.relatedTarget))return e.call(this,t)};o=e(o)}const l=Ws(e),c=l[a]||(l[a]={}),h=zs(c,o,s?n:null);if(h)return void(h.oneOff=h.oneOff&&r);const u=Vs(o,t.replace(Ns,"")),d=s?function(e,t,n){return function i(r){const s=e.querySelectorAll(t);for(let{target:o}=r;o&&o!==this;o=o.parentNode)for(const a of s)if(a===o)return Js(r,{delegateTarget:o}),i.oneOff&&Qs.off(e,r.type,t,n),n.apply(o,[r])}}(e,n,o):function(e,t){return function n(i){return Js(i,{delegateTarget:e}),n.oneOff&&Qs.off(e,i.type,t),t.apply(e,[i])}}(e,o);d.delegationSelector=s?n:null,d.callable=o,d.oneOff=r,d.uidEvent=u,c[u]=d,e.addEventListener(a,d,s)}function Gs(e,t,n,i,r){const s=zs(t[n],i,r);s&&(e.removeEventListener(n,s,Boolean(r)),delete t[n][s.uidEvent])}function Xs(e,t,n,i){const r=t[n]||{};for(const s of Object.keys(r))if(s.includes(i)){const i=r[s];Gs(e,t,n,i.callable,i.delegationSelector)}}function Ys(e){return e=e.replace(Fs,""),qs[e]||e}const Qs={on(e,t,n,i){Ks(e,t,n,i,!1)},one(e,t,n,i){Ks(e,t,n,i,!0)},off(e,t,n,i){if("string"!=typeof t||!e)return;const[r,s,o]=Us(t,n,i),a=o!==t,l=Ws(e),c=l[o]||{},h=t.startsWith(".");if(void 0===s){if(h)for(const n of Object.keys(l))Xs(e,l,n,t.slice(1));for(const n of Object.keys(c)){const i=n.replace(js,"");if(!a||t.includes(i)){const t=c[n];Gs(e,l,o,t.callable,t.delegationSelector)}}}else{if(!Object.keys(c).length)return;Gs(e,l,o,s,r?n:null)}},trigger(e,t,n){if("string"!=typeof t||!e)return null;const i=xs();let r=null,s=!0,o=!0,a=!1;t!==Ys(t)&&i&&(r=i.Event(t,n),i(e).trigger(r),s=!r.isPropagationStopped(),o=!r.isImmediatePropagationStopped(),a=r.isDefaultPrevented());let l=new Event(t,{bubbles:s,cancelable:!0});return l=Js(l,n),a&&l.preventDefault(),o&&e.dispatchEvent(l),l.defaultPrevented&&r&&r.preventDefault(),l}};function Js(e,t){for(const[n,i]of Object.entries(t||{}))try{e[n]=i}catch(t){Object.defineProperty(e,n,{configurable:!0,get:()=>i})}return e}const Zs=new Map,eo={set(e,t,n){Zs.has(e)||Zs.set(e,new Map);const i=Zs.get(e);i.has(t)||0===i.size?i.set(t,n):console.error(`Bootstrap doesn't allow more than one instance per element. Bound instance: ${Array.from(i.keys())[0]}.`)},get:(e,t)=>Zs.has(e)&&Zs.get(e).get(t)||null,remove(e,t){if(!Zs.has(e))return;const n=Zs.get(e);n.delete(t),0===n.size&&Zs.delete(e)}};function to(e){if("true"===e)return!0;if("false"===e)return!1;if(e===Number(e).toString())return Number(e);if(""===e||"null"===e)return null;if("string"!=typeof e)return e;try{return JSON.parse(decodeURIComponent(e))}catch(t){return e}}function no(e){return e.replace(/[A-Z]/g,(e=>`-${e.toLowerCase()}`))}const io={setDataAttribute(e,t,n){e.setAttribute(`data-bs-${no(t)}`,n)},removeDataAttribute(e,t){e.removeAttribute(`data-bs-${no(t)}`)},getDataAttributes(e){if(!e)return{};const t={},n=Object.keys(e.dataset).filter((e=>e.startsWith("bs")&&!e.startsWith("bsConfig")));for(const i of n){let n=i.replace(/^bs/,"");n=n.charAt(0).toLowerCase()+n.slice(1,n.length),t[n]=to(e.dataset[i])}return t},getDataAttribute:(e,t)=>to(e.getAttribute(`data-bs-${no(t)}`))};class ro{static get Default(){return{}}static get DefaultType(){return{}}static get NAME(){throw new Error('You have to implement the static method "NAME", for each component!')}_getConfig(e){return e=this._mergeConfigObj(e),e=this._configAfterMerge(e),this._typeCheckConfig(e),e}_configAfterMerge(e){return e}_mergeConfigObj(e,t){const n=Es(t)?io.getDataAttribute(t,"config"):{};return{...this.constructor.Default,..."object"==typeof n?n:{},...Es(t)?io.getDataAttributes(t):{},..."object"==typeof e?e:{}}}_typeCheckConfig(e,t=this.constructor.DefaultType){for(const i of Object.keys(t)){const r=t[i],s=e[i],o=Es(s)?"element":null==(n=s)?`${n}`:Object.prototype.toString.call(n).match(/\s([a-z]+)/i)[1].toLowerCase();if(!new RegExp(r).test(o))throw new TypeError(`${this.constructor.NAME.toUpperCase()}: Option "${i}" provided type "${o}" but expected type "${r}".`)}var n}}class so extends ro{constructor(e,t){super(),(e=Ss(e))&&(this._element=e,this._config=this._getConfig(t),eo.set(this._element,this.constructor.DATA_KEY,this))}dispose(){eo.remove(this._element,this.constructor.DATA_KEY),Qs.off(this._element,this.constructor.EVENT_KEY);for(const e of Object.getOwnPropertyNames(this))this[e]=null}_queueCallback(e,t,n=!0){Ds(e,t,n)}_getConfig(e){return e=this._mergeConfigObj(e,this._element),e=this._configAfterMerge(e),this._typeCheckConfig(e),e}static getInstance(e){return eo.get(Ss(e),this.DATA_KEY)}static getOrCreateInstance(e,t={}){return this.getInstance(e)||new this(e,"object"==typeof t?t:null)}static get VERSION(){return"5.2.3"}static get DATA_KEY(){return`bs.${this.NAME}`}static get EVENT_KEY(){return`.${this.DATA_KEY}`}static eventName(e){return`${e}${this.EVENT_KEY}`}}const oo=(e,t="hide")=>{const n=`click.dismiss${e.EVENT_KEY}`,i=e.NAME;Qs.on(document,n,`[data-bs-dismiss="${i}"]`,(function(n){if(["A","AREA"].includes(this.tagName)&&n.preventDefault(),Cs(this))return;const r=ws(this)||this.closest(`.${i}`);e.getOrCreateInstance(r)[t]()}))},ao=".bs.alert",lo=`close${ao}`,co=`closed${ao}`;class ho extends so{static get NAME(){return"alert"}close(){if(Qs.trigger(this._element,lo).defaultPrevented)return;this._element.classList.remove("show");const e=this._element.classList.contains("fade");this._queueCallback((()=>this._destroyElement()),this._element,e)}_destroyElement(){this._element.remove(),Qs.trigger(this._element,co),this.dispose()}static jQueryInterface(e){return this.each((function(){const t=ho.getOrCreateInstance(this);if("string"==typeof e){if(void 0===t[e]||e.startsWith("_")||"constructor"===e)throw new TypeError(`No method named "${e}"`);t[e](this)}}))}}oo(ho,"close"),Ps(ho);const uo='[data-bs-toggle="button"]';class po extends so{static get NAME(){return"button"}toggle(){this._element.setAttribute("aria-pressed",this._element.classList.toggle("active"))}static jQueryInterface(e){return this.each((function(){const t=po.getOrCreateInstance(this);"toggle"===e&&t[e]()}))}}Qs.on(document,"click.bs.button.data-api",uo,(e=>{e.preventDefault();const t=e.target.closest(uo);po.getOrCreateInstance(t).toggle()})),Ps(po);const mo={find:(e,t=document.documentElement)=>[].concat(...Element.prototype.querySelectorAll.call(t,e)),findOne:(e,t=document.documentElement)=>Element.prototype.querySelector.call(t,e),children:(e,t)=>[].concat(...e.children).filter((e=>e.matches(t))),parents(e,t){const n=[];let i=e.parentNode.closest(t);for(;i;)n.push(i),i=i.parentNode.closest(t);return n},prev(e,t){let n=e.previousElementSibling;for(;n;){if(n.matches(t))return[n];n=n.previousElementSibling}return[]},next(e,t){let n=e.nextElementSibling;for(;n;){if(n.matches(t))return[n];n=n.nextElementSibling}return[]},focusableChildren(e){const t=["a","button","input","textarea","select","details","[tabindex]",'[contenteditable="true"]'].map((e=>`${e}:not([tabindex^="-"])`)).join(",");return this.find(t,e).filter((e=>!Cs(e)&&As(e)))}},fo=".bs.swipe",go=`touchstart${fo}`,vo=`touchmove${fo}`,bo=`touchend${fo}`,yo=`pointerdown${fo}`,wo=`pointerup${fo}`,_o={endCallback:null,leftCallback:null,rightCallback:null},Eo={endCallback:"(function|null)",leftCallback:"(function|null)",rightCallback:"(function|null)"};class So extends ro{constructor(e,t){super(),this._element=e,e&&So.isSupported()&&(this._config=this._getConfig(t),this._deltaX=0,this._supportPointerEvents=Boolean(window.PointerEvent),this._initEvents())}static get Default(){return _o}static get DefaultType(){return Eo}static get NAME(){return"swipe"}dispose(){Qs.off(this._element,fo)}_start(e){this._supportPointerEvents?this._eventIsPointerPenTouch(e)&&(this._deltaX=e.clientX):this._deltaX=e.touches[0].clientX}_end(e){this._eventIsPointerPenTouch(e)&&(this._deltaX=e.clientX-this._deltaX),this._handleSwipe(),Rs(this._config.endCallback)}_move(e){this._deltaX=e.touches&&e.touches.length>1?0:e.touches[0].clientX-this._deltaX}_handleSwipe(){const e=Math.abs(this._deltaX);if(e<=40)return;const t=e/this._deltaX;this._deltaX=0,t&&Rs(t>0?this._config.rightCallback:this._config.leftCallback)}_initEvents(){this._supportPointerEvents?(Qs.on(this._element,yo,(e=>this._start(e))),Qs.on(this._element,wo,(e=>this._end(e))),this._element.classList.add("pointer-event")):(Qs.on(this._element,go,(e=>this._start(e))),Qs.on(this._element,vo,(e=>this._move(e))),Qs.on(this._element,bo,(e=>this._end(e))))}_eventIsPointerPenTouch(e){return this._supportPointerEvents&&("pen"===e.pointerType||"touch"===e.pointerType)}static isSupported(){return"ontouchstart"in document.documentElement||navigator.maxTouchPoints>0}}const Ao=".bs.carousel",Co=".data-api",To="next",ko="prev",Oo="left",xo="right",Lo=`slide${Ao}`,Mo=`slid${Ao}`,Po=`keydown${Ao}`,Ro=`mouseenter${Ao}`,Do=`mouseleave${Ao}`,Io=`dragstart${Ao}`,No=`load${Ao}${Co}`,Fo=`click${Ao}${Co}`,jo="carousel",Bo="active",$o=".active",qo=".carousel-item",Ho=$o+qo,Vo={ArrowLeft:xo,ArrowRight:Oo},Wo={interval:5e3,keyboard:!0,pause:"hover",ride:!1,touch:!0,wrap:!0},zo={interval:"(number|boolean)",keyboard:"boolean",pause:"(string|boolean)",ride:"(boolean|string)",touch:"boolean",wrap:"boolean"};class Uo extends so{constructor(e,t){super(e,t),this._interval=null,this._activeElement=null,this._isSliding=!1,this.touchTimeout=null,this._swipeHelper=null,this._indicatorsElement=mo.findOne(".carousel-indicators",this._element),this._addEventListeners(),this._config.ride===jo&&this.cycle()}static get Default(){return Wo}static get DefaultType(){return zo}static get NAME(){return"carousel"}next(){this._slide(To)}nextWhenVisible(){!document.hidden&&As(this._element)&&this.next()}prev(){this._slide(ko)}pause(){this._isSliding&&_s(this._element),this._clearInterval()}cycle(){this._clearInterval(),this._updateInterval(),this._interval=setInterval((()=>this.nextWhenVisible()),this._config.interval)}_maybeEnableCycle(){this._config.ride&&(this._isSliding?Qs.one(this._element,Mo,(()=>this.cycle())):this.cycle())}to(e){const t=this._getItems();if(e>t.length-1||e<0)return;if(this._isSliding)return void Qs.one(this._element,Mo,(()=>this.to(e)));const n=this._getItemIndex(this._getActive());if(n===e)return;const i=e>n?To:ko;this._slide(i,t[e])}dispose(){this._swipeHelper&&this._swipeHelper.dispose(),super.dispose()}_configAfterMerge(e){return e.defaultInterval=e.interval,e}_addEventListeners(){this._config.keyboard&&Qs.on(this._element,Po,(e=>this._keydown(e))),"hover"===this._config.pause&&(Qs.on(this._element,Ro,(()=>this.pause())),Qs.on(this._element,Do,(()=>this._maybeEnableCycle()))),this._config.touch&&So.isSupported()&&this._addTouchEventListeners()}_addTouchEventListeners(){for(const e of mo.find(".carousel-item img",this._element))Qs.on(e,Io,(e=>e.preventDefault()));const e={leftCallback:()=>this._slide(this._directionToOrder(Oo)),rightCallback:()=>this._slide(this._directionToOrder(xo)),endCallback:()=>{"hover"===this._config.pause&&(this.pause(),this.touchTimeout&&clearTimeout(this.touchTimeout),this.touchTimeout=setTimeout((()=>this._maybeEnableCycle()),500+this._config.interval))}};this._swipeHelper=new So(this._element,e)}_keydown(e){if(/input|textarea/i.test(e.target.tagName))return;const t=Vo[e.key];t&&(e.preventDefault(),this._slide(this._directionToOrder(t)))}_getItemIndex(e){return this._getItems().indexOf(e)}_setActiveIndicatorElement(e){if(!this._indicatorsElement)return;const t=mo.findOne($o,this._indicatorsElement);t.classList.remove(Bo),t.removeAttribute("aria-current");const n=mo.findOne(`[data-bs-slide-to="${e}"]`,this._indicatorsElement);n&&(n.classList.add(Bo),n.setAttribute("aria-current","true"))}_updateInterval(){const e=this._activeElement||this._getActive();if(!e)return;const t=Number.parseInt(e.getAttribute("data-bs-interval"),10);this._config.interval=t||this._config.defaultInterval}_slide(e,t=null){if(this._isSliding)return;const n=this._getActive(),i=e===To,r=t||Is(this._getItems(),n,i,this._config.wrap);if(r===n)return;const s=this._getItemIndex(r),o=t=>Qs.trigger(this._element,t,{relatedTarget:r,direction:this._orderToDirection(e),from:this._getItemIndex(n),to:s});if(o(Lo).defaultPrevented)return;if(!n||!r)return;const a=Boolean(this._interval);this.pause(),this._isSliding=!0,this._setActiveIndicatorElement(s),this._activeElement=r;const l=i?"carousel-item-start":"carousel-item-end",c=i?"carousel-item-next":"carousel-item-prev";r.classList.add(c),Os(r),n.classList.add(l),r.classList.add(l),this._queueCallback((()=>{r.classList.remove(l,c),r.classList.add(Bo),n.classList.remove(Bo,c,l),this._isSliding=!1,o(Mo)}),n,this._isAnimated()),a&&this.cycle()}_isAnimated(){return this._element.classList.contains("slide")}_getActive(){return mo.findOne(Ho,this._element)}_getItems(){return mo.find(qo,this._element)}_clearInterval(){this._interval&&(clearInterval(this._interval),this._interval=null)}_directionToOrder(e){return Ms()?e===Oo?ko:To:e===Oo?To:ko}_orderToDirection(e){return Ms()?e===ko?Oo:xo:e===ko?xo:Oo}static jQueryInterface(e){return this.each((function(){const t=Uo.getOrCreateInstance(this,e);if("number"!=typeof e){if("string"==typeof e){if(void 0===t[e]||e.startsWith("_")||"constructor"===e)throw new TypeError(`No method named "${e}"`);t[e]()}}else t.to(e)}))}}Qs.on(document,Fo,"[data-bs-slide], [data-bs-slide-to]",(function(e){const t=ws(this);if(!t||!t.classList.contains(jo))return;e.preventDefault();const n=Uo.getOrCreateInstance(t),i=this.getAttribute("data-bs-slide-to");return i?(n.to(i),void n._maybeEnableCycle()):"next"===io.getDataAttribute(this,"slide")?(n.next(),void n._maybeEnableCycle()):(n.prev(),void n._maybeEnableCycle())})),Qs.on(window,No,(()=>{const e=mo.find('[data-bs-ride="carousel"]');for(const t of e)Uo.getOrCreateInstance(t)})),Ps(Uo);const Ko=".bs.collapse",Go=`show${Ko}`,Xo=`shown${Ko}`,Yo=`hide${Ko}`,Qo=`hidden${Ko}`,Jo=`click${Ko}.data-api`,Zo="show",ea="collapse",ta="collapsing",na=`:scope .${ea} .${ea}`,ia='[data-bs-toggle="collapse"]',ra={parent:null,toggle:!0},sa={parent:"(null|element)",toggle:"boolean"};class oa extends so{constructor(e,t){super(e,t),this._isTransitioning=!1,this._triggerArray=[];const n=mo.find(ia);for(const e of n){const t=ys(e),n=mo.find(t).filter((e=>e===this._element));null!==t&&n.length&&this._triggerArray.push(e)}this._initializeChildren(),this._config.parent||this._addAriaAndCollapsedClass(this._triggerArray,this._isShown()),this._config.toggle&&this.toggle()}static get Default(){return ra}static get DefaultType(){return sa}static get NAME(){return"collapse"}toggle(){this._isShown()?this.hide():this.show()}show(){if(this._isTransitioning||this._isShown())return;let e=[];if(this._config.parent&&(e=this._getFirstLevelChildren(".collapse.show, .collapse.collapsing").filter((e=>e!==this._element)).map((e=>oa.getOrCreateInstance(e,{toggle:!1})))),e.length&&e[0]._isTransitioning)return;if(Qs.trigger(this._element,Go).defaultPrevented)return;for(const t of e)t.hide();const t=this._getDimension();this._element.classList.remove(ea),this._element.classList.add(ta),this._element.style[t]=0,this._addAriaAndCollapsedClass(this._triggerArray,!0),this._isTransitioning=!0;const n=`scroll${t[0].toUpperCase()+t.slice(1)}`;this._queueCallback((()=>{this._isTransitioning=!1,this._element.classList.remove(ta),this._element.classList.add(ea,Zo),this._element.style[t]="",Qs.trigger(this._element,Xo)}),this._element,!0),this._element.style[t]=`${this._element[n]}px`}hide(){if(this._isTransitioning||!this._isShown())return;if(Qs.trigger(this._element,Yo).defaultPrevented)return;const e=this._getDimension();this._element.style[e]=`${this._element.getBoundingClientRect()[e]}px`,Os(this._element),this._element.classList.add(ta),this._element.classList.remove(ea,Zo);for(const e of this._triggerArray){const t=ws(e);t&&!this._isShown(t)&&this._addAriaAndCollapsedClass([e],!1)}this._isTransitioning=!0,this._element.style[e]="",this._queueCallback((()=>{this._isTransitioning=!1,this._element.classList.remove(ta),this._element.classList.add(ea),Qs.trigger(this._element,Qo)}),this._element,!0)}_isShown(e=this._element){return e.classList.contains(Zo)}_configAfterMerge(e){return e.toggle=Boolean(e.toggle),e.parent=Ss(e.parent),e}_getDimension(){return this._element.classList.contains("collapse-horizontal")?"width":"height"}_initializeChildren(){if(!this._config.parent)return;const e=this._getFirstLevelChildren(ia);for(const t of e){const e=ws(t);e&&this._addAriaAndCollapsedClass([t],this._isShown(e))}}_getFirstLevelChildren(e){const t=mo.find(na,this._config.parent);return mo.find(e,this._config.parent).filter((e=>!t.includes(e)))}_addAriaAndCollapsedClass(e,t){if(e.length)for(const n of e)n.classList.toggle("collapsed",!t),n.setAttribute("aria-expanded",t)}static jQueryInterface(e){const t={};return"string"==typeof e&&/show|hide/.test(e)&&(t.toggle=!1),this.each((function(){const n=oa.getOrCreateInstance(this,t);if("string"==typeof e){if(void 0===n[e])throw new TypeError(`No method named "${e}"`);n[e]()}}))}}Qs.on(document,Jo,ia,(function(e){("A"===e.target.tagName||e.delegateTarget&&"A"===e.delegateTarget.tagName)&&e.preventDefault();const t=ys(this),n=mo.find(t);for(const e of n)oa.getOrCreateInstance(e,{toggle:!1}).toggle()})),Ps(oa);const aa="dropdown",la=".bs.dropdown",ca=".data-api",ha="ArrowUp",ua="ArrowDown",da=`hide${la}`,pa=`hidden${la}`,ma=`show${la}`,fa=`shown${la}`,ga=`click${la}${ca}`,va=`keydown${la}${ca}`,ba=`keyup${la}${ca}`,ya="show",wa='[data-bs-toggle="dropdown"]:not(.disabled):not(:disabled)',_a=`${wa}.${ya}`,Ea=".dropdown-menu",Sa=Ms()?"top-end":"top-start",Aa=Ms()?"top-start":"top-end",Ca=Ms()?"bottom-end":"bottom-start",Ta=Ms()?"bottom-start":"bottom-end",ka=Ms()?"left-start":"right-start",Oa=Ms()?"right-start":"left-start",xa={autoClose:!0,boundary:"clippingParents",display:"dynamic",offset:[0,2],popperConfig:null,reference:"toggle"},La={autoClose:"(boolean|string)",boundary:"(string|element)",display:"string",offset:"(array|string|function)",popperConfig:"(null|object|function)",reference:"(string|element|object)"};class Ma extends so{constructor(e,t){super(e,t),this._popper=null,this._parent=this._element.parentNode,this._menu=mo.next(this._element,Ea)[0]||mo.prev(this._element,Ea)[0]||mo.findOne(Ea,this._parent),this._inNavbar=this._detectNavbar()}static get Default(){return xa}static get DefaultType(){return La}static get NAME(){return aa}toggle(){return this._isShown()?this.hide():this.show()}show(){if(Cs(this._element)||this._isShown())return;const e={relatedTarget:this._element};if(!Qs.trigger(this._element,ma,e).defaultPrevented){if(this._createPopper(),"ontouchstart"in document.documentElement&&!this._parent.closest(".navbar-nav"))for(const e of[].concat(...document.body.children))Qs.on(e,"mouseover",ks);this._element.focus(),this._element.setAttribute("aria-expanded",!0),this._menu.classList.add(ya),this._element.classList.add(ya),Qs.trigger(this._element,fa,e)}}hide(){if(Cs(this._element)||!this._isShown())return;const e={relatedTarget:this._element};this._completeHide(e)}dispose(){this._popper&&this._popper.destroy(),super.dispose()}update(){this._inNavbar=this._detectNavbar(),this._popper&&this._popper.update()}_completeHide(e){if(!Qs.trigger(this._element,da,e).defaultPrevented){if("ontouchstart"in document.documentElement)for(const e of[].concat(...document.body.children))Qs.off(e,"mouseover",ks);this._popper&&this._popper.destroy(),this._menu.classList.remove(ya),this._element.classList.remove(ya),this._element.setAttribute("aria-expanded","false"),io.removeDataAttribute(this._menu,"popper"),Qs.trigger(this._element,pa,e)}}_getConfig(e){if("object"==typeof(e=super._getConfig(e)).reference&&!Es(e.reference)&&"function"!=typeof e.reference.getBoundingClientRect)throw new TypeError(`${aa.toUpperCase()}: Option "reference" provided type "object" without a required "getBoundingClientRect" method.`);return e}_createPopper(){if(void 0===e)throw new TypeError("Bootstrap's dropdowns require Popper (https://popper.js.org)");let t=this._element;"parent"===this._config.reference?t=this._parent:Es(this._config.reference)?t=Ss(this._config.reference):"object"==typeof this._config.reference&&(t=this._config.reference);const n=this._getPopperConfig();this._popper=fs(t,this._menu,n)}_isShown(){return this._menu.classList.contains(ya)}_getPlacement(){const e=this._parent;if(e.classList.contains("dropend"))return ka;if(e.classList.contains("dropstart"))return Oa;if(e.classList.contains("dropup-center"))return"top";if(e.classList.contains("dropdown-center"))return"bottom";const t="end"===getComputedStyle(this._menu).getPropertyValue("--bs-position").trim();return e.classList.contains("dropup")?t?Aa:Sa:t?Ta:Ca}_detectNavbar(){return null!==this._element.closest(".navbar")}_getOffset(){const{offset:e}=this._config;return"string"==typeof e?e.split(",").map((e=>Number.parseInt(e,10))):"function"==typeof e?t=>e(t,this._element):e}_getPopperConfig(){const e={placement:this._getPlacement(),modifiers:[{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"offset",options:{offset:this._getOffset()}}]};return(this._inNavbar||"static"===this._config.display)&&(io.setDataAttribute(this._menu,"popper","static"),e.modifiers=[{name:"applyStyles",enabled:!1}]),{...e,..."function"==typeof this._config.popperConfig?this._config.popperConfig(e):this._config.popperConfig}}_selectMenuItem({key:e,target:t}){const n=mo.find(".dropdown-menu .dropdown-item:not(.disabled):not(:disabled)",this._menu).filter((e=>As(e)));n.length&&Is(n,t,e===ua,!n.includes(t)).focus()}static jQueryInterface(e){return this.each((function(){const t=Ma.getOrCreateInstance(this,e);if("string"==typeof e){if(void 0===t[e])throw new TypeError(`No method named "${e}"`);t[e]()}}))}static clearMenus(e){if(2===e.button||"keyup"===e.type&&"Tab"!==e.key)return;const t=mo.find(_a);for(const n of t){const t=Ma.getInstance(n);if(!t||!1===t._config.autoClose)continue;const i=e.composedPath(),r=i.includes(t._menu);if(i.includes(t._element)||"inside"===t._config.autoClose&&!r||"outside"===t._config.autoClose&&r)continue;if(t._menu.contains(e.target)&&("keyup"===e.type&&"Tab"===e.key||/input|select|option|textarea|form/i.test(e.target.tagName)))continue;const s={relatedTarget:t._element};"click"===e.type&&(s.clickEvent=e),t._completeHide(s)}}static dataApiKeydownHandler(e){const t=/input|textarea/i.test(e.target.tagName),n="Escape"===e.key,i=[ha,ua].includes(e.key);if(!i&&!n)return;if(t&&!n)return;e.preventDefault();const r=this.matches(wa)?this:mo.prev(this,wa)[0]||mo.next(this,wa)[0]||mo.findOne(wa,e.delegateTarget.parentNode),s=Ma.getOrCreateInstance(r);if(i)return e.stopPropagation(),s.show(),void s._selectMenuItem(e);s._isShown()&&(e.stopPropagation(),s.hide(),r.focus())}}Qs.on(document,va,wa,Ma.dataApiKeydownHandler),Qs.on(document,va,Ea,Ma.dataApiKeydownHandler),Qs.on(document,ga,Ma.clearMenus),Qs.on(document,ba,Ma.clearMenus),Qs.on(document,ga,wa,(function(e){e.preventDefault(),Ma.getOrCreateInstance(this).toggle()})),Ps(Ma);const Pa=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",Ra=".sticky-top",Da="padding-right",Ia="margin-right";class Na{constructor(){this._element=document.body}getWidth(){const e=document.documentElement.clientWidth;return Math.abs(window.innerWidth-e)}hide(){const e=this.getWidth();this._disableOverFlow(),this._setElementAttributes(this._element,Da,(t=>t+e)),this._setElementAttributes(Pa,Da,(t=>t+e)),this._setElementAttributes(Ra,Ia,(t=>t-e))}reset(){this._resetElementAttributes(this._element,"overflow"),this._resetElementAttributes(this._element,Da),this._resetElementAttributes(Pa,Da),this._resetElementAttributes(Ra,Ia)}isOverflowing(){return this.getWidth()>0}_disableOverFlow(){this._saveInitialAttribute(this._element,"overflow"),this._element.style.overflow="hidden"}_setElementAttributes(e,t,n){const i=this.getWidth();this._applyManipulationCallback(e,(e=>{if(e!==this._element&&window.innerWidth>e.clientWidth+i)return;this._saveInitialAttribute(e,t);const r=window.getComputedStyle(e).getPropertyValue(t);e.style.setProperty(t,`${n(Number.parseFloat(r))}px`)}))}_saveInitialAttribute(e,t){const n=e.style.getPropertyValue(t);n&&io.setDataAttribute(e,t,n)}_resetElementAttributes(e,t){this._applyManipulationCallback(e,(e=>{const n=io.getDataAttribute(e,t);null!==n?(io.removeDataAttribute(e,t),e.style.setProperty(t,n)):e.style.removeProperty(t)}))}_applyManipulationCallback(e,t){if(Es(e))t(e);else for(const n of mo.find(e,this._element))t(n)}}const Fa="backdrop",ja="show",Ba=`mousedown.bs.${Fa}`,$a={className:"modal-backdrop",clickCallback:null,isAnimated:!1,isVisible:!0,rootElement:"body"},qa={className:"string",clickCallback:"(function|null)",isAnimated:"boolean",isVisible:"boolean",rootElement:"(element|string)"};class Ha extends ro{constructor(e){super(),this._config=this._getConfig(e),this._isAppended=!1,this._element=null}static get Default(){return $a}static get DefaultType(){return qa}static get NAME(){return Fa}show(e){if(!this._config.isVisible)return void Rs(e);this._append();const t=this._getElement();this._config.isAnimated&&Os(t),t.classList.add(ja),this._emulateAnimation((()=>{Rs(e)}))}hide(e){this._config.isVisible?(this._getElement().classList.remove(ja),this._emulateAnimation((()=>{this.dispose(),Rs(e)}))):Rs(e)}dispose(){this._isAppended&&(Qs.off(this._element,Ba),this._element.remove(),this._isAppended=!1)}_getElement(){if(!this._element){const e=document.createElement("div");e.className=this._config.className,this._config.isAnimated&&e.classList.add("fade"),this._element=e}return this._element}_configAfterMerge(e){return e.rootElement=Ss(e.rootElement),e}_append(){if(this._isAppended)return;const e=this._getElement();this._config.rootElement.append(e),Qs.on(e,Ba,(()=>{Rs(this._config.clickCallback)})),this._isAppended=!0}_emulateAnimation(e){Ds(e,this._getElement(),this._config.isAnimated)}}const Va=".bs.focustrap",Wa=`focusin${Va}`,za=`keydown.tab${Va}`,Ua="backward",Ka={autofocus:!0,trapElement:null},Ga={autofocus:"boolean",trapElement:"element"};class Xa extends ro{constructor(e){super(),this._config=this._getConfig(e),this._isActive=!1,this._lastTabNavDirection=null}static get Default(){return Ka}static get DefaultType(){return Ga}static get NAME(){return"focustrap"}activate(){this._isActive||(this._config.autofocus&&this._config.trapElement.focus(),Qs.off(document,Va),Qs.on(document,Wa,(e=>this._handleFocusin(e))),Qs.on(document,za,(e=>this._handleKeydown(e))),this._isActive=!0)}deactivate(){this._isActive&&(this._isActive=!1,Qs.off(document,Va))}_handleFocusin(e){const{trapElement:t}=this._config;if(e.target===document||e.target===t||t.contains(e.target))return;const n=mo.focusableChildren(t);0===n.length?t.focus():this._lastTabNavDirection===Ua?n[n.length-1].focus():n[0].focus()}_handleKeydown(e){"Tab"===e.key&&(this._lastTabNavDirection=e.shiftKey?Ua:"forward")}}const Ya=".bs.modal",Qa=`hide${Ya}`,Ja=`hidePrevented${Ya}`,Za=`hidden${Ya}`,el=`show${Ya}`,tl=`shown${Ya}`,nl=`resize${Ya}`,il=`click.dismiss${Ya}`,rl=`mousedown.dismiss${Ya}`,sl=`keydown.dismiss${Ya}`,ol=`click${Ya}.data-api`,al="modal-open",ll="show",cl="modal-static",hl={backdrop:!0,focus:!0,keyboard:!0},ul={backdrop:"(boolean|string)",focus:"boolean",keyboard:"boolean"};class dl extends so{constructor(e,t){super(e,t),this._dialog=mo.findOne(".modal-dialog",this._element),this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._isShown=!1,this._isTransitioning=!1,this._scrollBar=new Na,this._addEventListeners()}static get Default(){return hl}static get DefaultType(){return ul}static get NAME(){return"modal"}toggle(e){return this._isShown?this.hide():this.show(e)}show(e){this._isShown||this._isTransitioning||Qs.trigger(this._element,el,{relatedTarget:e}).defaultPrevented||(this._isShown=!0,this._isTransitioning=!0,this._scrollBar.hide(),document.body.classList.add(al),this._adjustDialog(),this._backdrop.show((()=>this._showElement(e))))}hide(){this._isShown&&!this._isTransitioning&&(Qs.trigger(this._element,Qa).defaultPrevented||(this._isShown=!1,this._isTransitioning=!0,this._focustrap.deactivate(),this._element.classList.remove(ll),this._queueCallback((()=>this._hideModal()),this._element,this._isAnimated())))}dispose(){for(const e of[window,this._dialog])Qs.off(e,Ya);this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}handleUpdate(){this._adjustDialog()}_initializeBackDrop(){return new Ha({isVisible:Boolean(this._config.backdrop),isAnimated:this._isAnimated()})}_initializeFocusTrap(){return new Xa({trapElement:this._element})}_showElement(e){document.body.contains(this._element)||document.body.append(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.scrollTop=0;const t=mo.findOne(".modal-body",this._dialog);t&&(t.scrollTop=0),Os(this._element),this._element.classList.add(ll),this._queueCallback((()=>{this._config.focus&&this._focustrap.activate(),this._isTransitioning=!1,Qs.trigger(this._element,tl,{relatedTarget:e})}),this._dialog,this._isAnimated())}_addEventListeners(){Qs.on(this._element,sl,(e=>{if("Escape"===e.key)return this._config.keyboard?(e.preventDefault(),void this.hide()):void this._triggerBackdropTransition()})),Qs.on(window,nl,(()=>{this._isShown&&!this._isTransitioning&&this._adjustDialog()})),Qs.on(this._element,rl,(e=>{Qs.one(this._element,il,(t=>{this._element===e.target&&this._element===t.target&&("static"!==this._config.backdrop?this._config.backdrop&&this.hide():this._triggerBackdropTransition())}))}))}_hideModal(){this._element.style.display="none",this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._isTransitioning=!1,this._backdrop.hide((()=>{document.body.classList.remove(al),this._resetAdjustments(),this._scrollBar.reset(),Qs.trigger(this._element,Za)}))}_isAnimated(){return this._element.classList.contains("fade")}_triggerBackdropTransition(){if(Qs.trigger(this._element,Ja).defaultPrevented)return;const e=this._element.scrollHeight>document.documentElement.clientHeight,t=this._element.style.overflowY;"hidden"===t||this._element.classList.contains(cl)||(e||(this._element.style.overflowY="hidden"),this._element.classList.add(cl),this._queueCallback((()=>{this._element.classList.remove(cl),this._queueCallback((()=>{this._element.style.overflowY=t}),this._dialog)}),this._dialog),this._element.focus())}_adjustDialog(){const e=this._element.scrollHeight>document.documentElement.clientHeight,t=this._scrollBar.getWidth(),n=t>0;if(n&&!e){const e=Ms()?"paddingLeft":"paddingRight";this._element.style[e]=`${t}px`}if(!n&&e){const e=Ms()?"paddingRight":"paddingLeft";this._element.style[e]=`${t}px`}}_resetAdjustments(){this._element.style.paddingLeft="",this._element.style.paddingRight=""}static jQueryInterface(e,t){return this.each((function(){const n=dl.getOrCreateInstance(this,e);if("string"==typeof e){if(void 0===n[e])throw new TypeError(`No method named "${e}"`);n[e](t)}}))}}Qs.on(document,ol,'[data-bs-toggle="modal"]',(function(e){const t=ws(this);["A","AREA"].includes(this.tagName)&&e.preventDefault(),Qs.one(t,el,(e=>{e.defaultPrevented||Qs.one(t,Za,(()=>{As(this)&&this.focus()}))}));const n=mo.findOne(".modal.show");n&&dl.getInstance(n).hide(),dl.getOrCreateInstance(t).toggle(this)})),oo(dl),Ps(dl);const pl=".bs.offcanvas",ml=".data-api",fl=`load${pl}${ml}`,gl="show",vl="showing",bl="hiding",yl=".offcanvas.show",wl=`show${pl}`,_l=`shown${pl}`,El=`hide${pl}`,Sl=`hidePrevented${pl}`,Al=`hidden${pl}`,Cl=`resize${pl}`,Tl=`click${pl}${ml}`,kl=`keydown.dismiss${pl}`,Ol={backdrop:!0,keyboard:!0,scroll:!1},xl={backdrop:"(boolean|string)",keyboard:"boolean",scroll:"boolean"};class Ll extends so{constructor(e,t){super(e,t),this._isShown=!1,this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._addEventListeners()}static get Default(){return Ol}static get DefaultType(){return xl}static get NAME(){return"offcanvas"}toggle(e){return this._isShown?this.hide():this.show(e)}show(e){this._isShown||Qs.trigger(this._element,wl,{relatedTarget:e}).defaultPrevented||(this._isShown=!0,this._backdrop.show(),this._config.scroll||(new Na).hide(),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.classList.add(vl),this._queueCallback((()=>{this._config.scroll&&!this._config.backdrop||this._focustrap.activate(),this._element.classList.add(gl),this._element.classList.remove(vl),Qs.trigger(this._element,_l,{relatedTarget:e})}),this._element,!0))}hide(){this._isShown&&(Qs.trigger(this._element,El).defaultPrevented||(this._focustrap.deactivate(),this._element.blur(),this._isShown=!1,this._element.classList.add(bl),this._backdrop.hide(),this._queueCallback((()=>{this._element.classList.remove(gl,bl),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._config.scroll||(new Na).reset(),Qs.trigger(this._element,Al)}),this._element,!0)))}dispose(){this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}_initializeBackDrop(){const e=Boolean(this._config.backdrop);return new Ha({className:"offcanvas-backdrop",isVisible:e,isAnimated:!0,rootElement:this._element.parentNode,clickCallback:e?()=>{"static"!==this._config.backdrop?this.hide():Qs.trigger(this._element,Sl)}:null})}_initializeFocusTrap(){return new Xa({trapElement:this._element})}_addEventListeners(){Qs.on(this._element,kl,(e=>{"Escape"===e.key&&(this._config.keyboard?this.hide():Qs.trigger(this._element,Sl))}))}static jQueryInterface(e){return this.each((function(){const t=Ll.getOrCreateInstance(this,e);if("string"==typeof e){if(void 0===t[e]||e.startsWith("_")||"constructor"===e)throw new TypeError(`No method named "${e}"`);t[e](this)}}))}}Qs.on(document,Tl,'[data-bs-toggle="offcanvas"]',(function(e){const t=ws(this);if(["A","AREA"].includes(this.tagName)&&e.preventDefault(),Cs(this))return;Qs.one(t,Al,(()=>{As(this)&&this.focus()}));const n=mo.findOne(yl);n&&n!==t&&Ll.getInstance(n).hide(),Ll.getOrCreateInstance(t).toggle(this)})),Qs.on(window,fl,(()=>{for(const e of mo.find(yl))Ll.getOrCreateInstance(e).show()})),Qs.on(window,Cl,(()=>{for(const e of mo.find("[aria-modal][class*=show][class*=offcanvas-]"))"fixed"!==getComputedStyle(e).position&&Ll.getOrCreateInstance(e).hide()})),oo(Ll),Ps(Ll);const Ml=new Set(["background","cite","href","itemtype","longdesc","poster","src","xlink:href"]),Pl=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^#&/:?]*(?:[#/?]|$))/i,Rl=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[\d+/a-z]+=*$/i,Dl=(e,t)=>{const n=e.nodeName.toLowerCase();return t.includes(n)?!Ml.has(n)||Boolean(Pl.test(e.nodeValue)||Rl.test(e.nodeValue)):t.filter((e=>e instanceof RegExp)).some((e=>e.test(n)))},Il={"*":["class","dir","id","lang","role",/^aria-[\w-]*$/i],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],div:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","srcset","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]},Nl={allowList:Il,content:{},extraClass:"",html:!1,sanitize:!0,sanitizeFn:null,template:"<div></div>"},Fl={allowList:"object",content:"object",extraClass:"(string|function)",html:"boolean",sanitize:"boolean",sanitizeFn:"(null|function)",template:"string"},jl={entry:"(string|element|function|null)",selector:"(string|element)"};class Bl extends ro{constructor(e){super(),this._config=this._getConfig(e)}static get Default(){return Nl}static get DefaultType(){return Fl}static get NAME(){return"TemplateFactory"}getContent(){return Object.values(this._config.content).map((e=>this._resolvePossibleFunction(e))).filter(Boolean)}hasContent(){return this.getContent().length>0}changeContent(e){return this._checkContent(e),this._config.content={...this._config.content,...e},this}toHtml(){const e=document.createElement("div");e.innerHTML=this._maybeSanitize(this._config.template);for(const[t,n]of Object.entries(this._config.content))this._setContent(e,n,t);const t=e.children[0],n=this._resolvePossibleFunction(this._config.extraClass);return n&&t.classList.add(...n.split(" ")),t}_typeCheckConfig(e){super._typeCheckConfig(e),this._checkContent(e.content)}_checkContent(e){for(const[t,n]of Object.entries(e))super._typeCheckConfig({selector:t,entry:n},jl)}_setContent(e,t,n){const i=mo.findOne(n,e);i&&((t=this._resolvePossibleFunction(t))?Es(t)?this._putElementInTemplate(Ss(t),i):this._config.html?i.innerHTML=this._maybeSanitize(t):i.textContent=t:i.remove())}_maybeSanitize(e){return this._config.sanitize?function(e,t,n){if(!e.length)return e;if(n&&"function"==typeof n)return n(e);const i=(new window.DOMParser).parseFromString(e,"text/html"),r=[].concat(...i.body.querySelectorAll("*"));for(const e of r){const n=e.nodeName.toLowerCase();if(!Object.keys(t).includes(n)){e.remove();continue}const i=[].concat(...e.attributes),r=[].concat(t["*"]||[],t[n]||[]);for(const t of i)Dl(t,r)||e.removeAttribute(t.nodeName)}return i.body.innerHTML}(e,this._config.allowList,this._config.sanitizeFn):e}_resolvePossibleFunction(e){return"function"==typeof e?e(this):e}_putElementInTemplate(e,t){if(this._config.html)return t.innerHTML="",void t.append(e);t.textContent=e.textContent}}const $l=new Set(["sanitize","allowList","sanitizeFn"]),ql="fade",Hl="show",Vl=".modal",Wl="hide.bs.modal",zl="hover",Ul="focus",Kl={AUTO:"auto",TOP:"top",RIGHT:Ms()?"left":"right",BOTTOM:"bottom",LEFT:Ms()?"right":"left"},Gl={allowList:Il,animation:!0,boundary:"clippingParents",container:!1,customClass:"",delay:0,fallbackPlacements:["top","right","bottom","left"],html:!1,offset:[0,0],placement:"top",popperConfig:null,sanitize:!0,sanitizeFn:null,selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',title:"",trigger:"hover focus"},Xl={allowList:"object",animation:"boolean",boundary:"(string|element)",container:"(string|element|boolean)",customClass:"(string|function)",delay:"(number|object)",fallbackPlacements:"array",html:"boolean",offset:"(array|string|function)",placement:"(string|function)",popperConfig:"(null|object|function)",sanitize:"boolean",sanitizeFn:"(null|function)",selector:"(string|boolean)",template:"string",title:"(string|element|function)",trigger:"string"};class Yl extends so{constructor(t,n){if(void 0===e)throw new TypeError("Bootstrap's tooltips require Popper (https://popper.js.org)");super(t,n),this._isEnabled=!0,this._timeout=0,this._isHovered=null,this._activeTrigger={},this._popper=null,this._templateFactory=null,this._newContent=null,this.tip=null,this._setListeners(),this._config.selector||this._fixTitle()}static get Default(){return Gl}static get DefaultType(){return Xl}static get NAME(){return"tooltip"}enable(){this._isEnabled=!0}disable(){this._isEnabled=!1}toggleEnabled(){this._isEnabled=!this._isEnabled}toggle(){this._isEnabled&&(this._activeTrigger.click=!this._activeTrigger.click,this._isShown()?this._leave():this._enter())}dispose(){clearTimeout(this._timeout),Qs.off(this._element.closest(Vl),Wl,this._hideModalHandler),this._element.getAttribute("data-bs-original-title")&&this._element.setAttribute("title",this._element.getAttribute("data-bs-original-title")),this._disposePopper(),super.dispose()}show(){if("none"===this._element.style.display)throw new Error("Please use show on visible elements");if(!this._isWithContent()||!this._isEnabled)return;const e=Qs.trigger(this._element,this.constructor.eventName("show")),t=(Ts(this._element)||this._element.ownerDocument.documentElement).contains(this._element);if(e.defaultPrevented||!t)return;this._disposePopper();const n=this._getTipElement();this._element.setAttribute("aria-describedby",n.getAttribute("id"));const{container:i}=this._config;if(this._element.ownerDocument.documentElement.contains(this.tip)||(i.append(n),Qs.trigger(this._element,this.constructor.eventName("inserted"))),this._popper=this._createPopper(n),n.classList.add(Hl),"ontouchstart"in document.documentElement)for(const e of[].concat(...document.body.children))Qs.on(e,"mouseover",ks);this._queueCallback((()=>{Qs.trigger(this._element,this.constructor.eventName("shown")),!1===this._isHovered&&this._leave(),this._isHovered=!1}),this.tip,this._isAnimated())}hide(){if(this._isShown()&&!Qs.trigger(this._element,this.constructor.eventName("hide")).defaultPrevented){if(this._getTipElement().classList.remove(Hl),"ontouchstart"in document.documentElement)for(const e of[].concat(...document.body.children))Qs.off(e,"mouseover",ks);this._activeTrigger.click=!1,this._activeTrigger[Ul]=!1,this._activeTrigger[zl]=!1,this._isHovered=null,this._queueCallback((()=>{this._isWithActiveTrigger()||(this._isHovered||this._disposePopper(),this._element.removeAttribute("aria-describedby"),Qs.trigger(this._element,this.constructor.eventName("hidden")))}),this.tip,this._isAnimated())}}update(){this._popper&&this._popper.update()}_isWithContent(){return Boolean(this._getTitle())}_getTipElement(){return this.tip||(this.tip=this._createTipElement(this._newContent||this._getContentForTemplate())),this.tip}_createTipElement(e){const t=this._getTemplateFactory(e).toHtml();if(!t)return null;t.classList.remove(ql,Hl),t.classList.add(`bs-${this.constructor.NAME}-auto`);const n=(e=>{do{e+=Math.floor(1e6*Math.random())}while(document.getElementById(e));return e})(this.constructor.NAME).toString();return t.setAttribute("id",n),this._isAnimated()&&t.classList.add(ql),t}setContent(e){this._newContent=e,this._isShown()&&(this._disposePopper(),this.show())}_getTemplateFactory(e){return this._templateFactory?this._templateFactory.changeContent(e):this._templateFactory=new Bl({...this._config,content:e,extraClass:this._resolvePossibleFunction(this._config.customClass)}),this._templateFactory}_getContentForTemplate(){return{".tooltip-inner":this._getTitle()}}_getTitle(){return this._resolvePossibleFunction(this._config.title)||this._element.getAttribute("data-bs-original-title")}_initializeOnDelegatedTarget(e){return this.constructor.getOrCreateInstance(e.delegateTarget,this._getDelegateConfig())}_isAnimated(){return this._config.animation||this.tip&&this.tip.classList.contains(ql)}_isShown(){return this.tip&&this.tip.classList.contains(Hl)}_createPopper(e){const t="function"==typeof this._config.placement?this._config.placement.call(this,e,this._element):this._config.placement,n=Kl[t.toUpperCase()];return fs(this._element,e,this._getPopperConfig(n))}_getOffset(){const{offset:e}=this._config;return"string"==typeof e?e.split(",").map((e=>Number.parseInt(e,10))):"function"==typeof e?t=>e(t,this._element):e}_resolvePossibleFunction(e){return"function"==typeof e?e.call(this._element):e}_getPopperConfig(e){const t={placement:e,modifiers:[{name:"flip",options:{fallbackPlacements:this._config.fallbackPlacements}},{name:"offset",options:{offset:this._getOffset()}},{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"arrow",options:{element:`.${this.constructor.NAME}-arrow`}},{name:"preSetPlacement",enabled:!0,phase:"beforeMain",fn:e=>{this._getTipElement().setAttribute("data-popper-placement",e.state.placement)}}]};return{...t,..."function"==typeof this._config.popperConfig?this._config.popperConfig(t):this._config.popperConfig}}_setListeners(){const e=this._config.trigger.split(" ");for(const t of e)if("click"===t)Qs.on(this._element,this.constructor.eventName("click"),this._config.selector,(e=>{this._initializeOnDelegatedTarget(e).toggle()}));else if("manual"!==t){const e=t===zl?this.constructor.eventName("mouseenter"):this.constructor.eventName("focusin"),n=t===zl?this.constructor.eventName("mouseleave"):this.constructor.eventName("focusout");Qs.on(this._element,e,this._config.selector,(e=>{const t=this._initializeOnDelegatedTarget(e);t._activeTrigger["focusin"===e.type?Ul:zl]=!0,t._enter()})),Qs.on(this._element,n,this._config.selector,(e=>{const t=this._initializeOnDelegatedTarget(e);t._activeTrigger["focusout"===e.type?Ul:zl]=t._element.contains(e.relatedTarget),t._leave()}))}this._hideModalHandler=()=>{this._element&&this.hide()},Qs.on(this._element.closest(Vl),Wl,this._hideModalHandler)}_fixTitle(){const e=this._element.getAttribute("title");e&&(this._element.getAttribute("aria-label")||this._element.textContent.trim()||this._element.setAttribute("aria-label",e),this._element.setAttribute("data-bs-original-title",e),this._element.removeAttribute("title"))}_enter(){this._isShown()||this._isHovered?this._isHovered=!0:(this._isHovered=!0,this._setTimeout((()=>{this._isHovered&&this.show()}),this._config.delay.show))}_leave(){this._isWithActiveTrigger()||(this._isHovered=!1,this._setTimeout((()=>{this._isHovered||this.hide()}),this._config.delay.hide))}_setTimeout(e,t){clearTimeout(this._timeout),this._timeout=setTimeout(e,t)}_isWithActiveTrigger(){return Object.values(this._activeTrigger).includes(!0)}_getConfig(e){const t=io.getDataAttributes(this._element);for(const e of Object.keys(t))$l.has(e)&&delete t[e];return e={...t,..."object"==typeof e&&e?e:{}},e=this._mergeConfigObj(e),e=this._configAfterMerge(e),this._typeCheckConfig(e),e}_configAfterMerge(e){return e.container=!1===e.container?document.body:Ss(e.container),"number"==typeof e.delay&&(e.delay={show:e.delay,hide:e.delay}),"number"==typeof e.title&&(e.title=e.title.toString()),"number"==typeof e.content&&(e.content=e.content.toString()),e}_getDelegateConfig(){const e={};for(const t in this._config)this.constructor.Default[t]!==this._config[t]&&(e[t]=this._config[t]);return e.selector=!1,e.trigger="manual",e}_disposePopper(){this._popper&&(this._popper.destroy(),this._popper=null),this.tip&&(this.tip.remove(),this.tip=null)}static jQueryInterface(e){return this.each((function(){const t=Yl.getOrCreateInstance(this,e);if("string"==typeof e){if(void 0===t[e])throw new TypeError(`No method named "${e}"`);t[e]()}}))}}Ps(Yl);const Ql={...Yl.Default,content:"",offset:[0,8],placement:"right",template:'<div class="popover" role="tooltip"><div class="popover-arrow"></div><h3 class="popover-header"></h3><div class="popover-body"></div></div>',trigger:"click"},Jl={...Yl.DefaultType,content:"(null|string|element|function)"};class Zl extends Yl{static get Default(){return Ql}static get DefaultType(){return Jl}static get NAME(){return"popover"}_isWithContent(){return this._getTitle()||this._getContent()}_getContentForTemplate(){return{".popover-header":this._getTitle(),".popover-body":this._getContent()}}_getContent(){return this._resolvePossibleFunction(this._config.content)}static jQueryInterface(e){return this.each((function(){const t=Zl.getOrCreateInstance(this,e);if("string"==typeof e){if(void 0===t[e])throw new TypeError(`No method named "${e}"`);t[e]()}}))}}Ps(Zl);const ec=".bs.scrollspy",tc=`activate${ec}`,nc=`click${ec}`,ic=`load${ec}.data-api`,rc="active",sc="[href]",oc=".nav-link",ac=`${oc}, .nav-item > ${oc}, .list-group-item`,lc={offset:null,rootMargin:"0px 0px -25%",smoothScroll:!1,target:null,threshold:[.1,.5,1]},cc={offset:"(number|null)",rootMargin:"string",smoothScroll:"boolean",target:"element",threshold:"array"};class hc extends so{constructor(e,t){super(e,t),this._targetLinks=new Map,this._observableSections=new Map,this._rootElement="visible"===getComputedStyle(this._element).overflowY?null:this._element,this._activeTarget=null,this._observer=null,this._previousScrollData={visibleEntryTop:0,parentScrollTop:0},this.refresh()}static get Default(){return lc}static get DefaultType(){return cc}static get NAME(){return"scrollspy"}refresh(){this._initializeTargetsAndObservables(),this._maybeEnableSmoothScroll(),this._observer?this._observer.disconnect():this._observer=this._getNewObserver();for(const e of this._observableSections.values())this._observer.observe(e)}dispose(){this._observer.disconnect(),super.dispose()}_configAfterMerge(e){return e.target=Ss(e.target)||document.body,e.rootMargin=e.offset?`${e.offset}px 0px -30%`:e.rootMargin,"string"==typeof e.threshold&&(e.threshold=e.threshold.split(",").map((e=>Number.parseFloat(e)))),e}_maybeEnableSmoothScroll(){this._config.smoothScroll&&(Qs.off(this._config.target,nc),Qs.on(this._config.target,nc,sc,(e=>{const t=this._observableSections.get(e.target.hash);if(t){e.preventDefault();const n=this._rootElement||window,i=t.offsetTop-this._element.offsetTop;if(n.scrollTo)return void n.scrollTo({top:i,behavior:"smooth"});n.scrollTop=i}})))}_getNewObserver(){const e={root:this._rootElement,threshold:this._config.threshold,rootMargin:this._config.rootMargin};return new IntersectionObserver((e=>this._observerCallback(e)),e)}_observerCallback(e){const t=e=>this._targetLinks.get(`#${e.target.id}`),n=e=>{this._previousScrollData.visibleEntryTop=e.target.offsetTop,this._process(t(e))},i=(this._rootElement||document.documentElement).scrollTop,r=i>=this._previousScrollData.parentScrollTop;this._previousScrollData.parentScrollTop=i;for(const s of e){if(!s.isIntersecting){this._activeTarget=null,this._clearActiveClass(t(s));continue}const e=s.target.offsetTop>=this._previousScrollData.visibleEntryTop;if(r&&e){if(n(s),!i)return}else r||e||n(s)}}_initializeTargetsAndObservables(){this._targetLinks=new Map,this._observableSections=new Map;const e=mo.find(sc,this._config.target);for(const t of e){if(!t.hash||Cs(t))continue;const e=mo.findOne(t.hash,this._element);As(e)&&(this._targetLinks.set(t.hash,t),this._observableSections.set(t.hash,e))}}_process(e){this._activeTarget!==e&&(this._clearActiveClass(this._config.target),this._activeTarget=e,e.classList.add(rc),this._activateParents(e),Qs.trigger(this._element,tc,{relatedTarget:e}))}_activateParents(e){if(e.classList.contains("dropdown-item"))mo.findOne(".dropdown-toggle",e.closest(".dropdown")).classList.add(rc);else for(const t of mo.parents(e,".nav, .list-group"))for(const e of mo.prev(t,ac))e.classList.add(rc)}_clearActiveClass(e){e.classList.remove(rc);const t=mo.find(`${sc}.${rc}`,e);for(const e of t)e.classList.remove(rc)}static jQueryInterface(e){return this.each((function(){const t=hc.getOrCreateInstance(this,e);if("string"==typeof e){if(void 0===t[e]||e.startsWith("_")||"constructor"===e)throw new TypeError(`No method named "${e}"`);t[e]()}}))}}Qs.on(window,ic,(()=>{for(const e of mo.find('[data-bs-spy="scroll"]'))hc.getOrCreateInstance(e)})),Ps(hc);const uc=".bs.tab",dc=`hide${uc}`,pc=`hidden${uc}`,mc=`show${uc}`,fc=`shown${uc}`,gc=`click${uc}`,vc=`keydown${uc}`,bc=`load${uc}`,yc="ArrowLeft",wc="ArrowRight",_c="ArrowUp",Ec="ArrowDown",Sc="active",Ac="fade",Cc="show",Tc=":not(.dropdown-toggle)",kc='[data-bs-toggle="tab"], [data-bs-toggle="pill"], [data-bs-toggle="list"]',Oc=`.nav-link${Tc}, .list-group-item${Tc}, [role="tab"]${Tc}, ${kc}`,xc=`.${Sc}[data-bs-toggle="tab"], .${Sc}[data-bs-toggle="pill"], .${Sc}[data-bs-toggle="list"]`;class Lc extends so{constructor(e){super(e),this._parent=this._element.closest('.list-group, .nav, [role="tablist"]'),this._parent&&(this._setInitialAttributes(this._parent,this._getChildren()),Qs.on(this._element,vc,(e=>this._keydown(e))))}static get NAME(){return"tab"}show(){const e=this._element;if(this._elemIsActive(e))return;const t=this._getActiveElem(),n=t?Qs.trigger(t,dc,{relatedTarget:e}):null;Qs.trigger(e,mc,{relatedTarget:t}).defaultPrevented||n&&n.defaultPrevented||(this._deactivate(t,e),this._activate(e,t))}_activate(e,t){e&&(e.classList.add(Sc),this._activate(ws(e)),this._queueCallback((()=>{"tab"===e.getAttribute("role")?(e.removeAttribute("tabindex"),e.setAttribute("aria-selected",!0),this._toggleDropDown(e,!0),Qs.trigger(e,fc,{relatedTarget:t})):e.classList.add(Cc)}),e,e.classList.contains(Ac)))}_deactivate(e,t){e&&(e.classList.remove(Sc),e.blur(),this._deactivate(ws(e)),this._queueCallback((()=>{"tab"===e.getAttribute("role")?(e.setAttribute("aria-selected",!1),e.setAttribute("tabindex","-1"),this._toggleDropDown(e,!1),Qs.trigger(e,pc,{relatedTarget:t})):e.classList.remove(Cc)}),e,e.classList.contains(Ac)))}_keydown(e){if(![yc,wc,_c,Ec].includes(e.key))return;e.stopPropagation(),e.preventDefault();const t=[wc,Ec].includes(e.key),n=Is(this._getChildren().filter((e=>!Cs(e))),e.target,t,!0);n&&(n.focus({preventScroll:!0}),Lc.getOrCreateInstance(n).show())}_getChildren(){return mo.find(Oc,this._parent)}_getActiveElem(){return this._getChildren().find((e=>this._elemIsActive(e)))||null}_setInitialAttributes(e,t){this._setAttributeIfNotExists(e,"role","tablist");for(const e of t)this._setInitialAttributesOnChild(e)}_setInitialAttributesOnChild(e){e=this._getInnerElement(e);const t=this._elemIsActive(e),n=this._getOuterElement(e);e.setAttribute("aria-selected",t),n!==e&&this._setAttributeIfNotExists(n,"role","presentation"),t||e.setAttribute("tabindex","-1"),this._setAttributeIfNotExists(e,"role","tab"),this._setInitialAttributesOnTargetPanel(e)}_setInitialAttributesOnTargetPanel(e){const t=ws(e);t&&(this._setAttributeIfNotExists(t,"role","tabpanel"),e.id&&this._setAttributeIfNotExists(t,"aria-labelledby",`#${e.id}`))}_toggleDropDown(e,t){const n=this._getOuterElement(e);if(!n.classList.contains("dropdown"))return;const i=(e,i)=>{const r=mo.findOne(e,n);r&&r.classList.toggle(i,t)};i(".dropdown-toggle",Sc),i(".dropdown-menu",Cc),n.setAttribute("aria-expanded",t)}_setAttributeIfNotExists(e,t,n){e.hasAttribute(t)||e.setAttribute(t,n)}_elemIsActive(e){return e.classList.contains(Sc)}_getInnerElement(e){return e.matches(Oc)?e:mo.findOne(Oc,e)}_getOuterElement(e){return e.closest(".nav-item, .list-group-item")||e}static jQueryInterface(e){return this.each((function(){const t=Lc.getOrCreateInstance(this);if("string"==typeof e){if(void 0===t[e]||e.startsWith("_")||"constructor"===e)throw new TypeError(`No method named "${e}"`);t[e]()}}))}}Qs.on(document,gc,kc,(function(e){["A","AREA"].includes(this.tagName)&&e.preventDefault(),Cs(this)||Lc.getOrCreateInstance(this).show()})),Qs.on(window,bc,(()=>{for(const e of mo.find(xc))Lc.getOrCreateInstance(e)})),Ps(Lc);const Mc=".bs.toast",Pc=`mouseover${Mc}`,Rc=`mouseout${Mc}`,Dc=`focusin${Mc}`,Ic=`focusout${Mc}`,Nc=`hide${Mc}`,Fc=`hidden${Mc}`,jc=`show${Mc}`,Bc=`shown${Mc}`,$c="hide",qc="show",Hc="showing",Vc={animation:"boolean",autohide:"boolean",delay:"number"},Wc={animation:!0,autohide:!0,delay:5e3};class zc extends so{constructor(e,t){super(e,t),this._timeout=null,this._hasMouseInteraction=!1,this._hasKeyboardInteraction=!1,this._setListeners()}static get Default(){return Wc}static get DefaultType(){return Vc}static get NAME(){return"toast"}show(){Qs.trigger(this._element,jc).defaultPrevented||(this._clearTimeout(),this._config.animation&&this._element.classList.add("fade"),this._element.classList.remove($c),Os(this._element),this._element.classList.add(qc,Hc),this._queueCallback((()=>{this._element.classList.remove(Hc),Qs.trigger(this._element,Bc),this._maybeScheduleHide()}),this._element,this._config.animation))}hide(){this.isShown()&&(Qs.trigger(this._element,Nc).defaultPrevented||(this._element.classList.add(Hc),this._queueCallback((()=>{this._element.classList.add($c),this._element.classList.remove(Hc,qc),Qs.trigger(this._element,Fc)}),this._element,this._config.animation)))}dispose(){this._clearTimeout(),this.isShown()&&this._element.classList.remove(qc),super.dispose()}isShown(){return this._element.classList.contains(qc)}_maybeScheduleHide(){this._config.autohide&&(this._hasMouseInteraction||this._hasKeyboardInteraction||(this._timeout=setTimeout((()=>{this.hide()}),this._config.delay)))}_onInteraction(e,t){switch(e.type){case"mouseover":case"mouseout":this._hasMouseInteraction=t;break;case"focusin":case"focusout":this._hasKeyboardInteraction=t}if(t)return void this._clearTimeout();const n=e.relatedTarget;this._element===n||this._element.contains(n)||this._maybeScheduleHide()}_setListeners(){Qs.on(this._element,Pc,(e=>this._onInteraction(e,!0))),Qs.on(this._element,Rc,(e=>this._onInteraction(e,!1))),Qs.on(this._element,Dc,(e=>this._onInteraction(e,!0))),Qs.on(this._element,Ic,(e=>this._onInteraction(e,!1)))}_clearTimeout(){clearTimeout(this._timeout),this._timeout=null}static jQueryInterface(e){return this.each((function(){const t=zc.getOrCreateInstance(this,e);if("string"==typeof e){if(void 0===t[e])throw new TypeError(`No method named "${e}"`);t[e](this)}}))}}oo(zc),Ps(zc)})()})();
//# sourceMappingURL=application.js.map